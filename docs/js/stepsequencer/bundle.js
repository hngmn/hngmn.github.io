/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={228:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s},t.exports.default=t.exports,t.exports.__esModule=!0},858:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},913:t=>{function e(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}t.exports=function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t},t.exports.default=t.exports,t.exports.__esModule=!0},884:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var s,i,r=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(s=n.next()).done)&&(r.push(s.value),!e||r.length!==e);o=!0);}catch(t){a=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return r}},t.exports.default=t.exports,t.exports.__esModule=!0},521:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},38:(t,e,n)=>{var s=n(858),i=n(884),r=n(323),o=n(521);t.exports=function(t,e){return s(t)||i(t,e)||r(t,e)||o()},t.exports.default=t.exports,t.exports.__esModule=!0},323:(t,e,n)=>{var s=n(228);t.exports=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},382:function(t,e,n){!function(t,e,n,s){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=i(e),o=i(n),a=i(s),l=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},u=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},c=function(t,e){return{startTime:e,type:"setValue",value:t}},h=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},d=function(t,e,n){var s=n.startTime,i=n.target,r=n.timeConstant;return i+(e-i)*Math.exp((s-t)/r)},p=function(t){return"exponentialRampToValue"===t.type},f=function(t){return"linearRampToValue"===t.type},m=function(t){return p(t)||f(t)},g=function(t){return"setValue"===t.type},_=function(t){return"setValueCurve"===t.type},y=function t(e,n,s,i){var r=e[n];return void 0===r?i:m(r)||g(r)?r.value:_(r)?r.values[r.values.length-1]:d(s,t(e,n-1,r.startTime,i),r)},v=function(t,e,n,s,i){return void 0===n?[s.insertTime,i]:m(n)?[n.endTime,n.value]:g(n)?[n.startTime,n.value]:_(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,y(t,e-1,n.startTime,i)]},b=function(t){return"cancelAndHold"===t.type},w=function(t){return"cancelScheduledValues"===t.type},x=function(t){return b(t)||w(t)?t.cancelTime:p(t)||f(t)?t.endTime:t.startTime},k=function(t,e,n,s){var i=s.endTime,r=s.value;return n===r?r:0<n&&0<r||n<0&&r<0?n*Math.pow(r/n,(t-e)/(i-e)):0},S=function(t,e,n,s){return n+(t-e)/(s.endTime-e)*(s.value-n)},T=function(t,e){var n=e.duration,s=e.startTime,i=e.values;return function(t,e){var n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]}(i,(t-s)/n*(i.length-1))},C=function(t){return"setTarget"===t.type},E=function(){function t(e){o.default(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return a.default(t,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=x(t);if(b(t)||w(t)){var n=this._automationEvents.findIndex((function(n){return w(t)&&_(n)?n.startTime+n.duration>=e:x(n)>=e})),s=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),b(t)){var i=this._automationEvents[this._automationEvents.length-1];if(void 0!==s&&m(s)){if(C(i))throw new Error("The internal list is malformed.");var r=_(i)?i.startTime+i.duration:x(i),o=_(i)?i.values[i.values.length-1]:i.value,a=p(s)?k(e,r,o,s):S(e,r,o,s),d=p(s)?l(a,e,this._currenTime):u(a,e,this._currenTime);this._automationEvents.push(d)}void 0!==i&&C(i)&&this._automationEvents.push(c(this.getValue(e),e)),void 0!==i&&_(i)&&i.startTime+i.duration>e&&(this._automationEvents[this._automationEvents.length-1]=h(new Float32Array([6,7]),i.startTime,e-i.startTime))}}else{var g=this._automationEvents.findIndex((function(t){return x(t)>e})),y=-1===g?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[g-1];if(void 0!==y&&_(y)&&x(y)+y.duration>e)return!1;var v=p(t)?l(t.value,t.endTime,this._currenTime):f(t)?u(t.value,e,this._currenTime):t;if(-1===g)this._automationEvents.push(v);else{if(_(t)&&e+t.duration>x(this._automationEvents[g]))return!1;this._automationEvents.splice(g,0,v)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return x(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),s=n[0];C(s)&&n.unshift(c(y(this._automationEvents,e-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents.findIndex((function(e){return x(e)>t})),n=this._automationEvents[e],s=(-1===e?this._automationEvents.length:e)-1,i=this._automationEvents[s];if(void 0!==i&&C(i)&&(void 0===n||!m(n)||n.insertTime>t))return d(t,y(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(void 0!==i&&g(i)&&(void 0===n||!m(n)))return i.value;if(void 0!==i&&_(i)&&(void 0===n||!m(n)||i.startTime+i.duration>t))return t<i.startTime+i.duration?T(t,i):i.values[i.values.length-1];if(void 0!==i&&m(i)&&(void 0===n||!m(n)))return i.value;if(void 0!==n&&p(n)){var o=v(this._automationEvents,s,i,n,this._defaultValue),a=r.default(o,2),l=a[0],u=a[1];return k(t,l,u,n)}if(void 0!==n&&f(n)){var c=v(this._automationEvents,s,i,n,this._defaultValue),h=r.default(c,2),b=h[0],w=h[1];return S(t,b,w,n)}return this._defaultValue}}]),t}();t.AutomationEventList=E,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=c,t.createSetValueCurveAutomationEvent=h,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(38),n(575),n(913))},184:(t,e)=>{var n;!function(){"use strict";var s={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var r=typeof n;if("string"===r||"number"===r)t.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&t.push(o)}}else if("object"===r)if(n.toString===Object.prototype.toString)for(var a in n)s.call(n,a)&&n[a]&&t.push(a);else t.push(n.toString())}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},763:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var s=n(645),i=n.n(s)()((function(t){return t[1]}));i.push([t.id,".stepSequencer {\n  display: block;\n  border-radius: 4px;\n  background-color: #006aaa;\n  border: 4px black;\n}\n\n.sequencerControls {\n  display: grid;\n  grid-template-columns: auto 10% 10%;\n  grid-template-rows: auto;\n  border: 1px solid black;\n  border-radius: 4px;\n  padding: 15px;\n}\n\n.playButton {\n  display: inline-block;\n  justify-self: end;\n  border-radius: 28px;\n  color: #ffffff;\n  background: #d9ad34;\n  padding: 10px 20px 10px 20px;\n  text-decoration: none;\n}\n\n.clearAll {\n  display: inline-block;\n  justify-self: end;\n  border-radius: 28px;\n  color: #ffffff;\n  background: #d9ad34;\n  padding: 10px 20px 10px 20px;\n  text-decoration: none;\n}\n\n.tracks {\n  display: block;\n}\n\n.track {\n  display: grid;\n  grid-template-columns: 10% 90%;\n  grid-template-rows: auto;\n}\n\n.track:hover {\n  border: 1px solid black;\n  border-radius: 4px;\n}\n\n.controlPanel {\n  display: grid;\n  grid-template-columns: auto auto;\n  grid-template-rows: auto;\n  justify-items: center;\n  align-items: center;\n  border: 1px solid black;\n  border-radius: 2px;\n}\n\n.removeInstrumentButton {\n  display: inline;\n  padding: 1px;\n  background-color: transparent;\n  border: none;\n  border-radius: 2px;\n}\n\n.removeInstrumentButton:hover {\n  border: 1px solid yellow;\n}\n\n.instrumentLabel:hover {\n  border: 1px solid black;\n}\n\n.pads {\n  display: grid;\n  grid-template-rows: auto;\n  column-gap: 6px;\n  justify-self: end;\n}\n\n.bar {\n  display: grid;\n  grid-template-rows: auto;\n  column-gap: 4px;\n}\n\n.beat > button:first-child {\n  border-color: orange;\n}\n\n.beat {\n  display: grid;\n  grid-template-rows: auto;\n  column-gap: 2px;\n}\n\n.pad {\n  display: inline-block;\n  border-radius: 2px;\n  padding: 15px 15px;\n  cursor: pointer;\n  border: 1px solid gray;\n}\n\n.pad.on {\n  background-color: #e5f523;\n}\n\n.pad.off {\n  background-color: #829bb1;\n}\n\n.slider {\n  display: inline-block;\n  border: 1px solid black;\n}\n\n.slider:hover {\n  border: 1px solid black;\n  border-radius: 2px;\n}\n",""]);const r=i},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,s){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(s)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(i[o]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);s&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},679:(t,e,n)=>{"use strict";var s=n(864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return s.isMemo(t)?o:a[t.$$typeof]||i}a[s.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[s.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,s){if("string"!=typeof n){if(f){var i=p(n);i&&i!==f&&t(e,i,s)}var o=c(n);h&&(o=o.concat(h(n)));for(var a=l(e),m=l(n),g=0;g<o.length;++g){var _=o[g];if(!(r[_]||s&&s[_]||m&&m[_]||a&&a[_])){var y=d(n,_);try{u(e,_,y)}catch(t){}}}}return e}},418:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function i(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach((function(t){s[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(t){return!1}}()?Object.assign:function(t,r){for(var o,a,l=i(t),u=1;u<arguments.length;u++){for(var c in o=Object(arguments[u]))n.call(o,c)&&(l[c]=o[c]);if(e){a=e(o);for(var h=0;h<a.length;h++)s.call(o,a[h])&&(l[a[h]]=o[a[h]])}}return l}},703:(t,e,n)=>{"use strict";var s=n(414);function i(){}function r(){}r.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,r,o){if(o!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n,n}},697:(t,e,n)=>{t.exports=n(703)()},414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},448:(t,e,n)=>{"use strict";var s=n(294),i=n(418),r=n(840);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!s)throw Error(o(227));var a=new Set,l={};function u(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(l[t]=e,t=0;t<e.length;t++)a.add(e[t])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},m={};function g(t,e,n,s,i,r,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){_[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];_[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){_[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){_[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){_[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){_[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){_[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){_[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){_[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,n,s){var i=_.hasOwnProperty(e)?_[e]:null;(null!==i?0===i.type:!s&&2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))||(function(t,e,n,s){if(null==e||function(t,e,n,s){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,s)&&(n=null),s||null===i?function(t){return!!p.call(m,t)||!p.call(f,t)&&(d.test(t)?m[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,s=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);_[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);_[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);_[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){_[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),_.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){_[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var w=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,k=60106,S=60107,T=60108,C=60114,E=60109,O=60110,A=60112,D=60113,M=60120,R=60115,P=60116,N=60121,I=60128,q=60129,F=60130,V=60131;if("function"==typeof Symbol&&Symbol.for){var j=Symbol.for;x=j("react.element"),k=j("react.portal"),S=j("react.fragment"),T=j("react.strict_mode"),C=j("react.profiler"),E=j("react.provider"),O=j("react.context"),A=j("react.forward_ref"),D=j("react.suspense"),M=j("react.suspense_list"),R=j("react.memo"),P=j("react.lazy"),N=j("react.block"),j("react.scope"),I=j("react.opaque.id"),q=j("react.debug_trace_mode"),F=j("react.offscreen"),V=j("react.legacy_hidden")}var L,z="function"==typeof Symbol&&Symbol.iterator;function B(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=z&&t[z]||t["@@iterator"])?t:null}function W(t){if(void 0===L)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);L=e&&e[1]||""}return"\n"+L+t}var U=!1;function $(t,e){if(!t||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var s=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){s=t}t.call(e.prototype)}else{try{throw Error()}catch(t){s=t}t()}}catch(t){if(t&&s&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),r=s.stack.split("\n"),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==r[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?W(t):""}function Q(t){switch(t.tag){case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return $(t.type,!1);case 11:return $(t.type.render,!1);case 22:return $(t.type._render,!1);case 1:return $(t.type,!0);default:return""}}function G(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case S:return"Fragment";case k:return"Portal";case C:return"Profiler";case T:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case A:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case R:return G(t.type);case N:return G(t._render);case P:e=t._payload,t=t._init;try{return G(t(e))}catch(t){}}return null}function H(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Y(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function X(t){t._valueTracker||(t._valueTracker=function(t){var e=Y(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){s=""+t,r.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(t){s=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Z(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Y(t)?t.checked?"true":"false":t.value),(t=s)!==n&&(e.setValue(t),!0)}function K(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function J(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,s=null!=e.checked?e.checked:e.defaultChecked;n=H(null!=e.value?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=H(e.value),s=e.type;if(null!=n)"number"===s?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===s||"reset"===s)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function st(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!("submit"!==s&&"reset"!==s||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&K(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function rt(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return s.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function ot(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+H(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(s&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function at(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:H(n)}}function ut(t,e){var n=H(e.value),s=H(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=s&&(t.defaultValue=""+s)}function ct(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml";function dt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?dt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ft,mt,gt=(mt=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ft=ft||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ft.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,s){MSApp.execUnsafeLocalFunction((function(){return mt(t,e)}))}:mt);function _t(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var yt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vt=["Webkit","ms","Moz","O"];function bt(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||yt.hasOwnProperty(t)&&yt[t]?(""+e).trim():e+"px"}function wt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var s=0===n.indexOf("--"),i=bt(n,e[n],s);"float"===n&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}Object.keys(yt).forEach((function(t){vt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yt[e]=yt[t]}))}));var xt=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kt(t,e){if(e){if(xt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(o(62))}}function St(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Tt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Ct=null,Et=null,Ot=null;function At(t){if(t=Js(t)){if("function"!=typeof Ct)throw Error(o(280));var e=t.stateNode;e&&(e=ei(e),Ct(t.stateNode,t.type,e))}}function Dt(t){Et?Ot?Ot.push(t):Ot=[t]:Et=t}function Mt(){if(Et){var t=Et,e=Ot;if(Ot=Et=null,At(t),e)for(t=0;t<e.length;t++)At(e[t])}}function Rt(t,e){return t(e)}function Pt(t,e,n,s,i){return t(e,n,s,i)}function Nt(){}var It=Rt,qt=!1,Ft=!1;function Vt(){null===Et&&null===Ot||(Nt(),Mt())}function jt(t,e){var n=t.stateNode;if(null===n)return null;var s=ei(n);if(null===s)return null;n=s[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!s;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(o(231,e,typeof n));return n}var Lt=!1;if(h)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(mt){Lt=!1}function Bt(t,e,n,s,i,r,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(t){this.onError(t)}}var Wt=!1,Ut=null,$t=!1,Qt=null,Gt={onError:function(t){Wt=!0,Ut=t}};function Ht(t,e,n,s,i,r,o,a,l){Wt=!1,Ut=null,Bt.apply(Gt,arguments)}function Yt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Xt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function Zt(t){if(Yt(t)!==t)throw Error(o(188))}function Kt(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Yt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(null===i)break;var r=i.alternate;if(null===r){if(null!==(s=i.return)){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return Zt(i),t;if(r===s)return Zt(i),e;r=r.sibling}throw Error(o(188))}if(n.return!==s.return)n=i,s=r;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==s)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Jt(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var te,ee,ne,se,ie=!1,re=[],oe=null,ae=null,le=null,ue=new Map,ce=new Map,he=[],de="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pe(t,e,n,s,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[s]}}function fe(t,e){switch(t){case"focusin":case"focusout":oe=null;break;case"dragenter":case"dragleave":ae=null;break;case"mouseover":case"mouseout":le=null;break;case"pointerover":case"pointerout":ue.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ce.delete(e.pointerId)}}function me(t,e,n,s,i,r){return null===t||t.nativeEvent!==r?(t=pe(e,n,s,i,r),null!==e&&null!==(e=Js(e))&&ee(e),t):(t.eventSystemFlags|=s,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ge(t){var e=Ks(t.target);if(null!==e){var n=Yt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Xt(n)))return t.blockedOn=e,void se(t.lanePriority,(function(){r.unstable_runWithPriority(t.priority,(function(){ne(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function _e(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=Js(n))&&ee(e),t.blockedOn=n,!1;e.shift()}return!0}function ye(t,e,n){_e(t)&&n.delete(e)}function ve(){for(ie=!1;0<re.length;){var t=re[0];if(null!==t.blockedOn){null!==(t=Js(t.blockedOn))&&te(t);break}for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&re.shift()}null!==oe&&_e(oe)&&(oe=null),null!==ae&&_e(ae)&&(ae=null),null!==le&&_e(le)&&(le=null),ue.forEach(ye),ce.forEach(ye)}function be(t,e){t.blockedOn===e&&(t.blockedOn=null,ie||(ie=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ve)))}function we(t){function e(e){return be(e,t)}if(0<re.length){be(re[0],t);for(var n=1;n<re.length;n++){var s=re[n];s.blockedOn===t&&(s.blockedOn=null)}}for(null!==oe&&be(oe,t),null!==ae&&be(ae,t),null!==le&&be(le,t),ue.forEach(e),ce.forEach(e),n=0;n<he.length;n++)(s=he[n]).blockedOn===t&&(s.blockedOn=null);for(;0<he.length&&null===(n=he[0]).blockedOn;)ge(n),null===n.blockedOn&&he.shift()}function xe(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ke={animationend:xe("Animation","AnimationEnd"),animationiteration:xe("Animation","AnimationIteration"),animationstart:xe("Animation","AnimationStart"),transitionend:xe("Transition","TransitionEnd")},Se={},Te={};function Ce(t){if(Se[t])return Se[t];if(!ke[t])return t;var e,n=ke[t];for(e in n)if(n.hasOwnProperty(e)&&e in Te)return Se[t]=n[e];return t}h&&(Te=document.createElement("div").style,"AnimationEvent"in window||(delete ke.animationend.animation,delete ke.animationiteration.animation,delete ke.animationstart.animation),"TransitionEvent"in window||delete ke.transitionend.transition);var Ee=Ce("animationend"),Oe=Ce("animationiteration"),Ae=Ce("animationstart"),De=Ce("transitionend"),Me=new Map,Re=new Map,Pe=["abort","abort",Ee,"animationEnd",Oe,"animationIteration",Ae,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",De,"transitionEnd","waiting","waiting"];function Ne(t,e){for(var n=0;n<t.length;n+=2){var s=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Re.set(s,e),Me.set(s,i),u(i,[s])}}(0,r.unstable_now)();var Ie=8;function qe(t){if(0!=(1&t))return Ie=15,1;if(0!=(2&t))return Ie=14,2;if(0!=(4&t))return Ie=13,4;var e=24&t;return 0!==e?(Ie=12,e):0!=(32&t)?(Ie=11,32):0!=(e=192&t)?(Ie=10,e):0!=(256&t)?(Ie=9,256):0!=(e=3584&t)?(Ie=8,e):0!=(4096&t)?(Ie=7,4096):0!=(e=4186112&t)?(Ie=6,e):0!=(e=62914560&t)?(Ie=5,e):67108864&t?(Ie=4,67108864):0!=(134217728&t)?(Ie=3,134217728):0!=(e=805306368&t)?(Ie=2,e):0!=(1073741824&t)?(Ie=1,1073741824):(Ie=8,t)}function Fe(t,e){var n=t.pendingLanes;if(0===n)return Ie=0;var s=0,i=0,r=t.expiredLanes,o=t.suspendedLanes,a=t.pingedLanes;if(0!==r)s=r,i=Ie=15;else if(0!=(r=134217727&n)){var l=r&~o;0!==l?(s=qe(l),i=Ie):0!=(a&=r)&&(s=qe(a),i=Ie)}else 0!=(r=n&~o)?(s=qe(r),i=Ie):0!==a&&(s=qe(a),i=Ie);if(0===s)return 0;if(s=n&((0>(s=31-We(s))?0:1<<s)<<1)-1,0!==e&&e!==s&&0==(e&o)){if(qe(e),i<=Ie)return e;Ie=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=s;0<e;)i=1<<(n=31-We(e)),s|=t[n],e&=~i;return s}function Ve(t){return 0!=(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function je(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Le(24&~e))?je(10,e):t;case 10:return 0===(t=Le(192&~e))?je(8,e):t;case 8:return 0===(t=Le(3584&~e))&&0===(t=Le(4186112&~e))&&(t=512),t;case 2:return 0===(e=Le(805306368&~e))&&(e=268435456),e}throw Error(o(358,t))}function Le(t){return t&-t}function ze(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Be(t,e,n){t.pendingLanes|=e;var s=e-1;t.suspendedLanes&=s,t.pingedLanes&=s,(t=t.eventTimes)[e=31-We(e)]=n}var We=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(Ue(t)/$e|0)|0},Ue=Math.log,$e=Math.LN2,Qe=r.unstable_UserBlockingPriority,Ge=r.unstable_runWithPriority,He=!0;function Ye(t,e,n,s){qt||Nt();var i=Ze,r=qt;qt=!0;try{Pt(i,t,e,n,s)}finally{(qt=r)||Vt()}}function Xe(t,e,n,s){Ge(Qe,Ze.bind(null,t,e,n,s))}function Ze(t,e,n,s){var i;if(He)if((i=0==(4&e))&&0<re.length&&-1<de.indexOf(t))t=pe(null,t,e,n,s),re.push(t);else{var r=Ke(t,e,n,s);if(null===r)i&&fe(t,s);else{if(i){if(-1<de.indexOf(t))return t=pe(r,t,e,n,s),void re.push(t);if(function(t,e,n,s,i){switch(e){case"focusin":return oe=me(oe,t,e,n,s,i),!0;case"dragenter":return ae=me(ae,t,e,n,s,i),!0;case"mouseover":return le=me(le,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return ue.set(r,me(ue.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,ce.set(r,me(ce.get(r)||null,t,e,n,s,i)),!0}return!1}(r,t,e,n,s))return;fe(t,s)}Ms(t,e,s,null,n)}}}function Ke(t,e,n,s){var i=Tt(s);if(null!==(i=Ks(i))){var r=Yt(i);if(null===r)i=null;else{var o=r.tag;if(13===o){if(null!==(i=Xt(r)))return i;i=null}else if(3===o){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Ms(t,e,s,i,n),null}var Je=null,tn=null,en=null;function nn(){if(en)return en;var t,e,n=tn,s=n.length,i="value"in Je?Je.value:Je.textContent,r=i.length;for(t=0;t<s&&n[t]===i[t];t++);var o=s-t;for(e=1;e<=o&&n[s-e]===i[r-e];e++);return en=i.slice(t,1<e?1-e:void 0)}function sn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function rn(){return!0}function on(){return!1}function an(t){function e(e,n,s,i,r){for(var o in this._reactName=e,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=r,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:on,this.isPropagationStopped=on,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),e}var ln,un,cn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),pn=i({},hn,{view:0,detail:0}),fn=an(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cn&&(cn&&"mousemove"===t.type?(ln=t.screenX-cn.screenX,un=t.screenY-cn.screenY):un=ln=0,cn=t),ln)},movementY:function(t){return"movementY"in t?t.movementY:un}}),gn=an(mn),_n=an(i({},mn,{dataTransfer:0})),yn=an(i({},pn,{relatedTarget:0})),vn=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=an(i({},hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),wn=an(i({},hn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function Cn(){return Tn}var En=an(i({},pn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=sn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?kn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(t){return"keypress"===t.type?sn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?sn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),On=an(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Dn=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=an(i({},mn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Rn=[9,13,27,32],Pn=h&&"CompositionEvent"in window,Nn=null;h&&"documentMode"in document&&(Nn=document.documentMode);var In=h&&"TextEvent"in window&&!Nn,qn=h&&(!Pn||Nn&&8<Nn&&11>=Nn),Fn=String.fromCharCode(32),Vn=!1;function jn(t,e){switch(t){case"keyup":return-1!==Rn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var zn=!1,Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Bn[t.type]:"textarea"===e}function Un(t,e,n,s){Dt(s),0<(e=Ps(e,"onChange")).length&&(n=new dn("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var $n=null,Qn=null;function Gn(t){Ts(t,0)}function Hn(t){if(Z(ti(t)))return t}function Yn(t,e){if("change"===t)return e}var Xn=!1;if(h){var Zn;if(h){var Kn="oninput"in document;if(!Kn){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),Kn="function"==typeof Jn.oninput}Zn=Kn}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function ts(){$n&&($n.detachEvent("onpropertychange",es),Qn=$n=null)}function es(t){if("value"===t.propertyName&&Hn(Qn)){var e=[];if(Un(e,Qn,t,Tt(t)),t=Gn,qt)t(e);else{qt=!0;try{Rt(t,e)}finally{qt=!1,Vt()}}}}function ns(t,e,n){"focusin"===t?(ts(),Qn=n,($n=e).attachEvent("onpropertychange",es)):"focusout"===t&&ts()}function ss(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Hn(Qn)}function is(t,e){if("click"===t)return Hn(e)}function rs(t,e){if("input"===t||"change"===t)return Hn(e)}var os="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},as=Object.prototype.hasOwnProperty;function ls(t,e){if(os(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++)if(!as.call(e,n[s])||!os(t[n[s]],e[n[s]]))return!1;return!0}function us(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cs(t,e){var n,s=us(t);for(t=0;s;){if(3===s.nodeType){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=us(s)}}function hs(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hs(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function ds(){for(var t=window,e=K();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=K((t=e.contentWindow).document)}return e}function ps(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var fs=h&&"documentMode"in document&&11>=document.documentMode,ms=null,gs=null,_s=null,ys=!1;function vs(t,e,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ys||null==ms||ms!==K(s)||(s="selectionStart"in(s=ms)&&ps(s)?{start:s.selectionStart,end:s.selectionEnd}:{anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},_s&&ls(_s,s)||(_s=s,0<(s=Ps(gs,"onSelect")).length&&(e=new dn("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=ms)))}Ne("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ne("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ne(Pe,2);for(var bs="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ws=0;ws<bs.length;ws++)Re.set(bs[ws],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ks=new Set("cancel close invalid load scroll toggle".split(" ").concat(xs));function Ss(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,s,i,r,a,l,u){if(Ht.apply(this,arguments),Wt){if(!Wt)throw Error(o(198));var c=Ut;Wt=!1,Ut=null,$t||($t=!0,Qt=c)}}(s,e,void 0,t),t.currentTarget=null}function Ts(t,e){e=0!=(4&e);for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;t:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break t;Ss(i,a,u),r=l}else for(o=0;o<s.length;o++){if(l=(a=s[o]).instance,u=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break t;Ss(i,a,u),r=l}}}if($t)throw t=Qt,$t=!1,Qt=null,t}function Cs(t,e){var n=ni(e),s=t+"__bubble";n.has(s)||(Ds(e,t,2,!1),n.add(s))}var Es="_reactListening"+Math.random().toString(36).slice(2);function Os(t){t[Es]||(t[Es]=!0,a.forEach((function(e){ks.has(e)||As(e,!1,t,null),As(e,!0,t,null)})))}function As(t,e,n,s){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,r=n;if("selectionchange"===t&&9!==n.nodeType&&(r=n.ownerDocument),null!==s&&!e&&ks.has(t)){if("scroll"!==t)return;i|=2,r=s}var o=ni(r),a=t+"__"+(e?"capture":"bubble");o.has(a)||(e&&(i|=4),Ds(r,t,i,e),o.add(a))}function Ds(t,e,n,s){var i=Re.get(e);switch(void 0===i?2:i){case 0:i=Ye;break;case 1:i=Xe;break;default:i=Ze}n=i.bind(null,e,n,t),i=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),s?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ms(t,e,n,s,i){var r=s;if(0==(1&e)&&0==(2&e)&&null!==s)t:for(;;){if(null===s)return;var o=s.tag;if(3===o||4===o){var a=s.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=s.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=Ks(a)))return;if(5===(l=o.tag)||6===l){s=r=o;continue t}a=a.parentNode}}s=s.return}!function(t,e,n){if(Ft)return t();Ft=!0;try{It(t,e,n)}finally{Ft=!1,Vt()}}((function(){var s=r,i=Tt(n),o=[];t:{var a=Me.get(t);if(void 0!==a){var l=dn,u=t;switch(t){case"keypress":if(0===sn(n))break t;case"keydown":case"keyup":l=En;break;case"focusin":u="focus",l=yn;break;case"focusout":u="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=_n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ee:case Oe:case Ae:l=vn;break;case De:l=Dn;break;case"scroll":l=fn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=On}var c=0!=(4&e),h=!c&&"scroll"===t,d=c?null!==a?a+"Capture":null:a;c=[];for(var p,f=s;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&null!=(m=jt(f,d))&&c.push(Rs(f,m,p))),h)break;f=f.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0==(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||0!=(16&e)||!(u=n.relatedTarget||n.fromElement)||!Ks(u)&&!u[Xs])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=s,null!==(u=(u=n.relatedTarget||n.toElement)?Ks(u):null)&&(u!==(h=Yt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=s),l!==u)){if(c=gn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=On,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:ti(l),p=null==u?a:ti(u),(a=new c(m,f+"leave",l,n,i)).target=h,a.relatedTarget=p,m=null,Ks(i)===s&&((c=new c(d,f+"enter",u,n,i)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(d=u,f=0,p=c=l;p;p=Ns(p))f++;for(p=0,m=d;m;m=Ns(m))p++;for(;0<f-p;)c=Ns(c),f--;for(;0<p-f;)d=Ns(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break t;c=Ns(c),d=Ns(d)}c=null}else c=null;null!==l&&Is(o,a,l,c,!1),null!==u&&null!==h&&Is(o,h,u,c,!0)}if("select"===(l=(a=s?ti(s):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Wn(a))if(Xn)g=rs;else{g=ss;var _=ns}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=is);switch(g&&(g=g(t,s))?Un(o,g,n,i):(_&&_(t,a,s),"focusout"===t&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&it(a,"number",a.value)),_=s?ti(s):window,t){case"focusin":(Wn(_)||"true"===_.contentEditable)&&(ms=_,gs=s,_s=null);break;case"focusout":_s=gs=ms=null;break;case"mousedown":ys=!0;break;case"contextmenu":case"mouseup":case"dragend":ys=!1,vs(o,n,i);break;case"selectionchange":if(fs)break;case"keydown":case"keyup":vs(o,n,i)}var y;if(Pn)t:{switch(t){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else zn?jn(t,n)&&(v="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(v="onCompositionStart");v&&(qn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==v?"onCompositionEnd"===v&&zn&&(y=nn()):(tn="value"in(Je=i)?Je.value:Je.textContent,zn=!0)),0<(_=Ps(s,v)).length&&(v=new wn(v,t,null,n,i),o.push({event:v,listeners:_}),(y||null!==(y=Ln(n)))&&(v.data=y))),(y=In?function(t,e){switch(t){case"compositionend":return Ln(e);case"keypress":return 32!==e.which?null:(Vn=!0,Fn);case"textInput":return(t=e.data)===Fn&&Vn?null:t;default:return null}}(t,n):function(t,e){if(zn)return"compositionend"===t||!Pn&&jn(t,e)?(t=nn(),en=tn=Je=null,zn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qn&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))&&0<(s=Ps(s,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:s}),i.data=y)}Ts(o,e)}))}function Rs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ps(t,e){for(var n=e+"Capture",s=[];null!==t;){var i=t,r=i.stateNode;5===i.tag&&null!==r&&(i=r,null!=(r=jt(t,n))&&s.unshift(Rs(t,r,i)),null!=(r=jt(t,e))&&s.push(Rs(t,r,i))),t=t.return}return s}function Ns(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Is(t,e,n,s,i){for(var r=e._reactName,o=[];null!==n&&n!==s;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===s)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=jt(n,r))&&o.unshift(Rs(n,l,a)):i||null!=(l=jt(n,r))&&o.push(Rs(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}function qs(){}var Fs=null,Vs=null;function js(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Ls(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var zs="function"==typeof setTimeout?setTimeout:void 0,Bs="function"==typeof clearTimeout?clearTimeout:void 0;function Ws(t){(1===t.nodeType||9===t.nodeType&&null!=(t=t.body))&&(t.textContent="")}function Us(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function $s(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Qs=0,Gs=Math.random().toString(36).slice(2),Hs="__reactFiber$"+Gs,Ys="__reactProps$"+Gs,Xs="__reactContainer$"+Gs,Zs="__reactEvents$"+Gs;function Ks(t){var e=t[Hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xs]||n[Hs]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=$s(t);null!==t;){if(n=t[Hs])return n;t=$s(t)}return e}n=(t=n).parentNode}return null}function Js(t){return!(t=t[Hs]||t[Xs])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ti(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function ei(t){return t[Ys]||null}function ni(t){var e=t[Zs];return void 0===e&&(e=t[Zs]=new Set),e}var si=[],ii=-1;function ri(t){return{current:t}}function oi(t){0>ii||(t.current=si[ii],si[ii]=null,ii--)}function ai(t,e){ii++,si[ii]=t.current,t.current=e}var li={},ui=ri(li),ci=ri(!1),hi=li;function di(t,e){var n=t.type.contextTypes;if(!n)return li;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i,r={};for(i in n)r[i]=e[i];return s&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function pi(t){return null!=t.childContextTypes}function fi(){oi(ci),oi(ui)}function mi(t,e,n){if(ui.current!==li)throw Error(o(168));ai(ui,e),ai(ci,n)}function gi(t,e,n){var s=t.stateNode;if(t=e.childContextTypes,"function"!=typeof s.getChildContext)return n;for(var r in s=s.getChildContext())if(!(r in t))throw Error(o(108,G(e)||"Unknown",r));return i({},n,s)}function _i(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,hi=ui.current,ai(ui,t),ai(ci,ci.current),!0}function yi(t,e,n){var s=t.stateNode;if(!s)throw Error(o(169));n?(t=gi(t,e,hi),s.__reactInternalMemoizedMergedChildContext=t,oi(ci),oi(ui),ai(ui,t)):oi(ci),ai(ci,n)}var vi=null,bi=null,wi=r.unstable_runWithPriority,xi=r.unstable_scheduleCallback,ki=r.unstable_cancelCallback,Si=r.unstable_shouldYield,Ti=r.unstable_requestPaint,Ci=r.unstable_now,Ei=r.unstable_getCurrentPriorityLevel,Oi=r.unstable_ImmediatePriority,Ai=r.unstable_UserBlockingPriority,Di=r.unstable_NormalPriority,Mi=r.unstable_LowPriority,Ri=r.unstable_IdlePriority,Pi={},Ni=void 0!==Ti?Ti:function(){},Ii=null,qi=null,Fi=!1,Vi=Ci(),ji=1e4>Vi?Ci:function(){return Ci()-Vi};function Li(){switch(Ei()){case Oi:return 99;case Ai:return 98;case Di:return 97;case Mi:return 96;case Ri:return 95;default:throw Error(o(332))}}function zi(t){switch(t){case 99:return Oi;case 98:return Ai;case 97:return Di;case 96:return Mi;case 95:return Ri;default:throw Error(o(332))}}function Bi(t,e){return t=zi(t),wi(t,e)}function Wi(t,e,n){return t=zi(t),xi(t,e,n)}function Ui(){if(null!==qi){var t=qi;qi=null,ki(t)}$i()}function $i(){if(!Fi&&null!==Ii){Fi=!0;var t=0;try{var e=Ii;Bi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Ii=null}catch(e){throw null!==Ii&&(Ii=Ii.slice(t+1)),xi(Oi,Ui),e}finally{Fi=!1}}}var Qi=w.ReactCurrentBatchConfig;function Gi(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Hi=ri(null),Yi=null,Xi=null,Zi=null;function Ki(){Zi=Xi=Yi=null}function Ji(t){var e=Hi.current;oi(Hi),t.type._context._currentValue=e}function tr(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function er(t,e){Yi=t,Zi=Xi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(Po=!0),t.firstContext=null)}function nr(t,e){if(Zi!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(Zi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Xi){if(null===Yi)throw Error(o(308));Xi=e,Yi.dependencies={lanes:0,firstContext:e,responders:null}}else Xi=Xi.next=e;return t._currentValue}var sr=!1;function ir(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function rr(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ar(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function lr(t,e){var n=t.updateQueue,s=t.alternate;if(null!==s&&n===(s=s.updateQueue)){var i=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?i=r=o:r=r.next=o,n=n.next}while(null!==n);null===r?i=r=e:r=r.next=e}else i=r=e;return n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ur(t,e,n,s){var r=t.updateQueue;sr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?o=c:a.next=c,a=u;var h=t.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=u)}}if(null!==o){for(d=r.baseState,a=0,h=c=u=null;;){l=o.lane;var p=o.eventTime;if((s&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var f=t,m=o;switch(l=e,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,l);break t}d=f;break t;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(l="function"==typeof(f=m.payload)?f.call(p,d,l):f))break t;d=i({},d,l);break t;case 2:sr=!0}}null!==o.callback&&(t.flags|=32,null===(l=r.effects)?r.effects=[o]:l.push(o))}else p={eventTime:p,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=p,u=d):h=h.next=p,a|=l;if(null===(o=o.next)){if(null===(l=r.shared.pending))break;o=l.next,l.next=null,r.lastBaseUpdate=l,r.shared.pending=null}}null===h&&(u=d),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=h,Ia|=a,t.lanes=a,t.memoizedState=d}}function cr(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(null!==i){if(s.callback=null,s=n,"function"!=typeof i)throw Error(o(191,i));i.call(s)}}}var hr=(new s.Component).refs;function dr(t,e,n,s){n=null==(n=n(s,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var pr={isMounted:function(t){return!!(t=t._reactInternals)&&Yt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=ol(),i=al(t),r=or(s,i);r.payload=e,null!=n&&(r.callback=n),ar(t,r),ll(t,i,s)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=ol(),i=al(t),r=or(s,i);r.tag=1,r.payload=e,null!=n&&(r.callback=n),ar(t,r),ll(t,i,s)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ol(),s=al(t),i=or(n,s);i.tag=2,null!=e&&(i.callback=e),ar(t,i),ll(t,s,n)}};function fr(t,e,n,s,i,r,o){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(s,r,o):!(e.prototype&&e.prototype.isPureReactComponent&&ls(n,s)&&ls(i,r))}function mr(t,e,n){var s=!1,i=li,r=e.contextType;return"object"==typeof r&&null!==r?r=nr(r):(i=pi(e)?hi:ui.current,r=(s=null!=(s=e.contextTypes))?di(t,i):li),e=new e(n,r),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=pr,t.stateNode=e,e._reactInternals=t,s&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=r),e}function gr(t,e,n,s){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,s),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&pr.enqueueReplaceState(e,e.state,null)}function _r(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=hr,ir(t);var r=e.contextType;"object"==typeof r&&null!==r?i.context=nr(r):(r=pi(e)?hi:ui.current,i.context=di(t,r)),ur(t,n,i,s),i.state=t.memoizedState,"function"==typeof(r=e.getDerivedStateFromProps)&&(dr(t,e,r,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&pr.enqueueReplaceState(i,i.state,null),ur(t,n,i,s),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4)}var yr=Array.isArray;function vr(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var s=n.stateNode}if(!s)throw Error(o(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=s.refs;e===hr&&(e=s.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!=typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function br(t,e){if("textarea"!==t.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function wr(t){function e(e,n){if(t){var s=e.lastEffect;null!==s?(s.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,s){if(!t)return null;for(;null!==s;)e(n,s),s=s.sibling;return null}function s(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Ll(t,e)).index=0,t.sibling=null,t}function r(e,n,s){return e.index=s,t?null!==(s=e.alternate)?(s=s.index)<n?(e.flags=2,n):s:(e.flags=2,n):n}function a(e){return t&&null===e.alternate&&(e.flags=2),e}function l(t,e,n,s){return null===e||6!==e.tag?((e=Ul(n,t.mode,s)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,s){return null!==e&&e.elementType===n.type?((s=i(e,n.props)).ref=vr(t,e,n),s.return=t,s):((s=zl(n.type,n.key,n.props,null,t.mode,s)).ref=vr(t,e,n),s.return=t,s)}function c(t,e,n,s){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=$l(n,t.mode,s)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,s,r){return null===e||7!==e.tag?((e=Bl(n,t.mode,s,r)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=Ul(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case x:return(n=zl(e.type,e.key,e.props,null,t.mode,n)).ref=vr(t,null,e),n.return=t,n;case k:return(e=$l(e,t.mode,n)).return=t,e}if(yr(e)||B(e))return(e=Bl(e,t.mode,n,null)).return=t,e;br(t,e)}return null}function p(t,e,n,s){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(t,e,""+n,s);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===S?h(t,e,n.props.children,s,i):u(t,e,n,s):null;case k:return n.key===i?c(t,e,n,s):null}if(yr(n)||B(n))return null!==i?null:h(t,e,n,s,null);br(t,n)}return null}function f(t,e,n,s,i){if("string"==typeof s||"number"==typeof s)return l(e,t=t.get(n)||null,""+s,i);if("object"==typeof s&&null!==s){switch(s.$$typeof){case x:return t=t.get(null===s.key?n:s.key)||null,s.type===S?h(e,t,s.props.children,i,s.key):u(e,t,s,i);case k:return c(e,t=t.get(null===s.key?n:s.key)||null,s,i)}if(yr(s)||B(s))return h(e,t=t.get(n)||null,s,i,null);br(e,s)}return null}function m(i,o,a,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var _=p(i,h,a[m],l);if(null===_){null===h&&(h=g);break}t&&h&&null===_.alternate&&e(i,h),o=r(_,o,m),null===c?u=_:c.sibling=_,c=_,h=g}if(m===a.length)return n(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=r(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=s(i,h);m<a.length;m++)null!==(g=f(h,i,m,a[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=r(g,o,m),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),u}function g(i,a,l,u){var c=B(l);if("function"!=typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,_=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(_=m,m=null):_=m.sibling;var v=p(i,m,y.value,u);if(null===v){null===m&&(m=_);break}t&&m&&null===v.alternate&&e(i,m),a=r(v,a,g),null===h?c=v:h.sibling=v,h=v,m=_}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,u))&&(a=r(y,a,g),null===h?c=y:h.sibling=y,h=y);return c}for(m=s(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,u))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=r(y,a,g),null===h?c=y:h.sibling=y,h=y);return t&&m.forEach((function(t){return e(i,t)})),c}return function(t,s,r,l){var u="object"==typeof r&&null!==r&&r.type===S&&null===r.key;u&&(r=r.props.children);var c="object"==typeof r&&null!==r;if(c)switch(r.$$typeof){case x:t:{for(c=r.key,u=s;null!==u;){if(u.key===c){switch(u.tag){case 7:if(r.type===S){n(t,u.sibling),(s=i(u,r.props.children)).return=t,t=s;break t}break;default:if(u.elementType===r.type){n(t,u.sibling),(s=i(u,r.props)).ref=vr(t,u,r),s.return=t,t=s;break t}}n(t,u);break}e(t,u),u=u.sibling}r.type===S?((s=Bl(r.props.children,t.mode,l,r.key)).return=t,t=s):((l=zl(r.type,r.key,r.props,null,t.mode,l)).ref=vr(t,s,r),l.return=t,t=l)}return a(t);case k:t:{for(u=r.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===r.containerInfo&&s.stateNode.implementation===r.implementation){n(t,s.sibling),(s=i(s,r.children||[])).return=t,t=s;break t}n(t,s);break}e(t,s),s=s.sibling}(s=$l(r,t.mode,l)).return=t,t=s}return a(t)}if("string"==typeof r||"number"==typeof r)return r=""+r,null!==s&&6===s.tag?(n(t,s.sibling),(s=i(s,r)).return=t,t=s):(n(t,s),(s=Ul(r,t.mode,l)).return=t,t=s),a(t);if(yr(r))return m(t,s,r,l);if(B(r))return g(t,s,r,l);if(c&&br(t,r),void 0===r&&!u)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(t.type)||"Component"))}return n(t,s)}}var xr=wr(!0),kr=wr(!1),Sr={},Tr=ri(Sr),Cr=ri(Sr),Er=ri(Sr);function Or(t){if(t===Sr)throw Error(o(174));return t}function Ar(t,e){switch(ai(Er,e),ai(Cr,t),ai(Tr,Sr),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pt(null,"");break;default:e=pt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}oi(Tr),ai(Tr,e)}function Dr(){oi(Tr),oi(Cr),oi(Er)}function Mr(t){Or(Er.current);var e=Or(Tr.current),n=pt(e,t.type);e!==n&&(ai(Cr,t),ai(Tr,n))}function Rr(t){Cr.current===t&&(oi(Tr),oi(Cr))}var Pr=ri(0);function Nr(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ir=null,qr=null,Fr=!1;function Vr(t,e){var n=Vl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function jr(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Lr(t){if(Fr){var e=qr;if(e){var n=e;if(!jr(t,e)){if(!(e=Us(n.nextSibling))||!jr(t,e))return t.flags=-1025&t.flags|2,Fr=!1,void(Ir=t);Vr(Ir,n)}Ir=t,qr=Us(e.firstChild)}else t.flags=-1025&t.flags|2,Fr=!1,Ir=t}}function zr(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Ir=t}function Br(t){if(t!==Ir)return!1;if(!Fr)return zr(t),Fr=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Ls(e,t.memoizedProps))for(e=qr;e;)Vr(t,e),e=Us(e.nextSibling);if(zr(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){qr=Us(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}qr=null}}else qr=Ir?Us(t.stateNode.nextSibling):null;return!0}function Wr(){qr=Ir=null,Fr=!1}var Ur=[];function $r(){for(var t=0;t<Ur.length;t++)Ur[t]._workInProgressVersionPrimary=null;Ur.length=0}var Qr=w.ReactCurrentDispatcher,Gr=w.ReactCurrentBatchConfig,Hr=0,Yr=null,Xr=null,Zr=null,Kr=!1,Jr=!1;function to(){throw Error(o(321))}function eo(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!os(t[n],e[n]))return!1;return!0}function no(t,e,n,s,i,r){if(Hr=r,Yr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qr.current=null===t||null===t.memoizedState?Ao:Do,t=n(s,i),Jr){r=0;do{if(Jr=!1,!(25>r))throw Error(o(301));r+=1,Zr=Xr=null,e.updateQueue=null,Qr.current=Mo,t=n(s,i)}while(Jr)}if(Qr.current=Oo,e=null!==Xr&&null!==Xr.next,Hr=0,Zr=Xr=Yr=null,Kr=!1,e)throw Error(o(300));return t}function so(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Zr?Yr.memoizedState=Zr=t:Zr=Zr.next=t,Zr}function io(){if(null===Xr){var t=Yr.alternate;t=null!==t?t.memoizedState:null}else t=Xr.next;var e=null===Zr?Yr.memoizedState:Zr.next;if(null!==e)Zr=e,Xr=t;else{if(null===t)throw Error(o(310));t={memoizedState:(Xr=t).memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},null===Zr?Yr.memoizedState=Zr=t:Zr=Zr.next=t}return Zr}function ro(t,e){return"function"==typeof e?e(t):e}function oo(t){var e=io(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var s=Xr,i=s.baseQueue,r=n.pending;if(null!==r){if(null!==i){var a=i.next;i.next=r.next,r.next=a}s.baseQueue=i=r,n.pending=null}if(null!==i){i=i.next,s=s.baseState;var l=a=r=null,u=i;do{var c=u.lane;if((Hr&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),s=u.eagerReducer===t?u.eagerState:t(s,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,r=s):l=l.next=h,Yr.lanes|=c,Ia|=c}u=u.next}while(null!==u&&u!==i);null===l?r=s:l.next=a,os(s,e.memoizedState)||(Po=!0),e.memoizedState=s,e.baseState=r,e.baseQueue=l,n.lastRenderedState=s}return[e.memoizedState,n.dispatch]}function ao(t){var e=io(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{r=t(r,a.action),a=a.next}while(a!==i);os(r,e.memoizedState)||(Po=!0),e.memoizedState=r,null===e.baseQueue&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function lo(t,e,n){var s=e._getVersion;s=s(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===s:(t=t.mutableReadLanes,(t=(Hr&t)===t)&&(e._workInProgressVersionPrimary=s,Ur.push(e))),t)return n(e._source);throw Ur.push(e),Error(o(350))}function uo(t,e,n,s){var i=Ea;if(null===i)throw Error(o(349));var r=e._getVersion,a=r(e._source),l=Qr.current,u=l.useState((function(){return lo(i,e,n)})),c=u[1],h=u[0];u=Zr;var d=t.memoizedState,p=d.refs,f=p.getSnapshot,m=d.source;d=d.subscribe;var g=Yr;return t.memoizedState={refs:p,source:e,subscribe:s},l.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var t=r(e._source);if(!os(a,t)){t=n(e._source),os(h,t)||(c(t),t=al(g),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var s=i.entanglements,o=t;0<o;){var l=31-We(o),u=1<<l;s[l]|=t,o&=~u}}}),[n,e,s]),l.useEffect((function(){return s(e._source,(function(){var t=p.getSnapshot,n=p.setSnapshot;try{n(t(e._source));var s=al(g);i.mutableReadLanes|=s&i.pendingLanes}catch(t){n((function(){throw t}))}}))}),[e,s]),os(f,n)&&os(m,e)&&os(d,s)||((t={pending:null,dispatch:null,lastRenderedReducer:ro,lastRenderedState:h}).dispatch=c=Eo.bind(null,Yr,t),u.queue=t,u.baseQueue=null,h=lo(i,e,n),u.memoizedState=u.baseState=h),h}function co(t,e,n){return uo(io(),t,e,n)}function ho(t){var e=so();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:ro,lastRenderedState:t}).dispatch=Eo.bind(null,Yr,t),[e.memoizedState,t]}function po(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},null===(e=Yr.updateQueue)?(e={lastEffect:null},Yr.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function fo(t){return t={current:t},so().memoizedState=t}function mo(){return io().memoizedState}function go(t,e,n,s){var i=so();Yr.flags|=t,i.memoizedState=po(1|e,n,void 0,void 0===s?null:s)}function _o(t,e,n,s){var i=io();s=void 0===s?null:s;var r=void 0;if(null!==Xr){var o=Xr.memoizedState;if(r=o.destroy,null!==s&&eo(s,o.deps))return void po(e,n,r,s)}Yr.flags|=t,i.memoizedState=po(1|e,n,r,s)}function yo(t,e){return go(516,4,t,e)}function vo(t,e){return _o(516,4,t,e)}function bo(t,e){return _o(4,2,t,e)}function wo(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function xo(t,e,n){return n=null!=n?n.concat([t]):null,_o(4,2,wo.bind(null,e,t),n)}function ko(){}function So(t,e){var n=io();e=void 0===e?null:e;var s=n.memoizedState;return null!==s&&null!==e&&eo(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function To(t,e){var n=io();e=void 0===e?null:e;var s=n.memoizedState;return null!==s&&null!==e&&eo(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Co(t,e){var n=Li();Bi(98>n?98:n,(function(){t(!0)})),Bi(97<n?97:n,(function(){var n=Gr.transition;Gr.transition=1;try{t(!1),e()}finally{Gr.transition=n}}))}function Eo(t,e,n){var s=ol(),i=al(t),r={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(null===o?r.next=r:(r.next=o.next,o.next=r),e.pending=r,o=t.alternate,t===Yr||null!==o&&o===Yr)Jr=Kr=!0;else{if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,l=o(a,n);if(r.eagerReducer=o,r.eagerState=l,os(l,a))return}catch(t){}ll(t,i,s)}}var Oo={readContext:nr,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useOpaqueIdentifier:to,unstable_isNewReconciler:!1},Ao={readContext:nr,useCallback:function(t,e){return so().memoizedState=[t,void 0===e?null:e],t},useContext:nr,useEffect:yo,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,go(4,2,wo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return go(4,2,t,e)},useMemo:function(t,e){var n=so();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=so();return e=void 0!==n?n(e):e,s.memoizedState=s.baseState=e,t=(t=s.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Eo.bind(null,Yr,t),[s.memoizedState,t]},useRef:fo,useState:ho,useDebugValue:ko,useDeferredValue:function(t){var e=ho(t),n=e[0],s=e[1];return yo((function(){var e=Gr.transition;Gr.transition=1;try{s(t)}finally{Gr.transition=e}}),[t]),n},useTransition:function(){var t=ho(!1),e=t[0];return fo(t=Co.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var s=so();return s.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},uo(s,t,e,n)},useOpaqueIdentifier:function(){if(Fr){var t=!1,e=function(t){return{$$typeof:I,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Qs++).toString(36))),Error(o(355))})),n=ho(e)[1];return 0==(2&Yr.mode)&&(Yr.flags|=516,po(5,(function(){n("r:"+(Qs++).toString(36))}),void 0,null)),e}return ho(e="r:"+(Qs++).toString(36)),e},unstable_isNewReconciler:!1},Do={readContext:nr,useCallback:So,useContext:nr,useEffect:vo,useImperativeHandle:xo,useLayoutEffect:bo,useMemo:To,useReducer:oo,useRef:mo,useState:function(){return oo(ro)},useDebugValue:ko,useDeferredValue:function(t){var e=oo(ro),n=e[0],s=e[1];return vo((function(){var e=Gr.transition;Gr.transition=1;try{s(t)}finally{Gr.transition=e}}),[t]),n},useTransition:function(){var t=oo(ro)[0];return[mo().current,t]},useMutableSource:co,useOpaqueIdentifier:function(){return oo(ro)[0]},unstable_isNewReconciler:!1},Mo={readContext:nr,useCallback:So,useContext:nr,useEffect:vo,useImperativeHandle:xo,useLayoutEffect:bo,useMemo:To,useReducer:ao,useRef:mo,useState:function(){return ao(ro)},useDebugValue:ko,useDeferredValue:function(t){var e=ao(ro),n=e[0],s=e[1];return vo((function(){var e=Gr.transition;Gr.transition=1;try{s(t)}finally{Gr.transition=e}}),[t]),n},useTransition:function(){var t=ao(ro)[0];return[mo().current,t]},useMutableSource:co,useOpaqueIdentifier:function(){return ao(ro)[0]},unstable_isNewReconciler:!1},Ro=w.ReactCurrentOwner,Po=!1;function No(t,e,n,s){e.child=null===t?kr(e,null,n,s):xr(e,t.child,n,s)}function Io(t,e,n,s,i){n=n.render;var r=e.ref;return er(e,i),s=no(t,e,n,s,r,i),null===t||Po?(e.flags|=1,No(t,e,s,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Jo(t,e,i))}function qo(t,e,n,s,i,r){if(null===t){var o=n.type;return"function"!=typeof o||jl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=zl(n.type,null,s,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Fo(t,e,o,s,i,r))}return o=t.child,0==(i&r)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:ls)(i,s)&&t.ref===e.ref)?Jo(t,e,r):(e.flags|=1,(t=Ll(o,s)).ref=e.ref,t.return=e,e.child=t)}function Fo(t,e,n,s,i,r){if(null!==t&&ls(t.memoizedProps,s)&&t.ref===e.ref){if(Po=!1,0==(r&i))return e.lanes=t.lanes,Jo(t,e,r);0!=(16384&t.flags)&&(Po=!0)}return Lo(t,e,n,s,r)}function Vo(t,e,n){var s=e.pendingProps,i=s.children,r=null!==t?t.memoizedState:null;if("hidden"===s.mode||"unstable-defer-without-hiding"===s.mode)if(0==(4&e.mode))e.memoizedState={baseLanes:0},gl(0,n);else{if(0==(1073741824&n))return t=null!==r?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},gl(0,t),null;e.memoizedState={baseLanes:0},gl(0,null!==r?r.baseLanes:n)}else null!==r?(s=r.baseLanes|n,e.memoizedState=null):s=n,gl(0,s);return No(t,e,i,n),e.child}function jo(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function Lo(t,e,n,s,i){var r=pi(n)?hi:ui.current;return r=di(e,r),er(e,i),n=no(t,e,n,s,r,i),null===t||Po?(e.flags|=1,No(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Jo(t,e,i))}function zo(t,e,n,s,i){if(pi(n)){var r=!0;_i(e)}else r=!1;if(er(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),mr(e,n,s),_r(e,n,s,i),s=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?nr(u):di(e,u=pi(n)?hi:ui.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==s||l!==u)&&gr(e,o,s,u),sr=!1;var d=e.memoizedState;o.state=d,ur(e,s,o,i),l=e.memoizedState,a!==s||d!==l||ci.current||sr?("function"==typeof c&&(dr(e,n,c,s),l=e.memoizedState),(a=sr||fr(e,n,a,s,d,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(e.flags|=4)):("function"==typeof o.componentDidMount&&(e.flags|=4),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):("function"==typeof o.componentDidMount&&(e.flags|=4),s=!1)}else{o=e.stateNode,rr(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Gi(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?nr(l):di(e,l=pi(n)?hi:ui.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&gr(e,o,s,l),sr=!1,d=e.memoizedState,o.state=d,ur(e,s,o,i);var f=e.memoizedState;a!==h||d!==f||ci.current||sr?("function"==typeof p&&(dr(e,n,p,s),f=e.memoizedState),(u=sr||fr(e,n,u,s,d,f,l))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(s,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(s,f,l)),"function"==typeof o.componentDidUpdate&&(e.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!=typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),e.memoizedProps=s,e.memoizedState=f),o.props=s,o.state=f,o.context=l,s=u):("function"!=typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),s=!1)}return Bo(t,e,n,s,r,i)}function Bo(t,e,n,s,i,r){jo(t,e);var o=0!=(64&e.flags);if(!s&&!o)return i&&yi(e,n,!1),Jo(t,e,r);s=e.stateNode,Ro.current=e;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:s.render();return e.flags|=1,null!==t&&o?(e.child=xr(e,t.child,null,r),e.child=xr(e,null,a,r)):No(t,e,a,r),e.memoizedState=s.state,i&&yi(e,n,!0),e.child}function Wo(t){var e=t.stateNode;e.pendingContext?mi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&mi(0,e.context,!1),Ar(t,e.containerInfo)}var Uo,$o,Qo,Go={dehydrated:null,retryLane:0};function Ho(t,e,n){var s,i=e.pendingProps,r=Pr.current,o=!1;return(s=0!=(64&e.flags))||(s=(null===t||null!==t.memoizedState)&&0!=(2&r)),s?(o=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(r|=1),ai(Pr,1&r),null===t?(void 0!==i.fallback&&Lr(e),t=i.children,r=i.fallback,o?(t=Yo(e,t,r,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Go,t):"number"==typeof i.unstable_expectedLoadTime?(t=Yo(e,t,r,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Go,e.lanes=33554432,t):((n=Wl({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,o?(i=function(t,e,n,s,i){var r=e.mode,o=t.child;t=o.sibling;var a={mode:"hidden",children:n};return 0==(2&r)&&e.child!==o?((n=e.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Ll(o,a),null!==t?s=Ll(t,s):(s=Bl(s,r,i,null)).flags|=2,s.return=e,n.return=e,n.sibling=s,e.child=n,s}(t,e,i.children,i.fallback,n),o=e.child,r=t.child.memoizedState,o.memoizedState=null===r?{baseLanes:n}:{baseLanes:r.baseLanes|n},o.childLanes=t.childLanes&~n,e.memoizedState=Go,i):(n=function(t,e,n,s){var i=t.child;return t=i.sibling,n=Ll(i,{mode:"visible",children:n}),0==(2&e.mode)&&(n.lanes=s),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}(t,e,i.children,n),e.memoizedState=null,n))}function Yo(t,e,n,s){var i=t.mode,r=t.child;return e={mode:"hidden",children:e},0==(2&i)&&null!==r?(r.childLanes=0,r.pendingProps=e):r=Wl(e,i,0,null),n=Bl(n,i,s,null),r.return=t,n.return=t,r.sibling=n,t.child=r,n}function Xo(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),tr(t.return,e)}function Zo(t,e,n,s,i,r){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,lastEffect:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=i,o.lastEffect=r)}function Ko(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(No(t,e,s.children,n),0!=(2&(s=Pr.current)))s=1&s|2,e.flags|=64;else{if(null!==t&&0!=(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Xo(t,n);else if(19===t.tag)Xo(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ai(Pr,s),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Nr(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zo(e,!1,i,n,r,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Nr(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zo(e,!0,n,null,r,e.lastEffect);break;case"together":Zo(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Jo(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ia|=e.lanes,0!=(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Ll(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Ll(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function ta(t,e){if(!Fr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?e||null===t.tail?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ea(t,e,n){var s=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pi(e.type)&&fi(),null;case 3:return Dr(),oi(ci),oi(ui),$r(),(s=e.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==t&&null!==t.child||(Br(e)?e.flags|=4:s.hydrate||(e.flags|=256)),null;case 5:Rr(e);var r=Or(Er.current);if(n=e.type,null!==t&&null!=e.stateNode)$o(t,e,n,s),t.ref!==e.ref&&(e.flags|=128);else{if(!s){if(null===e.stateNode)throw Error(o(166));return null}if(t=Or(Tr.current),Br(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[Hs]=e,s[Ys]=a,n){case"dialog":Cs("cancel",s),Cs("close",s);break;case"iframe":case"object":case"embed":Cs("load",s);break;case"video":case"audio":for(t=0;t<xs.length;t++)Cs(xs[t],s);break;case"source":Cs("error",s);break;case"img":case"image":case"link":Cs("error",s),Cs("load",s);break;case"details":Cs("toggle",s);break;case"input":tt(s,a),Cs("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Cs("invalid",s);break;case"textarea":lt(s,a),Cs("invalid",s)}for(var u in kt(n,a),t=null,a)a.hasOwnProperty(u)&&(r=a[u],"children"===u?"string"==typeof r?s.textContent!==r&&(t=["children",r]):"number"==typeof r&&s.textContent!==""+r&&(t=["children",""+r]):l.hasOwnProperty(u)&&null!=r&&"onScroll"===u&&Cs("scroll",s));switch(n){case"input":X(s),st(s,a,!0);break;case"textarea":X(s),ct(s);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(s.onclick=qs)}s=t,e.updateQueue=s,null!==s&&(e.flags|=4)}else{switch(u=9===r.nodeType?r:r.ownerDocument,t===ht&&(t=dt(n)),t===ht?"script"===n?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof s.is?t=u.createElement(n,{is:s.is}):(t=u.createElement(n),"select"===n&&(u=t,s.multiple?u.multiple=!0:s.size&&(u.size=s.size))):t=u.createElementNS(t,n),t[Hs]=e,t[Ys]=s,Uo(t,e),e.stateNode=t,u=St(n,s),n){case"dialog":Cs("cancel",t),Cs("close",t),r=s;break;case"iframe":case"object":case"embed":Cs("load",t),r=s;break;case"video":case"audio":for(r=0;r<xs.length;r++)Cs(xs[r],t);r=s;break;case"source":Cs("error",t),r=s;break;case"img":case"image":case"link":Cs("error",t),Cs("load",t),r=s;break;case"details":Cs("toggle",t),r=s;break;case"input":tt(t,s),r=J(t,s),Cs("invalid",t);break;case"option":r=rt(t,s);break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=i({},s,{value:void 0}),Cs("invalid",t);break;case"textarea":lt(t,s),r=at(t,s),Cs("invalid",t);break;default:r=s}kt(n,r);var c=r;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?wt(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&gt(t,h):"children"===a?"string"==typeof h?("textarea"!==n||""!==h)&&_t(t,h):"number"==typeof h&&_t(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Cs("scroll",t):null!=h&&b(t,a,h,u))}switch(n){case"input":X(t),st(t,s,!1);break;case"textarea":X(t),ct(t);break;case"option":null!=s.value&&t.setAttribute("value",""+H(s.value));break;case"select":t.multiple=!!s.multiple,null!=(a=s.value)?ot(t,!!s.multiple,a,!1):null!=s.defaultValue&&ot(t,!!s.multiple,s.defaultValue,!0);break;default:"function"==typeof r.onClick&&(t.onclick=qs)}js(n,s)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Qo(0,e,t.memoizedProps,s);else{if("string"!=typeof s&&null===e.stateNode)throw Error(o(166));n=Or(Er.current),Or(Tr.current),Br(e)?(s=e.stateNode,n=e.memoizedProps,s[Hs]=e,s.nodeValue!==n&&(e.flags|=4)):((s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[Hs]=e,e.stateNode=s)}return null;case 13:return oi(Pr),s=e.memoizedState,0!=(64&e.flags)?(e.lanes=n,e):(s=null!==s,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Br(e):n=null!==t.memoizedState,s&&!n&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&Pr.current)?0===Ra&&(Ra=3):(0!==Ra&&3!==Ra||(Ra=4),null===Ea||0==(134217727&Ia)&&0==(134217727&qa)||dl(Ea,Aa))),(s||n)&&(e.flags|=4),null);case 4:return Dr(),null===t&&Os(e.stateNode.containerInfo),null;case 10:return Ji(e),null;case 17:return pi(e.type)&&fi(),null;case 19:if(oi(Pr),null===(s=e.memoizedState))return null;if(a=0!=(64&e.flags),null===(u=s.rendering))if(a)ta(s,!1);else{if(0!==Ra||null!==t&&0!=(64&t.flags))for(t=e.child;null!==t;){if(null!==(u=Nr(t))){for(e.flags|=64,ta(s,!1),null!==(a=u.updateQueue)&&(e.updateQueue=a,e.flags|=4),null===s.lastEffect&&(e.firstEffect=null),e.lastEffect=s.lastEffect,s=n,n=e.child;null!==n;)t=s,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,t=u.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ai(Pr,1&Pr.current|2),e.child}t=t.sibling}null!==s.tail&&ji()>La&&(e.flags|=64,a=!0,ta(s,!1),e.lanes=33554432)}else{if(!a)if(null!==(t=Nr(u))){if(e.flags|=64,a=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),ta(s,!0),null===s.tail&&"hidden"===s.tailMode&&!u.alternate&&!Fr)return null!==(e=e.lastEffect=s.lastEffect)&&(e.nextEffect=null),null}else 2*ji()-s.renderingStartTime>La&&1073741824!==n&&(e.flags|=64,a=!0,ta(s,!1),e.lanes=33554432);s.isBackwards?(u.sibling=e.child,e.child=u):(null!==(n=s.last)?n.sibling=u:e.child=u,s.last=u)}return null!==s.tail?(n=s.tail,s.rendering=n,s.tail=n.sibling,s.lastEffect=e.lastEffect,s.renderingStartTime=ji(),n.sibling=null,e=Pr.current,ai(Pr,a?1&e|2:1&e),n):null;case 23:case 24:return _l(),null!==t&&null!==t.memoizedState!=(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==s.mode&&(e.flags|=4),null}throw Error(o(156,e.tag))}function na(t){switch(t.tag){case 1:pi(t.type)&&fi();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Dr(),oi(ci),oi(ui),$r(),0!=(64&(e=t.flags)))throw Error(o(285));return t.flags=-4097&e|64,t;case 5:return Rr(t),null;case 13:return oi(Pr),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return oi(Pr),null;case 4:return Dr(),null;case 10:return Ji(t),null;case 23:case 24:return _l(),null;default:return null}}function sa(t,e){try{var n="",s=e;do{n+=Q(s),s=s.return}while(s);var i=n}catch(t){i="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:i}}function ia(t,e){try{console.error(e.value)}catch(t){setTimeout((function(){throw t}))}}Uo=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Or(Tr.current);var o,a=null;switch(n){case"input":r=J(t,r),s=J(t,s),a=[];break;case"option":r=rt(t,r),s=rt(t,s),a=[];break;case"select":r=i({},r,{value:void 0}),s=i({},s,{value:void 0}),a=[];break;case"textarea":r=at(t,r),s=at(t,s),a=[];break;default:"function"!=typeof r.onClick&&"function"==typeof s.onClick&&(t.onclick=qs)}for(h in kt(n,s),n=null,r)if(!s.hasOwnProperty(h)&&r.hasOwnProperty(h)&&null!=r[h])if("style"===h){var u=r[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in s){var c=s[h];if(u=null!=r?r[h]:void 0,s.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Cs("scroll",t),a||u===c||(a=[])):"object"==typeof c&&null!==c&&c.$$typeof===I?c.toString():(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}},Qo=function(t,e,n,s){n!==s&&(e.flags|=4)};var ra="function"==typeof WeakMap?WeakMap:Map;function oa(t,e,n){(n=or(-1,n)).tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Ua||(Ua=!0,$a=s),ia(0,e)},n}function aa(t,e,n){(n=or(-1,n)).tag=3;var s=t.type.getDerivedStateFromError;if("function"==typeof s){var i=e.value;n.payload=function(){return ia(0,e),s(i)}}var r=t.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(n.callback=function(){"function"!=typeof s&&(null===Qa?Qa=new Set([this]):Qa.add(this),ia(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var la="function"==typeof WeakSet?WeakSet:Set;function ua(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Nl(t,e)}else e.current=null}function ca(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,s=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Gi(e.type,n),s),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Ws(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function ha(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3==(3&t.tag)){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;s=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Ml(n,t),Dl(n,t)),t=s}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(s=n.elementType===n.type?e.memoizedProps:Gi(n.type,e.memoizedProps),t.componentDidUpdate(s,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&cr(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}cr(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&js(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&we(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function da(t,e){for(var n=t;;){if(5===n.tag){var s=n.stateNode;if(e)"function"==typeof(s=s.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{s=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,s.style.display=bt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function pa(t,e){if(bi&&"function"==typeof bi.onCommitFiberUnmount)try{bi.onCommitFiberUnmount(vi,e)}catch(t){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var s=n,i=s.destroy;if(s=s.tag,void 0!==i)if(0!=(4&s))Ml(e,n);else{s=e;try{i()}catch(t){Nl(s,t)}}n=n.next}while(n!==t)}break;case 1:if(ua(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Nl(e,t)}break;case 5:ua(e);break;case 4:va(t,e)}}function fa(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function ma(t){return 5===t.tag||3===t.tag||4===t.tag}function ga(t){t:{for(var e=t.return;null!==e;){if(ma(e))break t;e=e.return}throw Error(o(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var s=!1;break;case 3:case 4:e=e.containerInfo,s=!0;break;default:throw Error(o(161))}16&n.flags&&(_t(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}s?_a(t,n,e):ya(t,n,e)}function _a(t,e,n){var s=t.tag,i=5===s||6===s;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=qs));else if(4!==s&&null!==(t=t.child))for(_a(t,e,n),t=t.sibling;null!==t;)_a(t,e,n),t=t.sibling}function ya(t,e,n){var s=t.tag,i=5===s||6===s;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==s&&null!==(t=t.child))for(ya(t,e,n),t=t.sibling;null!==t;)ya(t,e,n),t=t.sibling}function va(t,e){for(var n,s,i=e,r=!1;;){if(!r){r=i.return;t:for(;;){if(null===r)throw Error(o(160));switch(n=r.stateNode,r.tag){case 5:s=!1;break t;case 3:case 4:n=n.containerInfo,s=!0;break t}r=r.return}r=!0}if(5===i.tag||6===i.tag){t:for(var a=t,l=i,u=l;;)if(pa(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break t;for(;null===u.sibling;){if(null===u.return||u.return===l)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}s?(a=n,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,s=!0,i.child.return=i,i=i.child;continue}}else if(pa(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(r=!1)}i.sibling.return=i.return,i=i.sibling}}function ba(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{3==(3&s.tag)&&(t=s.destroy,s.destroy=void 0,void 0!==t&&t()),s=s.next}while(s!==n)}return;case 1:return;case 5:if(null!=(n=e.stateNode)){s=e.memoizedProps;var i=null!==t?t.memoizedProps:s;t=e.type;var r=e.updateQueue;if(e.updateQueue=null,null!==r){for(n[Ys]=s,"input"===t&&"radio"===s.type&&null!=s.name&&et(n,s),St(t,i),e=St(t,s),i=0;i<r.length;i+=2){var a=r[i],l=r[i+1];"style"===a?wt(n,l):"dangerouslySetInnerHTML"===a?gt(n,l):"children"===a?_t(n,l):b(n,a,l,e)}switch(t){case"input":nt(n,s);break;case"textarea":ut(n,s);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!s.multiple,null!=(r=s.value)?ot(n,!!s.multiple,r,!1):t!==!!s.multiple&&(null!=s.defaultValue?ot(n,!!s.multiple,s.defaultValue,!0):ot(n,!!s.multiple,s.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(o(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,we(n.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(ja=ji(),da(e.child,!0)),void wa(e);case 19:return void wa(e);case 17:return;case 23:case 24:return void da(e,null!==e.memoizedState)}throw Error(o(163))}function wa(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new la),e.forEach((function(e){var s=ql.bind(null,t,e);n.has(e)||(n.add(e),e.then(s,s))}))}}function xa(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&null!==(e=e.memoizedState)&&null===e.dehydrated}var ka=Math.ceil,Sa=w.ReactCurrentDispatcher,Ta=w.ReactCurrentOwner,Ca=0,Ea=null,Oa=null,Aa=0,Da=0,Ma=ri(0),Ra=0,Pa=null,Na=0,Ia=0,qa=0,Fa=0,Va=null,ja=0,La=1/0;function za(){La=ji()+500}var Ba,Wa=null,Ua=!1,$a=null,Qa=null,Ga=!1,Ha=null,Ya=90,Xa=[],Za=[],Ka=null,Ja=0,tl=null,el=-1,nl=0,sl=0,il=null,rl=!1;function ol(){return 0!=(48&Ca)?ji():-1!==el?el:el=ji()}function al(t){if(0==(2&(t=t.mode)))return 1;if(0==(4&t))return 99===Li()?1:2;if(0===nl&&(nl=Na),0!==Qi.transition){0!==sl&&(sl=null!==Va?Va.pendingLanes:0),t=nl;var e=4186112&~sl;return 0==(e&=-e)&&0==(e=(t=4186112&~t)&-t)&&(e=8192),e}return t=Li(),t=je(0!=(4&Ca)&&98===t?12:t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),nl)}function ll(t,e,n){if(50<Ja)throw Ja=0,tl=null,Error(o(185));if(null===(t=ul(t,e)))return null;Be(t,e,n),t===Ea&&(qa|=e,4===Ra&&dl(t,Aa));var s=Li();1===e?0!=(8&Ca)&&0==(48&Ca)?pl(t):(cl(t,n),0===Ca&&(za(),Ui())):(0==(4&Ca)||98!==s&&99!==s||(null===Ka?Ka=new Set([t]):Ka.add(t)),cl(t,n)),Va=t}function ul(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function cl(t,e){for(var n=t.callbackNode,s=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-We(a),u=1<<l,c=r[l];if(-1===c){if(0==(u&s)||0!=(u&i)){c=e,qe(u);var h=Ie;r[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=e&&(t.expiredLanes|=u);a&=~u}if(s=Fe(t,t===Ea?Aa:0),e=Ie,0===s)null!==n&&(n!==Pi&&ki(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Pi&&ki(n)}15===e?(n=pl.bind(null,t),null===Ii?(Ii=[n],qi=xi(Oi,$i)):Ii.push(n),n=Pi):n=14===e?Wi(99,pl.bind(null,t)):Wi(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,t))}}(e),hl.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function hl(t){if(el=-1,sl=nl=0,0!=(48&Ca))throw Error(o(327));var e=t.callbackNode;if(Al()&&t.callbackNode!==e)return null;var n=Fe(t,t===Ea?Aa:0);if(0===n)return null;var s=n,i=Ca;Ca|=16;var r=bl();for(Ea===t&&Aa===s||(za(),yl(t,s));;)try{kl();break}catch(e){vl(t,e)}if(Ki(),Sa.current=r,Ca=i,null!==Oa?s=0:(Ea=null,Aa=0,s=Ra),0!=(Na&qa))yl(t,0);else if(0!==s){if(2===s&&(Ca|=64,t.hydrate&&(t.hydrate=!1,Ws(t.containerInfo)),0!==(n=Ve(t))&&(s=wl(t,n))),1===s)throw e=Pa,yl(t,0),dl(t,n),cl(t,ji()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,s){case 0:case 1:throw Error(o(345));case 2:Cl(t);break;case 3:if(dl(t,n),(62914560&n)===n&&10<(s=ja+500-ji())){if(0!==Fe(t,0))break;if(((i=t.suspendedLanes)&n)!==n){ol(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zs(Cl.bind(null,t),s);break}Cl(t);break;case 4:if(dl(t,n),(4186112&n)===n)break;for(s=t.eventTimes,i=-1;0<n;){var a=31-We(n);r=1<<a,(a=s[a])>i&&(i=a),n&=~r}if(n=i,10<(n=(120>(n=ji()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ka(n/1960))-n)){t.timeoutHandle=zs(Cl.bind(null,t),n);break}Cl(t);break;case 5:Cl(t);break;default:throw Error(o(329))}}return cl(t,ji()),t.callbackNode===e?hl.bind(null,t):null}function dl(t,e){for(e&=~Fa,e&=~qa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-We(e),s=1<<n;t[n]=-1,e&=~s}}function pl(t){if(0!=(48&Ca))throw Error(o(327));if(Al(),t===Ea&&0!=(t.expiredLanes&Aa)){var e=Aa,n=wl(t,e);0!=(Na&qa)&&(n=wl(t,e=Fe(t,e)))}else n=wl(t,e=Fe(t,0));if(0!==t.tag&&2===n&&(Ca|=64,t.hydrate&&(t.hydrate=!1,Ws(t.containerInfo)),0!==(e=Ve(t))&&(n=wl(t,e))),1===n)throw n=Pa,yl(t,0),dl(t,e),cl(t,ji()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cl(t),cl(t,ji()),null}function fl(t,e){var n=Ca;Ca|=1;try{return t(e)}finally{0===(Ca=n)&&(za(),Ui())}}function ml(t,e){var n=Ca;Ca&=-2,Ca|=8;try{return t(e)}finally{0===(Ca=n)&&(za(),Ui())}}function gl(t,e){ai(Ma,Da),Da|=e,Na|=e}function _l(){Da=Ma.current,oi(Ma)}function yl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Bs(n)),null!==Oa)for(n=Oa.return;null!==n;){var s=n;switch(s.tag){case 1:null!=(s=s.type.childContextTypes)&&fi();break;case 3:Dr(),oi(ci),oi(ui),$r();break;case 5:Rr(s);break;case 4:Dr();break;case 13:case 19:oi(Pr);break;case 10:Ji(s);break;case 23:case 24:_l()}n=n.return}Ea=t,Oa=Ll(t.current,null),Aa=Da=Na=e,Ra=0,Pa=null,Fa=qa=Ia=0}function vl(t,e){for(;;){var n=Oa;try{if(Ki(),Qr.current=Oo,Kr){for(var s=Yr.memoizedState;null!==s;){var i=s.queue;null!==i&&(i.pending=null),s=s.next}Kr=!1}if(Hr=0,Zr=Xr=Yr=null,Jr=!1,Ta.current=null,null===n||null===n.return){Ra=1,Pa=e,Oa=null;break}t:{var r=t,o=n.return,a=n,l=e;if(e=Aa,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!=(1&Pr.current),d=o;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var g=d.updateQueue;if(null===g){var _=new Set;_.add(u),d.updateQueue=_}else g.add(u);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=or(-1,1);y.tag=2,ar(a,y)}a.lanes|=1;break t}l=void 0,a=e;var v=r.pingCache;if(null===v?(v=r.pingCache=new ra,l=new Set,v.set(u,l)):void 0===(l=v.get(u))&&(l=new Set,v.set(u,l)),!l.has(a)){l.add(a);var b=Il.bind(null,r,u,a);u.then(b,b)}d.flags|=4096,d.lanes=e;break t}d=d.return}while(null!==d);l=Error((G(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ra&&(Ra=2),l=sa(l,a),d=o;do{switch(d.tag){case 3:r=l,d.flags|=4096,e&=-e,d.lanes|=e,lr(d,oa(0,r,e));break t;case 1:r=l;var w=d.type,x=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===Qa||!Qa.has(x)))){d.flags|=4096,e&=-e,d.lanes|=e,lr(d,aa(d,r,e));break t}}d=d.return}while(null!==d)}Tl(n)}catch(t){e=t,Oa===n&&null!==n&&(Oa=n=n.return);continue}break}}function bl(){var t=Sa.current;return Sa.current=Oo,null===t?Oo:t}function wl(t,e){var n=Ca;Ca|=16;var s=bl();for(Ea===t&&Aa===e||yl(t,e);;)try{xl();break}catch(e){vl(t,e)}if(Ki(),Ca=n,Sa.current=s,null!==Oa)throw Error(o(261));return Ea=null,Aa=0,Ra}function xl(){for(;null!==Oa;)Sl(Oa)}function kl(){for(;null!==Oa&&!Si();)Sl(Oa)}function Sl(t){var e=Ba(t.alternate,t,Da);t.memoizedProps=t.pendingProps,null===e?Tl(t):Oa=e,Ta.current=null}function Tl(t){var e=t;do{var n=e.alternate;if(t=e.return,0==(2048&e.flags)){if(null!==(n=ea(n,e,Da)))return void(Oa=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Da)||0==(4&n.mode)){for(var s=0,i=n.child;null!==i;)s|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=s}null!==t&&0==(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=na(e)))return n.flags&=2047,void(Oa=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Oa=e);Oa=e=t}while(null!==e);0===Ra&&(Ra=5)}function Cl(t){var e=Li();return Bi(99,El.bind(null,t,e)),null}function El(t,e){do{Al()}while(null!==Ha);if(0!=(48&Ca))throw Error(o(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null;var s=n.lanes|n.childLanes,i=s,r=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var a=t.eventTimes,l=t.expirationTimes;0<r;){var u=31-We(r),c=1<<u;i[u]=0,a[u]=-1,l[u]=-1,r&=~c}if(null!==Ka&&0==(24&s)&&Ka.has(t)&&Ka.delete(t),t===Ea&&(Oa=Ea=null,Aa=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,s=n.firstEffect):s=n:s=n.firstEffect,null!==s){if(i=Ca,Ca|=32,Ta.current=null,Fs=He,ps(a=ds())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else t:if(l=(l=a.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,r=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(t){l=null;break t}var h=0,d=-1,p=-1,f=0,m=0,g=a,_=null;e:for(;;){for(var y;g!==l||0!==r&&3!==g.nodeType||(d=h+r),g!==u||0!==c&&3!==g.nodeType||(p=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(y=g.firstChild);)_=g,g=y;for(;;){if(g===a)break e;if(_===l&&++f===r&&(d=h),_===u&&++m===c&&(p=h),null!==(y=g.nextSibling))break;_=(g=_).parentNode}g=y}l=-1===d||-1===p?null:{start:d,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;Vs={focusedElem:a,selectionRange:l},He=!1,il=null,rl=!1,Wa=s;do{try{Ol()}catch(t){if(null===Wa)throw Error(o(330));Nl(Wa,t),Wa=Wa.nextEffect}}while(null!==Wa);il=null,Wa=s;do{try{for(a=t;null!==Wa;){var v=Wa.flags;if(16&v&&_t(Wa.stateNode,""),128&v){var b=Wa.alternate;if(null!==b){var w=b.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&v){case 2:ga(Wa),Wa.flags&=-3;break;case 6:ga(Wa),Wa.flags&=-3,ba(Wa.alternate,Wa);break;case 1024:Wa.flags&=-1025;break;case 1028:Wa.flags&=-1025,ba(Wa.alternate,Wa);break;case 4:ba(Wa.alternate,Wa);break;case 8:va(a,l=Wa);var x=l.alternate;fa(l),null!==x&&fa(x)}Wa=Wa.nextEffect}}catch(t){if(null===Wa)throw Error(o(330));Nl(Wa,t),Wa=Wa.nextEffect}}while(null!==Wa);if(w=Vs,b=ds(),v=w.focusedElem,a=w.selectionRange,b!==v&&v&&v.ownerDocument&&hs(v.ownerDocument.documentElement,v)){null!==a&&ps(v)&&(b=a.start,void 0===(w=a.end)&&(w=b),"selectionStart"in v?(v.selectionStart=b,v.selectionEnd=Math.min(w,v.value.length)):(w=(b=v.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),l=v.textContent.length,x=Math.min(a.start,l),a=void 0===a.end?x:Math.min(a.end,l),!w.extend&&x>a&&(l=a,a=x,x=l),l=cs(v,x),r=cs(v,a),l&&r&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==r.node||w.focusOffset!==r.offset)&&((b=b.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),x>a?(w.addRange(b),w.extend(r.node,r.offset)):(b.setEnd(r.node,r.offset),w.addRange(b))))),b=[];for(w=v;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<b.length;v++)(w=b[v]).element.scrollLeft=w.left,w.element.scrollTop=w.top}He=!!Fs,Vs=Fs=null,t.current=n,Wa=s;do{try{for(v=t;null!==Wa;){var k=Wa.flags;if(36&k&&ha(v,Wa.alternate,Wa),128&k){b=void 0;var S=Wa.ref;if(null!==S){var T=Wa.stateNode;switch(Wa.tag){case 5:b=T;break;default:b=T}"function"==typeof S?S(b):S.current=b}}Wa=Wa.nextEffect}}catch(t){if(null===Wa)throw Error(o(330));Nl(Wa,t),Wa=Wa.nextEffect}}while(null!==Wa);Wa=null,Ni(),Ca=i}else t.current=n;if(Ga)Ga=!1,Ha=t,Ya=e;else for(Wa=s;null!==Wa;)e=Wa.nextEffect,Wa.nextEffect=null,8&Wa.flags&&((k=Wa).sibling=null,k.stateNode=null),Wa=e;if(0===(s=t.pendingLanes)&&(Qa=null),1===s?t===tl?Ja++:(Ja=0,tl=t):Ja=0,n=n.stateNode,bi&&"function"==typeof bi.onCommitFiberRoot)try{bi.onCommitFiberRoot(vi,n,void 0,64==(64&n.current.flags))}catch(t){}if(cl(t,ji()),Ua)throw Ua=!1,t=$a,$a=null,t;return 0!=(8&Ca)||Ui(),null}function Ol(){for(;null!==Wa;){var t=Wa.alternate;rl||null===il||(0!=(8&Wa.flags)?Jt(Wa,il)&&(rl=!0):13===Wa.tag&&xa(t,Wa)&&Jt(Wa,il)&&(rl=!0));var e=Wa.flags;0!=(256&e)&&ca(t,Wa),0==(512&e)||Ga||(Ga=!0,Wi(97,(function(){return Al(),null}))),Wa=Wa.nextEffect}}function Al(){if(90!==Ya){var t=97<Ya?97:Ya;return Ya=90,Bi(t,Rl)}return!1}function Dl(t,e){Xa.push(e,t),Ga||(Ga=!0,Wi(97,(function(){return Al(),null})))}function Ml(t,e){Za.push(e,t),Ga||(Ga=!0,Wi(97,(function(){return Al(),null})))}function Rl(){if(null===Ha)return!1;var t=Ha;if(Ha=null,0!=(48&Ca))throw Error(o(331));var e=Ca;Ca|=32;var n=Za;Za=[];for(var s=0;s<n.length;s+=2){var i=n[s],r=n[s+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(t){if(null===r)throw Error(o(330));Nl(r,t)}}for(n=Xa,Xa=[],s=0;s<n.length;s+=2){i=n[s],r=n[s+1];try{var l=i.create;i.destroy=l()}catch(t){if(null===r)throw Error(o(330));Nl(r,t)}}for(l=t.current.firstEffect;null!==l;)t=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=t;return Ca=e,Ui(),!0}function Pl(t,e,n){ar(t,e=oa(0,e=sa(n,e),1)),e=ol(),null!==(t=ul(t,1))&&(Be(t,1,e),cl(t,e))}function Nl(t,e){if(3===t.tag)Pl(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Pl(n,t,e);break}if(1===n.tag){var s=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof s.componentDidCatch&&(null===Qa||!Qa.has(s))){var i=aa(n,t=sa(e,t),1);if(ar(n,i),i=ol(),null!==(n=ul(n,1)))Be(n,1,i),cl(n,i);else if("function"==typeof s.componentDidCatch&&(null===Qa||!Qa.has(s)))try{s.componentDidCatch(e,t)}catch(t){}break}}n=n.return}}function Il(t,e,n){var s=t.pingCache;null!==s&&s.delete(e),e=ol(),t.pingedLanes|=t.suspendedLanes&n,Ea===t&&(Aa&n)===n&&(4===Ra||3===Ra&&(62914560&Aa)===Aa&&500>ji()-ja?yl(t,0):Fa|=n),cl(t,e)}function ql(t,e){var n=t.stateNode;null!==n&&n.delete(e),0==(e=0)&&(0==(2&(e=t.mode))?e=1:0==(4&e)?e=99===Li()?1:2:(0===nl&&(nl=Na),0===(e=Le(62914560&~nl))&&(e=4194304))),n=ol(),null!==(t=ul(t,e))&&(Be(t,e,n),cl(t,n))}function Fl(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Vl(t,e,n,s){return new Fl(t,e,n,s)}function jl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Ll(t,e){var n=t.alternate;return null===n?((n=Vl(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zl(t,e,n,s,i,r){var a=2;if(s=t,"function"==typeof t)jl(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case S:return Bl(n.children,i,r,e);case q:a=8,i|=16;break;case T:a=8,i|=1;break;case C:return(t=Vl(12,n,e,8|i)).elementType=C,t.type=C,t.lanes=r,t;case D:return(t=Vl(13,n,e,i)).type=D,t.elementType=D,t.lanes=r,t;case M:return(t=Vl(19,n,e,i)).elementType=M,t.lanes=r,t;case F:return Wl(n,i,r,e);case V:return(t=Vl(24,n,e,i)).elementType=V,t.lanes=r,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case E:a=10;break t;case O:a=9;break t;case A:a=11;break t;case R:a=14;break t;case P:a=16,s=null;break t;case N:a=22;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Vl(a,n,e,i)).elementType=t,e.type=s,e.lanes=r,e}function Bl(t,e,n,s){return(t=Vl(7,t,s,e)).lanes=n,t}function Wl(t,e,n,s){return(t=Vl(23,t,s,e)).elementType=F,t.lanes=n,t}function Ul(t,e,n){return(t=Vl(6,t,null,e)).lanes=n,t}function $l(t,e,n){return(e=Vl(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ql(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=ze(0),this.expirationTimes=ze(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ze(0),this.mutableSourceEagerHydrationData=null}function Gl(t,e,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==s?null:""+s,children:t,containerInfo:e,implementation:n}}function Hl(t,e,n,s){var i=e.current,r=ol(),a=al(i);t:if(n){e:{if(Yt(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(pi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var u=n.type;if(pi(u)){n=gi(n,u,l);break t}}n=l}else n=li;return null===e.context?e.context=n:e.pendingContext=n,(e=or(r,a)).payload={element:t},null!==(s=void 0===s?null:s)&&(e.callback=s),ar(i,e),ll(i,a,r),a}function Yl(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Xl(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Zl(t,e){Xl(t,e),(t=t.alternate)&&Xl(t,e)}function Kl(t,e,n){var s=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ql(t,e,null!=n&&!0===n.hydrate),e=Vl(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,ir(e),t[Xs]=n.current,Os(8===t.nodeType?t.parentNode:t),s)for(t=0;t<s.length;t++){var i=(e=s[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function Jl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function tu(t,e,n,s,i){var r=n._reactRootContainer;if(r){var o=r._internalRoot;if("function"==typeof i){var a=i;i=function(){var t=Yl(o);a.call(t)}}Hl(e,o,t,i)}else{if(r=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Kl(t,0,e?{hydrate:!0}:void 0)}(n,s),o=r._internalRoot,"function"==typeof i){var l=i;i=function(){var t=Yl(o);l.call(t)}}ml((function(){Hl(e,o,t,i)}))}return Yl(o)}function eu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(e))throw Error(o(200));return Gl(t,e,null,n)}Ba=function(t,e,n){var s=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||ci.current)Po=!0;else{if(0==(n&s)){switch(Po=!1,e.tag){case 3:Wo(e),Wr();break;case 5:Mr(e);break;case 1:pi(e.type)&&_i(e);break;case 4:Ar(e,e.stateNode.containerInfo);break;case 10:s=e.memoizedProps.value;var i=e.type._context;ai(Hi,i._currentValue),i._currentValue=s;break;case 13:if(null!==e.memoizedState)return 0!=(n&e.child.childLanes)?Ho(t,e,n):(ai(Pr,1&Pr.current),null!==(e=Jo(t,e,n))?e.sibling:null);ai(Pr,1&Pr.current);break;case 19:if(s=0!=(n&e.childLanes),0!=(64&t.flags)){if(s)return Ko(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ai(Pr,Pr.current),s)break;return null;case 23:case 24:return e.lanes=0,Vo(t,e,n)}return Jo(t,e,n)}Po=0!=(16384&t.flags)}else Po=!1;switch(e.lanes=0,e.tag){case 2:if(s=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=di(e,ui.current),er(e,n),i=no(null,e,s,t,i,n),e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,pi(s)){var r=!0;_i(e)}else r=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ir(e);var a=s.getDerivedStateFromProps;"function"==typeof a&&dr(e,s,a,t),i.updater=pr,e.stateNode=i,i._reactInternals=e,_r(e,s,t,n),e=Bo(null,e,s,!0,r,n)}else e.tag=0,No(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"==typeof t)return jl(t)?1:0;if(null!=t){if((t=t.$$typeof)===A)return 11;if(t===R)return 14}return 2}(i),t=Gi(i,t),r){case 0:e=Lo(null,e,i,t,n);break t;case 1:e=zo(null,e,i,t,n);break t;case 11:e=Io(null,e,i,t,n);break t;case 14:e=qo(null,e,i,Gi(i.type,t),s,n);break t}throw Error(o(306,i,""))}return e;case 0:return s=e.type,i=e.pendingProps,Lo(t,e,s,i=e.elementType===s?i:Gi(s,i),n);case 1:return s=e.type,i=e.pendingProps,zo(t,e,s,i=e.elementType===s?i:Gi(s,i),n);case 3:if(Wo(e),s=e.updateQueue,null===t||null===s)throw Error(o(282));if(s=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,rr(t,e),ur(e,s,null,n),(s=e.memoizedState.element)===i)Wr(),e=Jo(t,e,n);else{if((r=(i=e.stateNode).hydrate)&&(qr=Us(e.stateNode.containerInfo.firstChild),Ir=e,r=Fr=!0),r){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(r=t[i])._workInProgressVersionPrimary=t[i+1],Ur.push(r);for(n=kr(e,null,s,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else No(t,e,s,n),Wr();e=e.child}return e;case 5:return Mr(e),null===t&&Lr(e),s=e.type,i=e.pendingProps,r=null!==t?t.memoizedProps:null,a=i.children,Ls(s,i)?a=null:null!==r&&Ls(s,r)&&(e.flags|=16),jo(t,e),No(t,e,a,n),e.child;case 6:return null===t&&Lr(e),null;case 13:return Ho(t,e,n);case 4:return Ar(e,e.stateNode.containerInfo),s=e.pendingProps,null===t?e.child=xr(e,null,s,n):No(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,Io(t,e,s,i=e.elementType===s?i:Gi(s,i),n);case 7:return No(t,e,e.pendingProps,n),e.child;case 8:case 12:return No(t,e,e.pendingProps.children,n),e.child;case 10:t:{s=e.type._context,i=e.pendingProps,a=e.memoizedProps,r=i.value;var l=e.type._context;if(ai(Hi,l._currentValue),l._currentValue=r,null!==a)if(l=a.value,0==(r=os(l,r)?0:0|("function"==typeof s._calculateChangedBits?s._calculateChangedBits(l,r):1073741823))){if(a.children===i.children&&!ci.current){e=Jo(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===s&&0!=(c.observedBits&r)){1===l.tag&&((c=or(-1,n&-n)).tag=2,ar(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),tr(l.return,n),u.lanes|=n;break}c=c.next}}else a=10===l.tag&&l.type===e.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===e){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}No(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=(r=e.pendingProps).children,er(e,n),s=s(i=nr(i,r.unstable_observedBits)),e.flags|=1,No(t,e,s,n),e.child;case 14:return r=Gi(i=e.type,e.pendingProps),qo(t,e,i,r=Gi(i.type,r),s,n);case 15:return Fo(t,e,e.type,e.pendingProps,s,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Gi(s,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,pi(s)?(t=!0,_i(e)):t=!1,er(e,n),mr(e,s,i),_r(e,s,i,n),Bo(null,e,s,!0,t,n);case 19:return Ko(t,e,n);case 23:case 24:return Vo(t,e,n)}throw Error(o(156,e.tag))},Kl.prototype.render=function(t){Hl(t,this._internalRoot,null,null)},Kl.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Hl(null,t,null,(function(){e[Xs]=null}))},te=function(t){13===t.tag&&(ll(t,4,ol()),Zl(t,4))},ee=function(t){13===t.tag&&(ll(t,67108864,ol()),Zl(t,67108864))},ne=function(t){if(13===t.tag){var e=ol(),n=al(t);ll(t,n,e),Zl(t,n)}},se=function(t,e){return e()},Ct=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=ei(s);if(!i)throw Error(o(90));Z(s),nt(s,i)}}}break;case"textarea":ut(t,n);break;case"select":null!=(e=n.value)&&ot(t,!!n.multiple,e,!1)}},Rt=fl,Pt=function(t,e,n,s,i){var r=Ca;Ca|=4;try{return Bi(98,t.bind(null,e,n,s,i))}finally{0===(Ca=r)&&(za(),Ui())}},Nt=function(){0==(49&Ca)&&(function(){if(null!==Ka){var t=Ka;Ka=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,cl(t,ji())}))}Ui()}(),Al())},It=function(t,e){var n=Ca;Ca|=2;try{return t(e)}finally{0===(Ca=n)&&(za(),Ui())}};var nu={Events:[Js,ti,ei,Dt,Mt,Al,{current:!1}]},su={findFiberByHostInstance:Ks,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},iu={bundleType:su.bundleType,version:su.version,rendererPackageName:su.rendererPackageName,rendererConfig:su.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Kt(t))?null:t.stateNode},findFiberByHostInstance:su.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{vi=ru.inject(iu),bi=ru}catch(mt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,e.createPortal=eu,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(o(188));throw Error(o(268,Object.keys(t)))}return null===(t=Kt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Ca;if(0!=(48&n))return t(e);Ca|=1;try{if(t)return Bi(99,t.bind(null,e))}finally{Ca=n,Ui()}},e.hydrate=function(t,e,n){if(!Jl(e))throw Error(o(200));return tu(null,t,e,!0,n)},e.render=function(t,e,n){if(!Jl(e))throw Error(o(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jl(t))throw Error(o(40));return!!t._reactRootContainer&&(ml((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[Xs]=null}))})),!0)},e.unstable_batchedUpdates=fl,e.unstable_createPortal=function(t,e){return eu(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Jl(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tu(t,e,n,!1,s)},e.version="17.0.2"},935:(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(448)},921:(t,e)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,s=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,_=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case s:switch(t=t.type){case c:case h:case r:case a:case o:case p:return t;default:switch(t=t&&t.$$typeof){case u:case d:case g:case m:case l:return t;default:return e}}case i:return e}}}function x(t){return w(t)===h}e.AsyncMode=c,e.ConcurrentMode=h,e.ContextConsumer=u,e.ContextProvider=l,e.Element=s,e.ForwardRef=d,e.Fragment=r,e.Lazy=g,e.Memo=m,e.Portal=i,e.Profiler=a,e.StrictMode=o,e.Suspense=p,e.isAsyncMode=function(t){return x(t)||w(t)===c},e.isConcurrentMode=x,e.isContextConsumer=function(t){return w(t)===u},e.isContextProvider=function(t){return w(t)===l},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===s},e.isForwardRef=function(t){return w(t)===d},e.isFragment=function(t){return w(t)===r},e.isLazy=function(t){return w(t)===g},e.isMemo=function(t){return w(t)===m},e.isPortal=function(t){return w(t)===i},e.isProfiler=function(t){return w(t)===a},e.isStrictMode=function(t){return w(t)===o},e.isSuspense=function(t){return w(t)===p},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===r||t===h||t===a||t===o||t===p||t===f||"object"==typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===u||t.$$typeof===d||t.$$typeof===y||t.$$typeof===v||t.$$typeof===b||t.$$typeof===_)},e.typeOf=w},864:(t,e,n)=>{"use strict";t.exports=n(921)},408:(t,e,n)=>{"use strict";var s=n(418),i=60103,r=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var o=60109,a=60110,l=60112;e.Suspense=60113;var u=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),r=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),e.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||f}function _(){}function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(p(85));this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=g.prototype;var v=y.prototype=new _;v.constructor=y,s(v,g.prototype),v.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,n){var s,r={},o=null,a=null;if(null!=e)for(s in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)w.call(e,s)&&!x.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(t&&t.defaultProps)for(s in l=t.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:i,type:t,key:o,ref:a,props:r,_owner:b.current}}function S(t){return"object"==typeof t&&null!==t&&t.$$typeof===i}var T=/\/+/g;function C(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function E(t,e,n,s,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case r:l=!0}}if(l)return o=o(l=t),t=""===s?"."+C(l,0):s,Array.isArray(o)?(n="",null!=t&&(n=t.replace(T,"$&/")+"/"),E(o,e,n,"",(function(t){return t}))):null!=o&&(S(o)&&(o=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+t)),e.push(o)),1;if(l=0,s=""===s?".":s+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=s+C(a=t[u],u);l+=E(a,e,n,c,o)}else if("function"==typeof(c=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t)))for(t=c.call(t),u=0;!(a=t.next()).done;)l+=E(a=a.value,e,n,c=s+C(a,u++),o);else if("object"===a)throw e=""+t,Error(p(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function O(t,e,n){if(null==t)return t;var s=[],i=0;return E(t,s,"","",(function(t){return e.call(n,t,i++)})),s}function A(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var D={current:null};function M(){var t=D.current;if(null===t)throw Error(p(321));return t}var R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:s};e.Children={map:O,forEach:function(t,e,n){O(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return O(t,(function(){e++})),e},toArray:function(t){return O(t,(function(t){return t}))||[]},only:function(t){if(!S(t))throw Error(p(143));return t}},e.Component=g,e.PureComponent=y,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,n){if(null==t)throw Error(p(267,t));var r=s({},t.props),o=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=b.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)w.call(e,c)&&!x.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==u?u[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:i,type:t.type,key:o,ref:a,props:r,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:c,_payload:{_status:-1,_result:t},_init:A}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return M().useCallback(t,e)},e.useContext=function(t,e){return M().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return M().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return M().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return M().useLayoutEffect(t,e)},e.useMemo=function(t,e){return M().useMemo(t,e)},e.useReducer=function(t,e,n){return M().useReducer(t,e,n)},e.useRef=function(t){return M().useRef(t)},e.useState=function(t){return M().useState(t)},e.version="17.0.2"},294:(t,e,n)=>{"use strict";t.exports=n(408)},53:(t,e)=>{"use strict";var n,s,i,r;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,h=function(){if(null!==u)try{var t=e.unstable_now();u(!0,t),u=null}catch(t){throw setTimeout(h,0),t}};n=function(t){null!==u?setTimeout(n,0,t):(u=t,setTimeout(h,0))},s=function(t,e){c=setTimeout(t,e)},i=function(){clearTimeout(c)},e.unstable_shouldYield=function(){return!1},r=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var f=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,_=-1,y=5,v=0;e.unstable_shouldYield=function(){return e.unstable_now()>=v},r=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<t?Math.floor(1e3/t):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==g){var t=e.unstable_now();v=t+y;try{g(!0,t)?w.postMessage(null):(m=!1,g=null)}catch(t){throw w.postMessage(null),t}}else m=!1},n=function(t){g=t,m||(m=!0,w.postMessage(null))},s=function(t,n){_=d((function(){t(e.unstable_now())}),n)},i=function(){p(_),_=-1}}function x(t,e){var n=t.length;t.push(e);t:for(;;){var s=n-1>>>1,i=t[s];if(!(void 0!==i&&0<T(i,e)))break t;t[s]=e,t[n]=i,n=s}}function k(t){return void 0===(t=t[0])?null:t}function S(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var s=0,i=t.length;s<i;){var r=2*(s+1)-1,o=t[r],a=r+1,l=t[a];if(void 0!==o&&0>T(o,n))void 0!==l&&0>T(l,o)?(t[s]=l,t[a]=n,s=a):(t[s]=o,t[r]=n,s=r);else{if(!(void 0!==l&&0>T(l,n)))break t;t[s]=l,t[a]=n,s=a}}}return e}return null}function T(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var C=[],E=[],O=1,A=null,D=3,M=!1,R=!1,P=!1;function N(t){for(var e=k(E);null!==e;){if(null===e.callback)S(E);else{if(!(e.startTime<=t))break;S(E),e.sortIndex=e.expirationTime,x(C,e)}e=k(E)}}function I(t){if(P=!1,N(t),!R)if(null!==k(C))R=!0,n(q);else{var e=k(E);null!==e&&s(I,e.startTime-t)}}function q(t,n){R=!1,P&&(P=!1,i()),M=!0;var r=D;try{for(N(n),A=k(C);null!==A&&(!(A.expirationTime>n)||t&&!e.unstable_shouldYield());){var o=A.callback;if("function"==typeof o){A.callback=null,D=A.priorityLevel;var a=o(A.expirationTime<=n);n=e.unstable_now(),"function"==typeof a?A.callback=a:A===k(C)&&S(C),N(n)}else S(C);A=k(C)}if(null!==A)var l=!0;else{var u=k(E);null!==u&&s(I,u.startTime-n),l=!1}return l}finally{A=null,D=r,M=!1}}var F=r;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){R||M||(R=!0,n(q))},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return k(C)},e.unstable_next=function(t){switch(D){case 1:case 2:case 3:var e=3;break;default:e=D}var n=D;D=e;try{return t()}finally{D=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=D;D=t;try{return e()}finally{D=n}},e.unstable_scheduleCallback=function(t,r,o){var a=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:O++,callback:r,priorityLevel:t,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(t.sortIndex=o,x(E,t),null===k(C)&&t===k(E)&&(P?i():P=!0,s(I,o-a))):(t.sortIndex=l,x(C,t),R||M||(R=!0,n(q))),t},e.unstable_wrapCallback=function(t){var e=D;return function(){var n=D;D=e;try{return t.apply(this,arguments)}finally{D=n}}}},840:(t,e,n)=>{"use strict";t.exports=n(53)},695:t=>{"use strict";var e={};t.exports=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,s=0;s<e.length;s++)if(e[s].identifier===t){n=s;break}return n}function s(t,s){for(var r={},o=[],a=0;a<t.length;a++){var l=t[a],u=s.base?l[0]+s.base:l[0],c=r[u]||0,h="".concat(u," ").concat(c);r[u]=c+1;var d=n(h),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(e[d].references++,e[d].updater(p)):e.push({identifier:h,updater:i(p,s),references:1}),o.push(h)}return o}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var r=s(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=n(r[o]);e[a].references--}for(var l=s(t,i),u=0;u<r.length;u++){var c=n(r[u]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}r=l}}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var s=n.css,i=n.media,r=n.sourceMap;i?t.setAttribute("media",i):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(s,t)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={id:s,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};n.r(t),n.d(t,{assert:()=>Cr,assertContextRunning:()=>Or,assertRange:()=>Er,log:()=>Mr,setLogger:()=>Dr,warn:()=>Rr});var e={};n.r(e);var s={};n.r(s),n.d(s,{AMOscillator:()=>Fa,AMSynth:()=>ml,Abs:()=>Ja,Add:()=>Ua,AmplitudeEnvelope:()=>dl,Analyser:()=>Fu,AudioToGain:()=>Ia,AutoFilter:()=>tu,AutoPanner:()=>nu,AutoWah:()=>iu,BaseContext:()=>_o,BiquadFilter:()=>gl,BitCrusher:()=>ou,Buffer:()=>_c,BufferSource:()=>vc,Buffers:()=>yc,Channel:()=>$u,Chebyshev:()=>lu,Chorus:()=>pu,Clock:()=>oa,Compressor:()=>Zu,Context:()=>yo,Convolver:()=>sc,CrossFade:()=>Zl,DCMeter:()=>zu,Delay:()=>aa,Destination:()=>lc,Distortion:()=>fu,Draw:()=>pc,DuoSynth:()=>bl,EQ3:()=>nc,Emitter:()=>go,Envelope:()=>ll,FFT:()=>Lu,FMOscillator:()=>Va,FMSynth:()=>wl,FatOscillator:()=>La,FeedbackCombFilter:()=>Ml,FeedbackDelay:()=>gu,Filter:()=>_l,Follower:()=>su,Freeverb:()=>wu,Frequency:()=>Bo,FrequencyClass:()=>jo,FrequencyEnvelope:()=>yl,FrequencyShifter:()=>yu,Gain:()=>Ko,GainToAudio:()=>tl,Gate:()=>Ku,GrainPlayer:()=>Ka,GreaterThan:()=>il,GreaterThanZero:()=>sl,IntervalTimeline:()=>ma,JCReverb:()=>Tu,LFO:()=>Ga,Limiter:()=>Ju,Listener:()=>hc,Loop:()=>Vl,LowpassCombFilter:()=>Pl,Master:()=>uc,MembraneSynth:()=>Sl,Merge:()=>cu,MetalSynth:()=>kl,Meter:()=>ju,MidSideCompressor:()=>tc,MidSideMerge:()=>Ru,MidSideSplit:()=>Mu,Midi:()=>ha,MidiClass:()=>ca,Mono:()=>Qu,MonoSynth:()=>vl,MultibandCompressor:()=>ec,MultibandSplit:()=>Gu,Multiply:()=>qa,Negate:()=>el,Noise:()=>Ta,NoiseSynth:()=>Tl,Offline:()=>la,OfflineContext:()=>ko,OmniOscillator:()=>Wa,OnePoleFilter:()=>Rl,Oscillator:()=>Ra,PWMOscillator:()=>za,PanVol:()=>Uu,Panner:()=>eu,Panner3D:()=>Yu,Param:()=>Go,Part:()=>jl,Pattern:()=>Yl,Phaser:()=>Au,PingPongDelay:()=>Eu,PitchShift:()=>Ou,Player:()=>Xa,Players:()=>Za,PluckSynth:()=>Nl,PolySynth:()=>Il,Pow:()=>rl,PulseOscillator:()=>ja,Recorder:()=>Xu,Reverb:()=>Du,Sampler:()=>ql,Scale:()=>$a,ScaleExp:()=>ol,Sequence:()=>Xl,Signal:()=>ea,Solo:()=>Wu,Split:()=>uu,StateTimeline:()=>Qo,StereoWidener:()=>Nu,Subtract:()=>nl,SyncedSignal:()=>al,Synth:()=>pl,Ticks:()=>pa,TicksClass:()=>da,Time:()=>Vo,TimeClass:()=>Fo,Timeline:()=>co,ToneAudioBuffer:()=>xo,ToneAudioBuffers:()=>ua,ToneAudioNode:()=>Ho,ToneBufferSource:()=>Sa,ToneEvent:()=>Fl,ToneOscillatorNode:()=>Ma,Transport:()=>oc,TransportTime:()=>Uo,TransportTimeClass:()=>Wo,Tremolo:()=>Iu,Unit:()=>e,UserMedia:()=>Aa,Vibrato:()=>qu,Volume:()=>_a,WaveShaper:()=>Na,Waveform:()=>Bu,Zero:()=>Qa,connect:()=>Xo,connectSeries:()=>Yo,connectSignal:()=>na,context:()=>mc,dbToGain:()=>Ao,debug:()=>t,defaultArg:()=>eo,disconnect:()=>Zo,ftom:()=>Po,gainToDb:()=>Do,getContext:()=>Co,getDestination:()=>cc,getDraw:()=>fc,getListener:()=>dc,getTransport:()=>ac,immediate:()=>rc,intervalToFrequencyRatio:()=>Mo,isArray:()=>jr,isBoolean:()=>Vr,isDefined:()=>Nr,isFunction:()=>Ir,isNote:()=>zr,isNumber:()=>qr,isObject:()=>Fr,isString:()=>Lr,isUndef:()=>Pr,loaded:()=>gc,mtof:()=>Io,now:()=>ic,optionsFromArguments:()=>to,setContext:()=>Eo,start:()=>Oo,supported:()=>Sr,version:()=>le});var i=n(294),r=n(935),o=(n(697),i.createContext(null)),a=function(t){t()},l=function(){return a},u={notify:function(){}},c=function(){function t(t,e){this.store=t,this.parentSub=e,this.unsubscribe=null,this.listeners=u,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var e=t.prototype;return e.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},e.notifyNestedSubs=function(){this.listeners.notify()},e.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},e.isSubscribed=function(){return Boolean(this.unsubscribe)},e.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var t=l(),e=null,n=null;return{clear:function(){e=null,n=null},notify:function(){t((function(){for(var t=e;t;)t.callback(),t=t.next}))},get:function(){for(var t=[],n=e;n;)t.push(n),n=n.next;return t},subscribe:function(t){var s=!0,i=n={callback:t,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){s&&null!==e&&(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())},e.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=u)},t}(),h="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;const d=function(t){var e=t.store,n=t.context,s=t.children,r=(0,i.useMemo)((function(){var t=new c(e);return t.onStateChange=t.notifyNestedSubs,{store:e,subscription:t}}),[e]),a=(0,i.useMemo)((function(){return e.getState()}),[e]);h((function(){var t=r.subscription;return t.trySubscribe(),a!==e.getState()&&t.notifyNestedSubs(),function(){t.tryUnsubscribe(),t.onStateChange=null}}),[r,a]);var l=n||o;return i.createElement(l.Provider,{value:r},s)};function p(){return(0,i.useContext)(o)}function f(t){void 0===t&&(t=o);var e=t===o?p:function(){return(0,i.useContext)(t)};return function(){return e().store}}n(679),n(864);var m=f();function g(t){void 0===t&&(t=o);var e=t===o?m:f(t);return function(){return e().dispatch}}var _=g(),y=function(t,e){return t===e};function v(t){void 0===t&&(t=o);var e=t===o?p:function(){return(0,i.useContext)(t)};return function(t,n){void 0===n&&(n=y);var s=e(),r=function(t,e,n,s){var r,o=(0,i.useReducer)((function(t){return t+1}),0)[1],a=(0,i.useMemo)((function(){return new c(n,s)}),[n,s]),l=(0,i.useRef)(),u=(0,i.useRef)(),d=(0,i.useRef)(),p=(0,i.useRef)(),f=n.getState();try{if(t!==u.current||f!==d.current||l.current){var m=t(f);r=void 0!==p.current&&e(m,p.current)?p.current:m}else r=p.current}catch(t){throw l.current&&(t.message+="\nThe error may be correlated with this previous error:\n"+l.current.stack+"\n\n"),t}return h((function(){u.current=t,d.current=f,p.current=r,l.current=void 0})),h((function(){function t(){try{var t=n.getState(),s=u.current(t);if(e(s,p.current))return;p.current=s,d.current=t}catch(t){l.current=t}o()}return a.onStateChange=t,a.trySubscribe(),t(),function(){return a.tryUnsubscribe()}}),[n,a]),r}(t,n,s.store,s.subscription);return(0,i.useDebugValue)(r),r}}var b,w=v();b=r.unstable_batchedUpdates,a=b;var x=n(379),k=n.n(x),S=n(795),T=n.n(S),C=n(695),E=n.n(C),O=n(216),A=n.n(O),D=n(763),M={styleTagTransform:function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}},setAttributes:function(t){var e=n.nc;e&&t.setAttribute("nonce",e)},insert:function(t){var e=E()("head");if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(t)}};function R(t,e){return t===e}function P(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var s=e.length,i=0;i<s;i++)if(!t(e[i],n[i]))return!1;return!0}function N(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"==typeof t}))){var n=e.map((function(t){return typeof t})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return e}M.domAPI=T(),M.insertStyleElement=A(),k()(D.Z,M),D.Z&&D.Z.locals&&D.Z.locals;var I=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];return function(){for(var e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];var r=0,o=s.pop(),a=N(s),l=t.apply(void 0,[function(){return r++,o.apply(null,arguments)}].concat(n)),u=t((function(){for(var t=[],e=a.length,n=0;n<e;n++)t.push(a[n].apply(null,arguments));return l.apply(null,t)}));return u.resultFunc=o,u.dependencies=a,u.recomputations=function(){return r},u.resetRecomputations=function(){return r=0},u}}((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,n=null,s=null;return function(){return P(e,n,arguments)||(s=t.apply(null,arguments)),n=arguments,s}}));function q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var L="function"==typeof Symbol&&Symbol.observable||"@@observable",z=function(){return Math.random().toString(36).substring(7).split("").join(".")},B={INIT:"@@redux/INIT"+z(),REPLACE:"@@redux/REPLACE"+z(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+z()}};function W(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function U(t,e,n){var s;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(j(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(j(1));return n(U)(t,e)}if("function"!=typeof t)throw new Error(j(2));var i=t,r=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(j(3));return r}function h(t){if("function"!=typeof t)throw new Error(j(4));if(l)throw new Error(j(5));var e=!0;return u(),a.push(t),function(){if(e){if(l)throw new Error(j(6));e=!1,u();var n=a.indexOf(t);a.splice(n,1),o=null}}}function d(t){if(!W(t))throw new Error(j(7));if(void 0===t.type)throw new Error(j(8));if(l)throw new Error(j(9));try{l=!0,r=i(r,t)}finally{l=!1}for(var e=o=a,n=0;n<e.length;n++)(0,e[n])();return t}function p(t){if("function"!=typeof t)throw new Error(j(10));i=t,d({type:B.REPLACE})}function f(){var t,e=h;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(j(11));function n(){t.next&&t.next(c())}return n(),{unsubscribe:e(n)}}})[L]=function(){return this},t}return d({type:B.INIT}),(s={dispatch:d,subscribe:h,getState:c,replaceReducer:p})[L]=f,s}function $(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function Q(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),s=function(){throw new Error(j(15))},i={getState:n.getState,dispatch:function(){return s.apply(void 0,arguments)}},r=e.map((function(t){return t(i)}));return s=$.apply(void 0,r)(n.dispatch),V(V({},n),{},{dispatch:s})}}}function G(t){return function(e){var n=e.dispatch,s=e.getState;return function(e){return function(i){return"function"==typeof i?i(n,s,t):e(i)}}}}var H=G();H.withExtraArgument=G;const Y=H;function X(t){for(var e=arguments.length,n=Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Z(t){return!!t&&!!t[Vt]}function K(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===jt}(t)||Array.isArray(t)||!!t[Ft]||!!t.constructor[Ft]||it(t)||rt(t))}function J(t,e,n){void 0===n&&(n=!1),0===tt(t)?(n?Object.keys:Lt)(t).forEach((function(s){n&&"symbol"==typeof s||e(s,t[s],t)})):t.forEach((function(n,s){return e(s,n,t)}))}function tt(t){var e=t[Vt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:it(t)?2:rt(t)?3:0}function et(t,e){return 2===tt(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function nt(t,e,n){var s=tt(t);2===s?t.set(e,n):3===s?(t.delete(e),t.add(n)):t[e]=n}function st(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function it(t){return Pt&&t instanceof Map}function rt(t){return Nt&&t instanceof Set}function ot(t){return t.o||t.t}function at(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=zt(t);delete e[Vt];for(var n=Lt(e),s=0;s<n.length;s++){var i=n[s],r=e[i];!1===r.writable&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(e[i]={configurable:!0,writable:!0,enumerable:r.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function lt(t,e){return void 0===e&&(e=!1),ct(t)||Z(t)||!K(t)||(tt(t)>1&&(t.set=t.add=t.clear=t.delete=ut),Object.freeze(t),e&&J(t,(function(t,e){return lt(e,!0)}),!0)),t}function ut(){X(2)}function ct(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function ht(t){var e=Bt[t];return e||X(18,t),e}function dt(){return Mt}function pt(t,e){e&&(ht("Patches"),t.u=[],t.s=[],t.v=e)}function ft(t){mt(t),t.p.forEach(_t),t.p=null}function mt(t){t===Mt&&(Mt=t.l)}function gt(t){return Mt={p:[],l:Mt,h:t,m:!0,_:0}}function _t(t){var e=t[Vt];0===e.i||1===e.i?e.j():e.O=!0}function yt(t,e){e._=e.p.length;var n=e.p[0],s=void 0!==t&&t!==n;return e.h.g||ht("ES5").S(e,t,s),s?(n[Vt].P&&(ft(e),X(4)),K(t)&&(t=vt(e,t),e.l||wt(e,t)),e.u&&ht("Patches").M(n[Vt],t,e.u,e.s)):t=vt(e,n,[]),ft(e),e.u&&e.v(e.u,e.s),t!==qt?t:void 0}function vt(t,e,n){if(ct(e))return e;var s=e[Vt];if(!s)return J(e,(function(i,r){return bt(t,s,e,i,r,n)}),!0),e;if(s.A!==t)return e;if(!s.P)return wt(t,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var i=4===s.i||5===s.i?s.o=at(s.k):s.o;J(3===s.i?new Set(i):i,(function(e,r){return bt(t,s,i,e,r,n)})),wt(t,i,!1),n&&t.u&&ht("Patches").R(s,n,t.u,t.s)}return s.o}function bt(t,e,n,s,i,r){if(Z(i)){var o=vt(t,i,r&&e&&3!==e.i&&!et(e.D,s)?r.concat(s):void 0);if(nt(n,s,o),!Z(o))return;t.m=!1}if(K(i)&&!ct(i)){if(!t.h.F&&t._<1)return;vt(t,i),e&&e.A.l||wt(t,i)}}function wt(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&lt(e,n)}function xt(t,e){var n=t[Vt];return(n?ot(n):t)[e]}function kt(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var s=Object.getOwnPropertyDescriptor(n,e);if(s)return s;n=Object.getPrototypeOf(n)}}function St(t){t.P||(t.P=!0,t.l&&St(t.l))}function Tt(t){t.o||(t.o=at(t.t))}function Ct(t,e,n){var s=it(e)?ht("MapSet").N(e,n):rt(e)?ht("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),s={i:n?1:0,A:e?e.A:dt(),P:!1,I:!1,D:{},l:e,t,k:null,o:null,j:null,C:!1},i=s,r=Wt;n&&(i=[s],r=Ut);var o=Proxy.revocable(i,r),a=o.revoke,l=o.proxy;return s.k=l,s.j=a,l}(e,n):ht("ES5").J(e,n);return(n?n.A:dt()).p.push(s),s}function Et(t){return Z(t)||X(22,t),function t(e){if(!K(e))return e;var n,s=e[Vt],i=tt(e);if(s){if(!s.P&&(s.i<4||!ht("ES5").K(s)))return s.t;s.I=!0,n=Ot(e,i),s.I=!1}else n=Ot(e,i);return J(n,(function(e,i){s&&function(t,e){return 2===tt(t)?t.get(e):t[e]}(s.t,e)===i||nt(n,e,t(i))})),3===i?new Set(n):n}(t)}function Ot(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return at(t)}function At(){function t(t,e){var n=i[t];return n?n.enumerable=e:i[t]=n={configurable:!0,enumerable:e,get:function(){var e=this[Vt];return Wt.get(e,t)},set:function(e){var n=this[Vt];Wt.set(n,t,e)}},n}function e(t){for(var e=t.length-1;e>=0;e--){var i=t[e][Vt];if(!i.P)switch(i.i){case 5:s(i)&&St(i);break;case 4:n(i)&&St(i)}}}function n(t){for(var e=t.t,n=t.k,s=Lt(n),i=s.length-1;i>=0;i--){var r=s[i];if(r!==Vt){var o=e[r];if(void 0===o&&!et(e,r))return!0;var a=n[r],l=a&&a[Vt];if(l?l.t!==o:!st(a,o))return!0}}var u=!!e[Vt];return s.length!==Lt(e).length+(u?0:1)}function s(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!n||n.get)}var i={};!function(t,e){Bt[t]||(Bt[t]=e)}("ES5",{J:function(e,n){var s=Array.isArray(e),i=function(e,n){if(e){for(var s=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(s,""+i,t(i,!0));return s}var r=zt(n);delete r[Vt];for(var o=Lt(r),a=0;a<o.length;a++){var l=o[a];r[l]=t(l,e||!!r[l].enumerable)}return Object.create(Object.getPrototypeOf(n),r)}(s,e),r={i:s?5:4,A:n?n.A:dt(),P:!1,I:!1,D:{},l:n,t:e,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Vt,{value:r,writable:!0}),i},S:function(t,n,i){i?Z(n)&&n[Vt].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var n=e[Vt];if(n){var i=n.t,r=n.k,o=n.D,a=n.i;if(4===a)J(r,(function(e){e!==Vt&&(void 0!==i[e]||et(i,e)?o[e]||t(r[e]):(o[e]=!0,St(n)))})),J(i,(function(t){void 0!==r[t]||et(r,t)||(o[t]=!1,St(n))}));else if(5===a){if(s(n)&&(St(n),o.length=!0),r.length<i.length)for(var l=r.length;l<i.length;l++)o[l]=!1;else for(var u=i.length;u<r.length;u++)o[u]=!0;for(var c=Math.min(r.length,i.length),h=0;h<c;h++)void 0===o[h]&&t(r[h])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?n(t):s(t)}})}var Dt,Mt,Rt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Pt="undefined"!=typeof Map,Nt="undefined"!=typeof Set,It="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,qt=Rt?Symbol.for("immer-nothing"):((Dt={})["immer-nothing"]=!0,Dt),Ft=Rt?Symbol.for("immer-draftable"):"__$immer_draftable",Vt=Rt?Symbol.for("immer-state"):"__$immer_state",jt=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Lt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,zt=Object.getOwnPropertyDescriptors||function(t){var e={};return Lt(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},Bt={},Wt={get:function(t,e){if(e===Vt)return t;var n=ot(t);if(!et(n,e))return function(t,e,n){var s,i=kt(e,n);return i?"value"in i?i.value:null===(s=i.get)||void 0===s?void 0:s.call(t.k):void 0}(t,n,e);var s=n[e];return t.I||!K(s)?s:s===xt(t.t,e)?(Tt(t),t.o[e]=Ct(t.A.h,s,t)):s},has:function(t,e){return e in ot(t)},ownKeys:function(t){return Reflect.ownKeys(ot(t))},set:function(t,e,n){var s=kt(ot(t),e);if(null==s?void 0:s.set)return s.set.call(t.k,n),!0;if(!t.P){var i=xt(ot(t),e),r=null==i?void 0:i[Vt];if(r&&r.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(st(n,i)&&(void 0!==n||et(t.t,e)))return!0;Tt(t),St(t)}return t.o[e]===n&&"number"!=typeof n||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==xt(t.t,e)||e in t.t?(t.D[e]=!1,Tt(t),St(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ot(t),s=Reflect.getOwnPropertyDescriptor(n,e);return s?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:s.enumerable,value:n[e]}:s},defineProperty:function(){X(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){X(12)}},Ut={};J(Wt,(function(t,e){Ut[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Ut.deleteProperty=function(t,e){return Wt.deleteProperty.call(this,t[0],e)},Ut.set=function(t,e,n){return Wt.set.call(this,t[0],e,n,t[0])};var $t=new(function(){function t(t){var e=this;this.g=It,this.F=!0,this.produce=function(t,n,s){if("function"==typeof t&&"function"!=typeof n){var i=n;n=t;var r=e;return function(t){var e=this;void 0===t&&(t=i);for(var s=arguments.length,o=Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];return r.produce(t,(function(t){var s;return(s=n).call.apply(s,[e,t].concat(o))}))}}var o;if("function"!=typeof n&&X(6),void 0!==s&&"function"!=typeof s&&X(7),K(t)){var a=gt(e),l=Ct(e,t,void 0),u=!0;try{o=n(l),u=!1}finally{u?ft(a):mt(a)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return pt(a,s),yt(t,a)}),(function(t){throw ft(a),t})):(pt(a,s),yt(o,a))}if(!t||"object"!=typeof t){if((o=n(t))===qt)return;return void 0===o&&(o=t),e.F&&lt(o,!0),o}X(21,t)},this.produceWithPatches=function(t,n){return"function"==typeof t?function(n){for(var s=arguments.length,i=Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(i))}))}:[e.produce(t,n,(function(t,e){s=t,i=e})),s,i];var s,i},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){K(t)||X(8),Z(t)&&(t=Et(t));var e=gt(this),n=Ct(this,t,void 0);return n[Vt].C=!0,mt(e),n},e.finishDraft=function(t,e){var n=(t&&t[Vt]).A;return pt(n,e),yt(void 0,n)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!It&&X(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var s=e[n];if(0===s.path.length&&"replace"===s.op){t=s.value;break}}var i=ht("Patches").$;return Z(t)?i(t,e):this.produce(t,(function(t){return i(t,e.slice(n+1))}))},t}()),Qt=$t.produce;$t.produceWithPatches.bind($t),$t.setAutoFreeze.bind($t),$t.setUseProxies.bind($t),$t.applyPatches.bind($t),$t.createDraft.bind($t),$t.finishDraft.bind($t);const Gt=Qt;var Ht,Yt=(Ht=function(t,e){return(Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ht(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Xt=function(t,e){for(var n=0,s=e.length,i=t.length;n<s;n++,i++)t[i]=e[n];return t},Zt=Object.defineProperty,Kt=Object.prototype.hasOwnProperty,Jt=Object.getOwnPropertySymbols,te=Object.prototype.propertyIsEnumerable,ee=function(t,e,n){return e in t?Zt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ne=function(t,e){for(var n in e||(e={}))Kt.call(e,n)&&ee(t,n,e[n]);if(Jt)for(var s=0,i=Jt(e);s<i.length;s++)n=i[s],te.call(e,n)&&ee(t,n,e[n]);return t},se="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?$:$.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var ie=function(t){function e(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Yt(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,Xt([void 0],t[0].concat(this)))):new(e.bind.apply(e,Xt([void 0],t.concat(this))))},e}(Array);function re(t,e){function n(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(e){var i=e.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return ne(ne({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}function oe(t){var e,n={},s=[],i={addCase:function(t,e){var s="string"==typeof t?t:t.type;if(s in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[s]=e,i},addMatcher:function(t,e){return s.push({matcher:t,reducer:e}),i},addDefaultCase:function(t){return e=t,i}};return t(i),[n,s,e]}function ae(t){var e=t.name,n=t.initialState;if(!e)throw new Error("`name` is a required option for createSlice");var s=t.reducers||{},i="function"==typeof t.extraReducers?oe(t.extraReducers):[t.extraReducers],r=i[0],o=void 0===r?{}:r,a=i[1],l=void 0===a?[]:a,u=i[2],c=void 0===u?void 0:u,h=Object.keys(s),d={},p={},f={};h.forEach((function(t){var n,i,r=s[t],o=e+"/"+t;"reducer"in r?(n=r.reducer,i=r.prepare):n=r,d[t]=n,p[o]=n,f[t]=i?re(o,i):re(o)}));var m=function(t,e,n,s){void 0===n&&(n=[]),At();var i="function"==typeof e?oe(e):[e,n,s],r=i[0],o=i[1],a=i[2],l=Gt(t,(function(){}));return function(t,e){void 0===t&&(t=l);var n=Xt([r[e.type]],o.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[a]),n.reduce((function(t,n){if(n){var s;if(Z(t))return void 0===(s=n(t,e))?t:s;if(K(t))return Gt(t,(function(t){return n(t,e)}));if(void 0===(s=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return s}return t}),t)}}(n,ne(ne({},o),p),l,c);return{name:e,reducer:m,actions:f,caseReducers:d}}const le="14.7.77";var ue=n(382);const ce=new WeakSet,he=new WeakMap,de=new WeakMap,pe=new WeakMap,fe=new WeakMap,me=new WeakMap,ge=new WeakMap,_e=new WeakMap,ye=new WeakMap,ve=new WeakMap,be={construct:()=>be},we=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,xe=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),i=s.match(we);for(;null!==i;){const t=i[1].slice(1,-1),r=i[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(r),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(we)}return[n.join(";"),s]},ke=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Se=t=>{if(!(t=>{try{new new Proxy(t,be)}catch{return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},Te=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},Ce=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[s]=n;return t.delete(s),s},Ee=(t,e,n,s)=>{const i=Te(t,e),r=Ce(i,(t=>t[0]===n&&t[1]===s));return 0===i.size&&t.delete(e),r},Oe=t=>Te(ge,t),Ae=t=>{if(ce.has(t))throw new Error("The AudioNode is already stored.");ce.add(t),Oe(t).forEach((t=>t(!0)))},De=t=>"port"in t,Me=t=>{if(!ce.has(t))throw new Error("The AudioNode is not stored.");ce.delete(t),Oe(t).forEach((t=>t(!1)))},Re=(t,e)=>{!De(t)&&e.every((t=>0===t.size))&&Me(t)},Pe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Ne=(t,e)=>t.context===e,Ie=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},qe=()=>new DOMException("","IndexSizeError"),Fe=t=>{var e;t.getChannelData=(e=t.getChannelData,n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw qe();throw t}})},Ve={numberOfChannels:1},je=-34028234663852886e22,Le=-je,ze=t=>ce.has(t),Be={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},We=t=>Te(he,t),Ue=t=>Te(pe,t),$e=(t,e)=>{const{activeInputs:n}=We(t);n.forEach((n=>n.forEach((([n])=>{e.includes(t)||$e(n,[...e,t])}))));const s=(t=>"playbackRate"in t)(t)?[t.playbackRate]:De(t)?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:(t=>"offset"in t)(t)?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t)(t)?[t.detune,t.frequency]:(t=>"pan"in t)(t)?[t.pan]:[];for(const t of s){const n=Ue(t);void 0!==n&&n.activeInputs.forEach((([t])=>$e(t,e)))}ze(t)&&Me(t)},Qe=t=>{$e(t.destination,[])},Ge=t=>"context"in t,He=t=>Ge(t[0]),Ye=(t,e,n,s)=>{for(const e of t)if(n(e)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Xe=(t,e,[n,s],i)=>{Ye(t,[e,n,s],(t=>t[0]===e&&t[1]===n),i)},Ze=(t,[e,n,s],i)=>{const r=t.get(e);void 0===r?t.set(e,new Set([[n,s]])):Ye(r,[n,s],(t=>t[0]===n),i)},Ke=t=>"inputs"in t,Je=(t,e,n,s)=>{if(Ke(e)){const i=e.inputs[s];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,s),[e,n,s]},tn=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},en=(t,e)=>{if(!Oe(t).delete(e))throw new Error("Missing the expected event listener.")},nn=(t,e,n)=>{const s=Te(t,e),i=Ce(s,(t=>t[0]===n));return 0===s.size&&t.delete(e),i},sn=(t,e,n,s)=>{Ke(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},rn=t=>Te(de,t),on=t=>Te(fe,t),an=t=>_e.has(t),ln=t=>!ce.has(t),un=t=>new Promise((e=>{const n=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),r=i.getChannelData(0);r[0]=1,r[1]=1;const o=t.createBufferSource();o.buffer=i,o.loop=!0,o.connect(n).connect(t.destination),o.connect(s),o.disconnect(s),n.onaudioprocess=s=>{const i=s.inputBuffer.getChannelData(0);Array.prototype.some.call(i,(t=>1===t))?e(!0):e(!1),o.stop(),n.onaudioprocess=null,o.disconnect(n),n.disconnect(t.destination)},o.start()})),cn=(t,e)=>{const n=new Map;for(const e of t)for(const t of e){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach(((t,n)=>e(n,t)))},hn=t=>"context"in t,dn=t=>{const e=new Map;var n;t.connect=(n=t.connect.bind(t),(t,s=0,i=0)=>{const r=hn(t)?n(t,s,i):n(t,s),o=e.get(t);return void 0===o?e.set(t,[{input:i,output:s}]):o.every((t=>t.input!==i||t.output!==s))&&o.push({input:i,output:s}),r}),t.disconnect=(n=>(s,i,r)=>{if(n.apply(t),void 0===s)e.clear();else if("number"==typeof s)for(const[t,n]of e){const i=n.filter((t=>t.output!==s));0===i.length?e.delete(t):e.set(t,i)}else if(e.has(s))if(void 0===i)e.delete(s);else{const t=e.get(s);if(void 0!==t){const n=t.filter((t=>t.output!==i&&(t.input!==r||void 0===r)));0===n.length?e.delete(s):e.set(s,n)}}for(const[n,s]of e)s.forEach((e=>{hn(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))})(t.disconnect)},pn=(t,e,n,s,i)=>{const[r,o]=((t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=We(e),o=tn(i[s],t,n);return null===o?[Ee(r,t,n,s)[2],!1]:[o[2],!0]})(t,n,s,i);if(null!==r&&(en(t,r),!o||e||an(t)||sn(rn(t),rn(n),s,i)),ze(n)){const{activeInputs:t}=We(n);Re(n,t)}},fn=(t,e,n,s)=>{const[i,r]=((t,e,n)=>{const{activeInputs:s,passiveInputs:i}=Ue(e),r=tn(s,t,n);return null===r?[nn(i,t,n)[1],!1]:[r[2],!0]})(t,n,s);null!==i&&(en(t,i),!r||e||an(t)||rn(t).disconnect(on(n),s))};class mn{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach(((n,s)=>t.call(e,n,s,this)))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const gn={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function _n(t,e,n,s,i){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,i);else{const r=t.getChannelData(s);if(0===e[n].byteLength)e[n]=r.slice(i,i+128);else{const t=new Float32Array(r.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const yn=(t,e,n,s,i)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],s,i):0!==e[n].byteLength&&t.getChannelData(s).set(e[n],i)},vn=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const t=[],i="number"==typeof e?e:e[s];for(let e=0;e<i;e+=1)t.push(new Float32Array(128));n.push(t)}return n},bn=async(t,e,n,s,i,r,o)=>{const a=null===e?128*Math.ceil(t.context.length/128):e.length,l=s.channelCount*s.numberOfInputs,u=i.reduce(((t,e)=>t+e),0),c=0===u?null:n.createBuffer(u,a,n.sampleRate);if(void 0===r)throw new Error("Missing the processor constructor.");const h=We(t),d=await((t,e)=>{const n=Te(ve,t),s=rn(e);return Te(n,s)})(n,t),p=vn(s.numberOfInputs,s.channelCount),f=vn(s.numberOfOutputs,i),m=Array.from(t.parameters.keys()).reduce(((t,e)=>({...t,[e]:new Float32Array(128)})),{});for(let u=0;u<a;u+=128){if(s.numberOfInputs>0&&null!==e)for(let t=0;t<s.numberOfInputs;t+=1)for(let n=0;n<s.channelCount;n+=1)_n(e,p[t],n,n,u);void 0!==r.parameterDescriptors&&null!==e&&r.parameterDescriptors.forEach((({name:t},n)=>{_n(e,m,t,l+n,u)}));for(let t=0;t<s.numberOfInputs;t+=1)for(let e=0;e<i[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{const t=p.map(((t,e)=>0===h.activeInputs[e].size?[]:t)),e=o(u/n.sampleRate,n.sampleRate,(()=>d.process(t,f,m)));if(null!==c)for(let t=0,e=0;t<s.numberOfOutputs;t+=1){for(let n=0;n<i[t];n+=1)yn(c,f[t],n,e+n,u);e+=i[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return c},wn={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},xn={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},kn={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Sn={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Tn={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Cn=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise((s=>{n.onmessage=()=>{e.close(),n.close(),s()},e.postMessage(t,[t])}))},En={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},On=(t,e,n)=>{const s=e[n];if(void 0===s)throw t();return s},An={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Dn={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Mn=()=>new DOMException("","InvalidStateError"),Rn=()=>new DOMException("","InvalidAccessError"),Pn={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Nn=(t,e,n,s,i,r,o,a,l,u,c)=>{const h=u.length;let d=a;for(let a=0;a<h;a+=1){let h=n[0]*u[a];for(let e=1;e<i;e+=1){const s=d-e&l-1;h+=n[e]*r[s],h-=t[e]*o[s]}for(let t=i;t<s;t+=1)h+=n[t]*r[d-t&l-1];for(let n=i;n<e;n+=1)h-=t[n]*o[d-n&l-1];r[d]=u[a],o[d]=h,d=d+1&l-1,c[a]=h}return d},In={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},qn=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},Fn=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n]&&(t[n]=s)},Vn=(t,e)=>{Fn(t,e,"channelCount"),Fn(t,e,"channelCountMode"),Fn(t,e,"channelInterpretation")},jn=t=>"function"==typeof t.getFloatTimeDomainData,Ln=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n].value&&(t[n].value=s)},zn=t=>{t.start=(e=>(n=0,s=0,i)=>{if("number"==typeof i&&i<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,i)})(t.start)},Bn=t=>{var e;t.stop=(e=t.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},Wn=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Un=(t,e)=>{const n=t.createBiquadFilter();return Vn(n,e),Ln(n,e,"Q"),Ln(n,e,"detune"),Ln(n,e,"frequency"),Ln(n,e,"gain"),Fn(n,e,"type"),n},$n=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Vn(n,e),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Mn()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw Mn()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw Mn()}})})(n),n},Qn=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Gn=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Vn(n,e),Ln(n,e,"delayTime"),n},Hn=(t,e)=>{const n=t.createGain();return Vn(n,e),Ln(n,e,"gain"),n};function Yn(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Xn(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Zn(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)n=Xn(n,e),n[0]+=t[s];return n}const Kn=(t,e,n,s)=>t.createScriptProcessor(e,n,s),Jn=()=>new DOMException("","NotSupportedError"),ts={numberOfChannels:1},es={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ns={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},ss={disableNormalization:!1},is={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},rs=()=>new DOMException("","UnknownError"),os={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},as=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},ls=(t,e,n,s)=>{let i=Object.getPrototypeOf(t);for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:r,set:o}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(r),set:s(o)})},us=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(9!==s.code)throw s;us(t,e,n+1e-7)}},cs=t=>{const e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},hs=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},ds=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},ps=()=>{try{new DOMException}catch{return!1}return!0},fs=()=>new Promise((t=>{const e=new ArrayBuffer(0),{port1:n,port2:s}=new MessageChannel;n.onmessage=({data:e})=>t(null!==e),s.postMessage(e,[e])})),ms=(t,e)=>{const n=e.createGain();t.connect(n);const s=(e=>()=>{e.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),Qn(t,n),t.stop=(e=>{let s=!1;return(i=0)=>{if(s)try{e.call(t,i)}catch{n.gain.setValueAtTime(0,i)}else e.call(t,i),s=!0}})(t.stop)},gs=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},_s=(t=>(e,n,[s,i,r],o)=>{t(e[i],[n,s,r],(t=>t[0]===n&&t[1]===s),o)})(Ye),ys=(t=>(e,n,[s,i,r],o)=>{const a=e.get(s);void 0===a?e.set(s,new Set([[i,n,r]])):t(a,[i,n,r],(t=>t[0]===i&&t[1]===n),o)})(Ye),vs=(t=>(e,n,s,i)=>t(e[i],(t=>t[0]===n&&t[1]===s)))(Ce),bs=new WeakMap,ws=(t=>e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:0})(bs),xs=(ks=new Map,Ss=new WeakMap,(t,e)=>{const n=Ss.get(t);if(void 0!==n)return n;const s=ks.get(t);if(void 0!==s)return s;try{const n=e();return n instanceof Promise?(ks.set(t,n),n.catch((()=>!1)).then((e=>(ks.delete(t),Ss.set(t,e),e)))):(Ss.set(t,n),n)}catch{return Ss.set(t,!1),!1}});var ks,Ss;const Ts="undefined"==typeof window?null:window,Cs=((t,e)=>(n,s)=>{const i=n.createAnalyser();if(Vn(i,s),!(s.maxDecibels>s.minDecibels))throw e();return Fn(i,s,"fftSize"),Fn(i,s,"maxDecibels"),Fn(i,s,"minDecibels"),Fn(i,s,"smoothingTimeConstant"),t(jn,(()=>jn(i)))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let t=0;t<s;t+=1)e[t]=.0078125*(n[t]-128);return e}})(i),i})(xs,qe),Es=(t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(We),Os=((t,e,n)=>async(s,i,r,o)=>{const a=t(s),l=[...o,s];await Promise.all(a.activeInputs.map(((t,o)=>Array.from(t).filter((([t])=>!l.includes(t))).map((async([t,a])=>{const u=e(t),c=await u.render(t,i,l),h=s.context.destination;n(t)||s===h&&n(s)||c.connect(r,a,o)})))).reduce(((t,e)=>[...t,...e]),[]))})(We,Es,an),As=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r,o){const a=s.get(r);return void 0!==a?Promise.resolve(a):(async(i,r,o)=>{let a=e(i);if(!Ne(a,r)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(r,e)}return s.set(r,a),await n(i,r,a,o),a})(i,r,o)}}})(Cs,rn,Os),Ds=(Ms=me,t=>{const e=Ms.get(t);if(void 0===e)throw Mn();return e});var Ms;const Rs=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(Ts),Ps=(t=>e=>null!==t&&e instanceof t)(Rs),Ns=new WeakMap,Is=(t=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(e,n,s){if(null!==n){let i=this._listeners.get(n);void 0===i&&(i=t(this,n),"function"==typeof n&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(e,i,s)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const s=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===s?null:s,n)}})(gs),qs=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(Ts),Fs=(t=>e=>null!==t&&e instanceof t)(qs),Vs=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(Ts),js=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(Ts),Ls=((t,e,n,s,i,r,o,a,l,u,c,h,d,p,f)=>class extends u{constructor(e,s,i,r){super(i),this._context=e,this._nativeAudioNode=i;const o=c(e);h(o)&&!0!==n(un,(()=>un(o)))&&dn(i),de.set(this,i),ge.set(this,new Set),"closed"!==e.state&&s&&Ae(this),t(this,r,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();const u=c(this._context),h=f(u);if(d(t)||p(t))throw r();if(Ge(t)){const i=rn(t);try{const e=Je(this._nativeAudioNode,i,n,a),s=ln(this);(h||s)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!s&&ln(t)&&Ae(t)}catch(t){if(12===t.code)throw r();throw t}if(e(this,t,n,a,h)){const e=l([this],t);cn(e,s(h))}return t}const m=on(t);if("playbackRate"===m.name&&1024===m.maxValue)throw o();try{this._nativeAudioNode.connect(m,n),(h||ln(this))&&this._nativeAudioNode.disconnect(m,n)}catch(t){if(12===t.code)throw r();throw t}if(((t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=Ue(e),{outputs:o}=We(t),a=Oe(t),l=o=>{const a=rn(t),l=on(e);if(o){const e=nn(r,t,n);Xe(i,t,e,!1),s||an(t)||a.connect(l,n)}else{const e=((t,e,n)=>Ce(t,(t=>t[0]===e&&t[1]===n)))(i,t,n);Ze(r,e,!1),s||an(t)||a.disconnect(l,n)}};return!!Ye(o,[e,n],(t=>t[0]===e&&t[1]===n),!0)&&(a.add(l),ze(t)?Xe(i,t,[n,l],!0):Ze(r,[t,n,l],!0),!0)})(this,t,n,h)){const e=l([this],t);cn(e,s(h))}}disconnect(t,e,n){let s;const o=c(this._context),u=f(o);if(void 0===t)s=((t,e)=>{const n=We(t),s=[];for(const i of n.outputs)He(i)?pn(t,e,...i):fn(t,e,...i),s.push(i[0]);return n.outputs.clear(),s})(this,u);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();s=((t,e,n)=>{const s=We(t),i=[];for(const r of s.outputs)r[1]===n&&(He(r)?pn(t,e,...r):fn(t,e,...r),i.push(r[0]),s.outputs.delete(r));return i})(this,u,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(Ge(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(s=((t,e,n,s,i)=>{const r=We(t);return Array.from(r.outputs).filter((t=>!(t[0]!==n||void 0!==s&&t[1]!==s||void 0!==i&&t[2]!==i))).map((n=>(He(n)?pn(t,e,...n):fn(t,e,...n),r.outputs.delete(n),n[0])))})(this,u,t,e,n),0===s.length)throw r()}for(const t of s){const e=l([this],t);cn(e,a)}}})((zs=he,(t,e,n)=>{const s=[];for(let t=0;t<n.numberOfInputs;t+=1)s.push(new Set);zs.set(t,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),((t,e,n,s,i,r,o,a,l,u,c,h,d)=>{const p=new WeakMap;return(f,m,g,_,y)=>{const{activeInputs:v,passiveInputs:b}=r(m),{outputs:w}=r(f),x=a(f),k=r=>{const a=l(m),u=l(f);if(r){const e=Ee(b,f,g,_);t(v,f,e,!1),y||h(f)||n(u,a,g,_),d(m)&&Ae(m)}else{const t=s(v,f,g,_);e(b,_,t,!1),y||h(f)||i(u,a,g,_);const n=o(m);if(0===n)c(m)&&Re(m,v);else{const t=p.get(m);void 0!==t&&clearTimeout(t),p.set(m,setTimeout((()=>{c(m)&&Re(m,v)}),1e3*n))}}};return!!u(w,[m,g,_],(t=>t[0]===m&&t[1]===g&&t[2]===_),!0)&&(x.add(k),c(f)?t(v,f,[g,_,k],!0):e(b,_,[f,g,k],!0),!0)}})(_s,ys,Je,vs,sn,We,ws,Oe,rn,Ye,ze,an,ln),xs,((t,e,n,s,i,r)=>o=>(a,l)=>{const u=t.get(a);if(void 0===u){if(!o&&r(a)){const t=s(a),{outputs:r}=n(a);for(const n of r)if(He(n)){const i=s(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.disconnect(e,n[1])}}t.set(a,l)}else t.set(a,u+l)})(_e,sn,We,rn,on,ze),qe,Rn,Jn,((t,e,n,s,i,r,o,a)=>(l,u)=>{const c=e.get(l);if(void 0===c)throw new Error("Missing the expected cycle count.");const h=r(l.context),d=a(h);if(c===u){if(e.delete(l),!d&&o(l)){const e=s(l),{outputs:r}=n(l);for(const n of r)if(He(n)){const i=s(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.connect(t,n[1])}}}else e.set(l,c-u)})(Je,_e,We,rn,on,Ds,ze,Ps),((t,e,n)=>function s(i,r){const o=Ge(r)?r:n(t,r);if((t=>"delayTime"in t)(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map((t=>s([...i,o],t[0]))).reduce(((t,e)=>t.concat(e)),[])})(Ns,We,Te),Is,Ds,Fs,Vs,js,Ps);var zs;const Bs=((t,e,n,s,i,r)=>class extends t{constructor(t,n){const o=i(t),a={...Pe,...n},l=s(o,a);super(t,!1,l,r(o)?e():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(Ls,As,qe,Cs,Ds,Ps),Ws=new WeakSet,Us=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(Ts),$s=(Qs=new Uint32Array(1),t=>(Qs[0]=t,Qs[0]));var Qs;const Gs=((t,e)=>n=>{n.copyFromChannel=(s,i,r=0)=>{const o=t(r),a=t(i);if(a>=n.numberOfChannels)throw e();const l=n.length,u=n.getChannelData(a),c=s.length;for(let t=o<0?-o:0;t+o<l&&t<c;t+=1)s[t]=u[t+o]},n.copyToChannel=(s,i,r=0)=>{const o=t(r),a=t(i);if(a>=n.numberOfChannels)throw e();const l=n.length,u=n.getChannelData(a),c=s.length;for(let t=o<0?-o:0;t+o<l&&t<c;t+=1)u[t+o]=s[t]}})($s,qe),Hs=(t=>e=>{e.copyFromChannel=(n=>(s,i,r=0)=>{const o=t(r),a=t(i);if(o<e.length)return n.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(s,i,r=0)=>{const o=t(r),a=t(i);if(o<e.length)return n.call(e,s,a,o)})(e.copyToChannel)})($s),Ys=((t,e,n,s,i,r,o,a)=>{let l=null;return class u{constructor(u){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:c,numberOfChannels:h,sampleRate:d}={...Ve,...u};null===l&&(l=new i(1,1,44100));const p=null!==s&&e(r,r)?new s({length:c,numberOfChannels:h,sampleRate:d}):l.createBuffer(h,c,d);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(o(p),Fe(p)):e(Ie,(()=>Ie(p)))||a(p),t.add(p),p}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===u.prototype||t.has(e)}}})(Ws,xs,Jn,Us,Rs,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})(Us),Gs,Hs),Xs=(t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(s),s.disconnect()};n.addEventListener("ended",i)})(Hn),Zs=((t,e,n)=>async(s,i,r,o)=>{const a=e(s);await Promise.all(Array.from(a.activeInputs).map((async([e,s])=>{const a=t(e),l=await a.render(e,i,o);n(e)||l.connect(r,s)})))})(Es,Ue,an),Ks=(t=>(e,n,s,i)=>t(n,e,s,i))(Zs),Js=((t,e,n,s,i,r,o,a,l,u,c)=>(l,h)=>{const d=l.createBufferSource();return Vn(d,h),Ln(d,h,"playbackRate"),Fn(d,h,"buffer"),Fn(d,h,"loop"),Fn(d,h,"loopEnd"),Fn(d,h,"loopStart"),e(n,(()=>n(l)))||(t=>{t.start=(e=>{let n=!1;return(s=0,i=0,r)=>{if(n)throw Mn();e.call(t,s,i,r),n=!0}})(t.start)})(d),e(s,(()=>s(l)))||(t=>{t.start=(e=>(n=0,s=0,i)=>{const r=t.buffer,o=null===r?s:Math.min(r.duration,s);null!==r&&o>r.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,i)})(t.start)})(d),e(i,(()=>i(l)))||u(d,l),e(r,(()=>r(l)))||zn(d),e(o,(()=>o(l)))||c(d,l),e(a,(()=>a(l)))||Bn(d),t(l,d),d})(Xs,xs,(t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1}),(t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0}),(t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0}),cs,hs,ds,0,(t=>(e,n)=>{const s=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=s),t(e,"buffer",(t=>()=>{const n=t.call(e);return n===s?null:n}),(t=>n=>t.call(e,null===n?s:n)))})(ls),ms),ti=((t,e)=>(n,s,i,r)=>(t(s).replay(i),e(s,n,i,r)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(Ue),Zs),ei=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(l,u,c){const h=r.get(u);return void 0!==h?Promise.resolve(h):(async(l,u,c)=>{let h=n(l);const d=Ne(h,u);if(!d){const t={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,t),null!==o&&h.start(...o),null!==a&&h.stop(a)}return r.set(u,h),d?await t(u,l.playbackRate,h.playbackRate,c):await s(u,l.playbackRate,h.playbackRate,c),await i(l,u,h,c),h})(l,u,c)}}})(Ks,Js,rn,ti,Os),ni=((t,e,n,s,i,r,o,a,l,u,c,h,d)=>(s,p,f,m=null,g=null)=>{const _=new ue.AutomationEventList(f.defaultValue),y=p?(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:s}=n;e.exponentialRampToValueAtTime(s,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:s}=n;e.linearRampToValueAtTime(s,t)}else if("setTarget"===n.type){const{startTime:t,target:s,timeConstant:i}=n;e.setTargetAtTime(s,t,i)}else if("setValue"===n.type){const{startTime:t,value:s}=n;e.setValueAtTime(s,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,t)}}}}))(_):null,v={get defaultValue(){return f.defaultValue},get maxValue(){return null===m?f.maxValue:m},get minValue(){return null===g?f.minValue:g},get value(){return f.value},set value(t){f.value=t,v.setValueAtTime(t,s.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof f.cancelAndHoldAtTime)null===y&&_.flush(s.context.currentTime),_.add(i(t)),f.cancelAndHoldAtTime(t);else{const e=Array.from(_).pop();null===y&&_.flush(s.context.currentTime),_.add(i(t));const n=Array.from(_).pop();f.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?f.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?f.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?f.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&f.setValueCurveAtTime(n.values,n.startTime,n.duration))}return v},cancelScheduledValues:t=>(null===y&&_.flush(s.context.currentTime),_.add(r(t)),f.cancelScheduledValues(t),v),exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===y&&_.flush(s.context.currentTime),_.add(o(t,e)),f.exponentialRampToValueAtTime(t,e),v},linearRampToValueAtTime:(t,e)=>(null===y&&_.flush(s.context.currentTime),_.add(a(t,e)),f.linearRampToValueAtTime(t,e),v),setTargetAtTime:(t,e,n)=>(null===y&&_.flush(s.context.currentTime),_.add(l(t,e,n)),f.setTargetAtTime(t,e,n),v),setValueAtTime:(t,e)=>(null===y&&_.flush(s.context.currentTime),_.add(u(t,e)),f.setValueAtTime(t,e),v),setValueCurveAtTime(t,e,n){const i=t instanceof Float32Array?t:new Float32Array(t);if(null!==h&&"webkitAudioContext"===h.name){const t=e+n,r=s.context.sampleRate,o=Math.ceil(e*r),a=Math.floor(t*r),l=a-o,u=new Float32Array(l);for(let t=0;t<l;t+=1){const s=(i.length-1)/n*((o+t)/r-e),a=Math.floor(s),l=Math.ceil(s);u[t]=a===l?i[a]:(1-(s-a))*i[a]+(1-(l-s))*i[l]}null===y&&_.flush(s.context.currentTime),_.add(c(u,e,n)),f.setValueCurveAtTime(u,e,n);const h=a/r;h<t&&d(v,u[u.length-1],h),d(v,i[i.length-1],t)}else null===y&&_.flush(s.context.currentTime),_.add(c(i,e,n)),f.setValueCurveAtTime(i,e,n);return v}};return n.set(v,f),e.set(v,s),t(v,y),v})((si=pe,(t,e)=>{si.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),Ns,fe,0,ue.createCancelAndHoldAutomationEvent,ue.createCancelScheduledValuesAutomationEvent,ue.createExponentialRampToValueAutomationEvent,ue.createLinearRampToValueAutomationEvent,ue.createSetTargetAutomationEvent,ue.createSetValueAutomationEvent,ue.createSetValueCurveAutomationEvent,qs,us);var si;const ii=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,s){const a=r(t),l={...Be,...s},u=i(a,l),c=o(a),h=c?e():null;super(t,!1,u,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,c,u.playbackRate,Le,je)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){Ae(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),ze(this)&&Me(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(Ls,ei,ni,Mn,Js,Ds,Ps,gs),ri=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,e){const n=r(t),s=o(n),l=i(n,e,s);super(t,!1,l,s?(t=>{let e=null;return{render:(n,s,i)=>(null===e&&(e=(async(e,n,s)=>{const i=n.destination;return await t(e,n,i,s),i})(n,s,i)),e)}})(a):null),this._isNodeOfNativeOfflineAudioContext=s,this._nativeAudioDestinationNode=l}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Ls,0,qe,Mn,((t,e)=>(n,s,i)=>{const r=n.destination;if(r.channelCount!==s)try{r.channelCount=s}catch{}i&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:s});const o=t(n,{channelCount:s,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return e(o,"channelCount",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e);try{r.channelCount=e}catch(t){if(e>r.maxChannelCount)throw t}})),e(o,"channelCountMode",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),r.channelCountMode=e})),e(o,"channelInterpretation",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),r.channelInterpretation=e})),Object.defineProperty(o,"maxChannelCount",{get:()=>r.maxChannelCount}),o.connect(r),o})(Hn,ls),Ds,Ps,Os),oi=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a,l){const u=r.get(a);return void 0!==u?Promise.resolve(u):(async(o,a,l)=>{let u=n(o);const c=Ne(u,a);if(!c){const t={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(a,t)}return r.set(a,u),c?(await t(a,o.Q,u.Q,l),await t(a,o.detune,u.detune,l),await t(a,o.frequency,u.frequency,l),await t(a,o.gain,u.gain,l)):(await s(a,o.Q,u.Q,l),await s(a,o.detune,u.detune,l),await s(a,o.frequency,u.frequency,l),await s(a,o.gain,u.gain,l)),await i(o,a,u,l),u})(o,a,l)}}})(Ks,Un,rn,ti,Os),ai=(t=>(e,n)=>t.set(e,n))(bs),li=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,s){const l=r(t),u={...wn,...s},c=i(l,u),h=o(l);super(t,!1,c,h?n():null),this._Q=e(this,h,c.Q,Le,je),this._detune=e(this,h,c.detune,1200*Math.log2(Le),-1200*Math.log2(Le)),this._frequency=e(this,h,c.frequency,t.sampleRate/2,0),this._gain=e(this,h,c.gain,40*Math.log10(Le),je),this._nativeBiquadFilterNode=c,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw s();throw t}if(t.length!==e.length||e.length!==n.length)throw s()}})(Ls,ni,oi,Rn,Un,Ds,Ps,ai),ui=((t,e)=>(n,s,i)=>{const r=new Set;return n.connect=(o=n.connect,(i,a=0,l=0)=>{const u=0===r.size;if(e(i))return o.call(n,i,a,l),t(r,[i,a,l],(t=>t[0]===i&&t[1]===a&&t[2]===l),!0),u&&s(),i;o.call(n,i,a),t(r,[i,a],(t=>t[0]===i&&t[1]===a),!0),u&&s()}),n.disconnect=(t=>(s,o,a)=>{const l=r.size>0;if(void 0===s)t.apply(n),r.clear();else if("number"==typeof s){t.call(n,s);for(const t of r)t[1]===s&&r.delete(t)}else{e(s)?t.call(n,s,o,a):t.call(n,s,o);for(const t of r)t[0]!==s||void 0!==o&&t[1]!==o||void 0!==a&&t[2]!==a||r.delete(t)}const u=0===r.size;l&&u&&i()})(n.disconnect),n;var o})(Ye,Vs),ci=((t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(s,(()=>{const t=s.numberOfInputs;for(let e=0;e<t;e+=1)i.connect(s,0,e)}),(()=>i.disconnect(s)))})(Mn,ui),hi=((t,e)=>(n,s)=>{const i=n.createChannelMerger(s.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),Vn(i,s),i})(qs,ci),di=((t,e,n,s,i)=>class extends t{constructor(t,r){const o=s(t),a={...xn,...r};super(t,!1,n(o,a),i(o)?e():null)}})(Ls,((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r,o){const a=s.get(r);return void 0!==a?Promise.resolve(a):(async(i,r,o)=>{let a=e(i);if(!Ne(a,r)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(r,e)}return s.set(r,a),await n(i,r,a,o),a})(i,r,o)}}})(hi,rn,Os),hi,Ds,Ps),pi=((t,e,n,s,i,r)=>class extends t{constructor(t,r){const o=s(t),a=(t=>({...t,channelCount:t.numberOfOutputs}))({...kn,...r});super(t,!1,n(o,a),i(o)?e():null)}})(Ls,((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r,o){const a=s.get(r);return void 0!==a?Promise.resolve(a):(async(i,r,o)=>{let a=e(i);if(!Ne(a,r)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(r,e)}return s.set(r,a),await n(i,r,a,o),a})(i,r,o)}}})($n,rn,Os),$n,Ds,Ps),fi=((t,e,n,s)=>(i,{offset:r,...o})=>{const a=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(i,{...o,gain:r}),c=a.getChannelData(0);c[0]=1,c[1]=1,l.buffer=a,l.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(t){u.channelCount=t},get channelCountMode(){return u.channelCountMode},set channelCountMode(t){u.channelCountMode=t},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(t){u.channelInterpretation=t},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return l.onended},set onended(t){l.onended=t},addEventListener:(...t)=>l.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>l.dispatchEvent(t[0]),removeEventListener:(...t)=>l.removeEventListener(t[0],t[1],t[2]),start(t=0){l.start.call(l,t)},stop(t=0){l.stop.call(l,t)}};return t(i,l),s(Qn(h,u),(()=>l.connect(u)),(()=>l.disconnect(u)))})(Xs,Js,Hn,ui),mi=((t,e,n,s,i)=>(r,o)=>{if(void 0===r.createConstantSource)return n(r,o);const a=r.createConstantSource();return Vn(a,o),Ln(a,o,"offset"),e(s,(()=>s(r)))||zn(a),e(i,(()=>i(r)))||Bn(a),t(r,a),a})(Xs,xs,fi,cs,ds),gi=((t,e,n,s,i,r,o)=>class extends t{constructor(t,o){const a=i(t),l={...Sn,...o},u=s(a,l),c=r(a),h=c?n():null;super(t,!1,u,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=u,this._offset=e(this,c,u.offset,Le,je),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"==typeof t?o(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){Ae(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),ze(this)&&Me(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(Ls,ni,((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(l,u,c){const h=r.get(u);return void 0!==h?Promise.resolve(h):(async(l,u,c)=>{let h=n(l);const d=Ne(h,u);if(!d){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,t),null!==o&&h.start(o),null!==a&&h.stop(a)}return r.set(u,h),d?await t(u,l.offset,h.offset,c):await s(u,l.offset,h.offset,c),await i(l,u,h,c),h})(l,u,c)}}})(Ks,mi,rn,ti,Os),mi,Ds,Ps,gs),_i=((t,e)=>(n,s)=>{const i=n.createConvolver();if(Vn(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),Fn(i,s,"buffer"),s.channelCount>2)throw t();if(e(i,"channelCount",(t=>()=>t.call(i)),(e=>n=>{if(n>2)throw t();return e.call(i,n)})),"max"===s.channelCountMode)throw t();return e(i,"channelCountMode",(t=>()=>t.call(i)),(e=>n=>{if("max"===n)throw t();return e.call(i,n)})),i})(Jn,ls),yi=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=s(t),l={...Tn,...o},u=n(a,l);super(t,!1,u,i(a)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=u,null!==l.buffer&&r(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,44100),this._isBufferNullified=!0,r(this,0)}else this._isBufferNullified=!1,r(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(Ls,((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r,o){const a=s.get(r);return void 0!==a?Promise.resolve(a):(async(i,r,o)=>{let a=e(i);if(!Ne(a,r)){const e={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(r,e)}return s.set(r,a),Ke(a)?await n(i,r,a.inputs[0],o):await n(i,r,a,o),a})(i,r,o)}}})(_i,rn,Os),_i,Ds,Ps,ai),vi=((t,e,n,s,i,r,o)=>class extends t{constructor(t,a){const l=i(t),u={...En,...a},c=s(l,u),h=r(l);super(t,!1,c,h?n(u.maxDelayTime):null),this._delayTime=e(this,h,c.delayTime),o(this,u.maxDelayTime)}get delayTime(){return this._delayTime}})(Ls,ni,((t,e,n,s,i)=>r=>{const o=new WeakMap;return{render(a,l,u){const c=o.get(l);return void 0!==c?Promise.resolve(c):(async(a,l,u)=>{let c=n(a);const h=Ne(c,l);if(!h){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:r};c=e(l,t)}return o.set(l,c),h?await t(l,a.delayTime,c.delayTime,u):await s(l,a.delayTime,c.delayTime,u),await i(a,l,c,u),c})(a,l,u)}}})(Ks,Gn,rn,ti,Os),Gn,Ds,Ps,ai),bi=(t=>(e,n)=>{const s=e.createDynamicsCompressor();if(Vn(s,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return Ln(s,n,"attack"),Ln(s,n,"knee"),Ln(s,n,"ratio"),Ln(s,n,"release"),Ln(s,n,"threshold"),s})(Jn),wi=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,i){const l=r(t),u={...An,...i},c=s(l,u),h=o(l);super(t,!1,c,h?n():null),this._attack=e(this,h,c.attack),this._knee=e(this,h,c.knee),this._nativeDynamicsCompressorNode=c,this._ratio=e(this,h,c.ratio),this._release=e(this,h,c.release),this._threshold=e(this,h,c.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Ls,ni,((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a,l){const u=r.get(a);return void 0!==u?Promise.resolve(u):(async(o,a,l)=>{let u=n(o);const c=Ne(u,a);if(!c){const t={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(a,t)}return r.set(a,u),c?(await t(a,o.attack,u.attack,l),await t(a,o.knee,u.knee,l),await t(a,o.ratio,u.ratio,l),await t(a,o.release,u.release,l),await t(a,o.threshold,u.threshold,l)):(await s(a,o.attack,u.attack,l),await s(a,o.knee,u.knee,l),await s(a,o.ratio,u.ratio,l),await s(a,o.release,u.release,l),await s(a,o.threshold,u.threshold,l)),await i(o,a,u,l),u})(o,a,l)}}})(Ks,bi,rn,ti,Os),bi,Jn,Ds,Ps,ai),xi=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=i(t),l={...Dn,...o},u=s(a,l),c=r(a);super(t,!1,u,c?n():null),this._gain=e(this,c,u.gain,Le,je)}get gain(){return this._gain}})(Ls,ni,((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a,l){const u=r.get(a);return void 0!==u?Promise.resolve(u):(async(o,a,l)=>{let u=n(o);const c=Ne(u,a);if(!c){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(a,t)}return r.set(a,u),c?await t(a,o.gain,u.gain,l):await s(a,o.gain,u.gain,l),await i(o,a,u,l),u})(o,a,l)}}})(Ks,Hn,rn,ti,Os),Hn,Ds,Ps),ki=((t,e,n,s)=>(i,r,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:u,feedforward:c})=>{const h=Wn(r,i.sampleRate),d=u instanceof Float64Array?u:new Float64Array(u),p=c instanceof Float64Array?c:new Float64Array(c),f=d.length,m=p.length,g=Math.min(f,m);if(0===f||f>20)throw s();if(0===d[0])throw e();if(0===m||m>20)throw s();if(0===p[0])throw e();if(1!==d[0]){for(let t=0;t<m;t+=1)p[t]/=d[0];for(let t=1;t<f;t+=1)d[t]/=d[0]}const _=n(i,h,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=l;const y=[],v=[],b=[];for(let t=0;t<o;t+=1){y.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),v.push(t),b.push(e)}_.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,s=e.numberOfChannels;for(let t=0;t<s;t+=1){const s=e.getChannelData(t),i=n.getChannelData(t);y[t]=Nn(d,f,p,m,g,v[t],b[t],y[t],32,s,i)}};const w=i.sampleRate/2;return Qn({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(t){_.channelCount=t},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){_.channelCountMode=t},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(t){_.channelInterpretation=t},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener:(...t)=>_.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>_.dispatchEvent(t[0]),getFrequencyResponse(e,n,s){if(e.length!==n.length||n.length!==s.length)throw t();const i=e.length;for(let t=0;t<i;t+=1){const i=-Math.PI*(e[t]/w),r=[Math.cos(i),Math.sin(i)],o=Yn(Zn(p,r),Zn(d,r));n[t]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s[t]=Math.atan2(o[1],o[0])}},removeEventListener:(...t)=>_.removeEventListener(t[0],t[1],t[2])},_)})(Rn,Mn,Kn,Jn),Si=((t,e,n,s)=>i=>t(qn,(()=>qn(i)))?Promise.resolve(t(s,s)).then((t=>{if(!t){const t=n(i,512,0,1);i.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>i.currentTime,t.connect(i.destination)}return i.startRendering()})):new Promise((t=>{const n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()})))(xs,Hn,Kn,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((t=>{n.oncomplete=()=>{s.disconnect(),t(0!==n.currentTime)},n.startRendering()}))})(Hn,Rs)),Ti=((t,e,n,s,i)=>(r,o)=>{const a=new WeakMap;let l=null;return{render(u,c,h){const d=a.get(c);return void 0!==d?Promise.resolve(d):(async(u,c,h)=>{let d=null,p=e(u);const f=Ne(p,c);if(void 0===c.createIIRFilter?d=t(c,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(p=c.createIIRFilter(o,r)),a.set(c,null===d?p:d),null!==d){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(u.context.destination.channelCount,u.context.length,c.sampleRate);l=(async()=>(await s(u,t,t.destination,h),((t,e,n,s)=>{const i=n instanceof Float64Array?n:new Float64Array(n),r=s instanceof Float64Array?s:new Float64Array(s),o=i.length,a=r.length,l=Math.min(o,a);if(1!==i[0]){for(let t=0;t<o;t+=1)r[t]/=i[0];for(let t=1;t<a;t+=1)i[t]/=i[0]}const u=new Float32Array(32),c=new Float32Array(32),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels;for(let e=0;e<d;e+=1){const n=t.getChannelData(e),s=h.getChannelData(e);u.fill(0),c.fill(0),Nn(i,o,r,a,l,u,c,0,32,n,s)}return h})(await i(t),c,r,o)))()}const t=await l;return d.buffer=t,d.start(0),d}return await s(u,c,p,h),p})(u,c,h)}}})(Js,rn,Rs,Os,Si),Ci=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=s(t),l=i(a),u={...Pn,...o},c=e(a,l?null:t.baseLatency,u);super(t,!1,c,l?n(u.feedback,u.feedforward):null),(t=>{var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,(n,s,i)=>{if(n.length!==s.length||s.length!==i.length)throw Rn();return e.call(t,n,s,i)})})(c),this._nativeIIRFilterNode=c,r(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(Ls,(t=>(e,n,s)=>{if(void 0===e.createIIRFilter)return t(e,n,s);const i=e.createIIRFilter(s.feedforward,s.feedback);return Vn(i,s),i})(ki),Ti,Ds,Ps,ai),Ei=((t,e,n,s,i)=>(r,o)=>{const a=o.listener,{forwardX:l,forwardY:u,forwardZ:c,positionX:h,positionY:d,positionZ:p,upX:f,upY:m,upZ:g}=void 0===a.forwardX?(()=>{const l=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),u=i(o),c=s(o,256,9,0),h=(e,s)=>{const i=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:s});return i.connect(l,0,e),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:()=>s}),t({context:r},u,i.offset,Le,je)};let d=[0,0,-1,0,1,0],p=[0,0,0];return c.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0],t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];e.some(((t,e)=>t!==d[e]))&&(a.setOrientation(...e),d=e);const n=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];n.some(((t,e)=>t!==p[e]))&&(a.setPosition(...n),p=n)},l.connect(c),{forwardX:h(0,0),forwardY:h(1,0),forwardZ:h(2,-1),positionX:h(6,0),positionY:h(7,0),positionZ:h(8,0),upX:h(3,0),upY:h(4,1),upZ:h(5,0)}})():a;return{get forwardX(){return l},get forwardY(){return u},get forwardZ(){return c},get positionX(){return h},get positionY(){return d},get positionZ(){return p},get upX(){return f},get upY(){return m},get upZ(){return g}}})(ni,hi,mi,Kn,Ps),Oi=new WeakMap,Ai=((t,e,n,s,i,r)=>class extends n{constructor(n,r){super(n),this._nativeContext=n,me.set(this,n),s(n)&&i.set(n,new Set),this._destination=new t(this,r),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?r(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(ri,Ei,Is,Ps,Oi,gs),Di=((t,e,n,s,i,r)=>(o,a)=>{const l=o.createOscillator();return Vn(l,a),Ln(l,a,"detune"),Ln(l,a,"frequency"),void 0!==a.periodicWave?l.setPeriodicWave(a.periodicWave):Fn(l,a,"type"),e(n,(()=>n(o)))||zn(l),e(s,(()=>s(o)))||r(l,o),e(i,(()=>i(o)))||Bn(l),t(o,l),l})(Xs,xs,cs,hs,ds,ms),Mi=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null,l=null;return{set periodicWave(t){o=t},set start(t){a=t},set stop(t){l=t},render(u,c,h){const d=r.get(c);return void 0!==d?Promise.resolve(d):(async(u,c,h)=>{let d=n(u);const p=Ne(d,c);if(!p){const t={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===o?void 0:o,type:d.type};d=e(c,t),null!==a&&d.start(a),null!==l&&d.stop(l)}return r.set(c,d),p?(await t(c,u.detune,d.detune,h),await t(c,u.frequency,d.frequency,h)):(await s(c,u.detune,d.detune,h),await s(c,u.frequency,d.frequency,h)),await i(u,c,d,h),d})(u,c,h)}}})(Ks,Di,rn,ti,Os),Ri=((t,e,n,s,i,r,o)=>class extends t{constructor(t,o){const a=i(t),l={...es,...o},u=n(a,l),c=r(a),h=c?s():null,d=t.sampleRate/2;super(t,!1,u,h),this._detune=e(this,c,u.detune,153600,-153600),this._frequency=e(this,c,u.frequency,d,-d),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"==typeof t?o(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){Ae(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),ze(this)&&Me(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(Ls,ni,Di,Mi,Ds,Ps,gs),Pi=(t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}})(Js),Ni=((t,e,n,s,i)=>(r,{curve:o,oversample:a,...l})=>{const u=r.createWaveShaper(),c=r.createWaveShaper();Vn(u,l),Vn(c,l);const h=n(r,{...l,gain:1}),d=n(r,{...l,gain:-1}),p=n(r,{...l,gain:1}),f=n(r,{...l,gain:-1});let m=null,g=!1,_=null;const y={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(t){h.channelCount=t,d.channelCount=t,u.channelCount=t,p.channelCount=t,c.channelCount=t,f.channelCount=t},get channelCountMode(){return u.channelCountMode},set channelCountMode(t){h.channelCountMode=t,d.channelCountMode=t,u.channelCountMode=t,p.channelCountMode=t,c.channelCountMode=t,f.channelCountMode=t},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t,d.channelInterpretation=t,u.channelInterpretation=t,p.channelInterpretation=t,c.channelInterpretation=t,f.channelInterpretation=t},get context(){return u.context},get curve(){return _},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)u.curve=n,c.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),s=new Float32Array(t+2-t%2);e[0]=n[0],s[0]=-n[t-1];const i=Math.ceil((t+1)/2),r=(t+1)/2-1;for(let o=1;o<i;o+=1){const a=o/i*r,l=Math.floor(a),u=Math.ceil(a);e[o]=l===u?n[l]:(1-(a-l))*n[l]+(1-(u-a))*n[u],s[o]=l===u?-n[t-1-l]:-(1-(a-l))*n[t-1-l]-(1-(u-a))*n[t-1-u]}e[i]=t%2==1?n[i-1]:(n[i-2]+n[i-1])/2,u.curve=e,c.curve=s}_=n,g&&(s(_)&&null===m?m=t(r,h):null!==m&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(t){u.oversample=t,c.oversample=t},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])};return null!==o&&(y.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==y.oversample&&(y.oversample=a),i(Qn(y,p),(()=>{h.connect(u).connect(p),h.connect(d).connect(c).connect(f).connect(p),g=!0,s(_)&&(m=t(r,h))}),(()=>{h.disconnect(u),u.disconnect(p),h.disconnect(d),d.disconnect(c),c.disconnect(f),f.disconnect(p),g=!1,null!==m&&(m(),m=null)}))})(Pi,Mn,Hn,as,ui),Ii=((t,e,n,s,i,r,o)=>(a,l)=>{const u=a.createWaveShaper();if(null!==r&&"webkitAudioContext"===r.name&&void 0===a.createGain().gain.automationRate)return n(a,l);Vn(u,l);const c=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==c&&c.length<2)throw e();Fn(u,{curve:c},"curve"),Fn(u,l,"oversample");let h=null,d=!1;return o(u,"curve",(t=>()=>t.call(u)),(e=>n=>(e.call(u,n),d&&(s(n)&&null===h?h=t(a,u):s(n)||null===h||(h(),h=null)),n))),i(u,(()=>{d=!0,s(u.curve)&&(h=t(a,u))}),(()=>{d=!1,null!==h&&(h(),h=null)}))})(Pi,Mn,Ni,as,ui,qs,ls),qi=(Tr=((t,e,n,s,i,r,o,a,l)=>(u,{coneInnerAngle:c,coneOuterAngle:h,coneOuterGain:d,distanceModel:p,maxDistance:f,orientationX:m,orientationY:g,orientationZ:_,panningModel:y,positionX:v,positionY:b,positionZ:w,refDistance:x,rolloffFactor:k,...S})=>{const T=u.createPanner();if(S.channelCount>2)throw o();if("max"===S.channelCountMode)throw o();Vn(T,S);const C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},E=n(u,{...C,channelInterpretation:"speakers",numberOfInputs:6}),O=s(u,{...S,gain:1}),A=s(u,{...C,gain:1}),D=s(u,{...C,gain:0}),M=s(u,{...C,gain:0}),R=s(u,{...C,gain:0}),P=s(u,{...C,gain:0}),N=s(u,{...C,gain:0}),I=i(u,256,6,1),q=r(u,{...C,curve:new Float32Array([1,1]),oversample:"none"});let F=[m,g,_],V=[v,b,w];I.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0]];e.some(((t,e)=>t!==F[e]))&&(T.setOrientation(...e),F=e);const n=[t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];n.some(((t,e)=>t!==V[e]))&&(T.setPosition(...n),V=n)},Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0});const j={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(t){if(t>2)throw o();O.channelCount=t,T.channelCount=t},get channelCountMode(){return T.channelCountMode},set channelCountMode(t){if("max"===t)throw o();O.channelCountMode=t,T.channelCountMode=t},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(t){O.channelInterpretation=t,T.channelInterpretation=t},get coneInnerAngle(){return T.coneInnerAngle},set coneInnerAngle(t){T.coneInnerAngle=t},get coneOuterAngle(){return T.coneOuterAngle},set coneOuterAngle(t){T.coneOuterAngle=t},get coneOuterGain(){return T.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();T.coneOuterGain=t},get context(){return T.context},get distanceModel(){return T.distanceModel},set distanceModel(t){T.distanceModel=t},get inputs(){return[O]},get maxDistance(){return T.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;T.maxDistance=t},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get orientationX(){return A.gain},get orientationY(){return D.gain},get orientationZ(){return M.gain},get panningModel(){return T.panningModel},set panningModel(t){T.panningModel=t},get positionX(){return R.gain},get positionY(){return P.gain},get positionZ(){return N.gain},get refDistance(){return T.refDistance},set refDistance(t){if(t<0)throw new RangeError;T.refDistance=t},get rolloffFactor(){return T.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;T.rolloffFactor=t},addEventListener:(...t)=>O.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>O.dispatchEvent(t[0]),removeEventListener:(...t)=>O.removeEventListener(t[0],t[1],t[2])};return c!==j.coneInnerAngle&&(j.coneInnerAngle=c),h!==j.coneOuterAngle&&(j.coneOuterAngle=h),d!==j.coneOuterGain&&(j.coneOuterGain=d),p!==j.distanceModel&&(j.distanceModel=p),f!==j.maxDistance&&(j.maxDistance=f),m!==j.orientationX.value&&(j.orientationX.value=m),g!==j.orientationY.value&&(j.orientationY.value=g),_!==j.orientationZ.value&&(j.orientationZ.value=_),y!==j.panningModel&&(j.panningModel=y),v!==j.positionX.value&&(j.positionX.value=v),b!==j.positionY.value&&(j.positionY.value=b),w!==j.positionZ.value&&(j.positionZ.value=w),x!==j.refDistance&&(j.refDistance=x),k!==j.rolloffFactor&&(j.rolloffFactor=k),1===F[0]&&0===F[1]&&0===F[2]||T.setOrientation(...F),0===V[0]&&0===V[1]&&0===V[2]||T.setPosition(...V),l(Qn(j,T),(()=>{O.connect(T),t(O,q,0,0),q.connect(A).connect(E,0,0),q.connect(D).connect(E,0,1),q.connect(M).connect(E,0,2),q.connect(R).connect(E,0,3),q.connect(P).connect(E,0,4),q.connect(N).connect(E,0,5),E.connect(I).connect(u.destination)}),(()=>{O.disconnect(T),a(O,q,0,0),q.disconnect(A),A.disconnect(E),q.disconnect(D),D.disconnect(E),q.disconnect(M),M.disconnect(E),q.disconnect(R),R.disconnect(E),q.disconnect(P),P.disconnect(E),q.disconnect(N),N.disconnect(E),E.disconnect(I),I.disconnect(u.destination)}))})(Je,Mn,hi,Hn,Kn,Ii,Jn,sn,ui),(t,e)=>{const n=t.createPanner();return void 0===n.orientationX?Tr(t,e):(Vn(n,e),Ln(n,e,"orientationX"),Ln(n,e,"orientationY"),Ln(n,e,"orientationZ"),Ln(n,e,"positionX"),Ln(n,e,"positionY"),Ln(n,e,"positionZ"),Fn(n,e,"coneInnerAngle"),Fn(n,e,"coneOuterAngle"),Fn(n,e,"coneOuterGain"),Fn(n,e,"distanceModel"),Fn(n,e,"maxDistance"),Fn(n,e,"panningModel"),Fn(n,e,"refDistance"),Fn(n,e,"rolloffFactor"),n)}),Fi=((t,e,n,s,i,r,o,a,l,u)=>()=>{const c=new WeakMap;let h=null;return{render(d,p,f){const m=c.get(p);return void 0!==m?Promise.resolve(m):(async(d,p,f)=>{let m=null,g=r(d);const _={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},y={..._,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},v=Ne(g,p);if("bufferSize"in g)m=s(p,{..._,gain:1});else if(!v){const t={...y,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=i(p,t)}if(c.set(p,null===m?g:m),null!==m){if(null===h){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new o(6,d.context.length,p.sampleRate),s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});s.connect(t.destination),h=(async()=>{const e=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map((async(e,s)=>{const i=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===s?1:0});return await a(t,e,i.offset,f),i})));for(let t=0;t<6;t+=1)e[t].connect(s,0,t),e[t].start(0);return u(t)})()}const t=await h,r=s(p,{..._,gain:1});await l(d,p,r,f);const c=[];for(let e=0;e<t.numberOfChannels;e+=1)c.push(t.getChannelData(e));let g=[c[0][0],c[1][0],c[2][0]],v=[c[3][0],c[4][0],c[5][0]],b=s(p,{..._,gain:1}),w=i(p,{...y,orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:v[0],positionY:v[1],positionZ:v[2]});r.connect(b).connect(w.inputs[0]),w.connect(m);for(let e=128;e<t.length;e+=128){const t=[c[0][e],c[1][e],c[2][e]],n=[c[3][e],c[4][e],c[5][e]];if(t.some(((t,e)=>t!==g[e]))||n.some(((t,e)=>t!==v[e]))){g=t,v=n;const o=e/p.sampleRate;b.gain.setValueAtTime(0,o),b=s(p,{..._,gain:0}),w=i(p,{...y,orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:v[0],positionY:v[1],positionZ:v[2]}),b.gain.setValueAtTime(1,o),r.connect(b).connect(w.inputs[0]),w.connect(m)}}return m}return v?(await t(p,d.orientationX,g.orientationX,f),await t(p,d.orientationY,g.orientationY,f),await t(p,d.orientationZ,g.orientationZ,f),await t(p,d.positionX,g.positionX,f),await t(p,d.positionY,g.positionY,f),await t(p,d.positionZ,g.positionZ,f)):(await a(p,d.orientationX,g.orientationX,f),await a(p,d.orientationY,g.orientationY,f),await a(p,d.orientationZ,g.orientationZ,f),await a(p,d.positionX,g.positionX,f),await a(p,d.positionY,g.positionY,f),await a(p,d.positionZ,g.positionZ,f)),Ke(g)?await l(d,p,g.inputs[0],f):await l(d,p,g,f),g})(d,p,f)}}})(Ks,hi,mi,Hn,qi,rn,Rs,ti,Os,Si),Vi=((t,e,n,s,i,r,o)=>class extends t{constructor(t,a){const l=i(t),u={...ns,...a},c=n(l,u),h=r(l);super(t,!1,c,h?s():null),this._nativePannerNode=c,this._orientationX=e(this,h,c.orientationX,Le,je),this._orientationY=e(this,h,c.orientationY,Le,je),this._orientationZ=e(this,h,c.orientationZ,Le,je),this._positionX=e(this,h,c.positionX,Le,je),this._positionY=e(this,h,c.positionY,Le,je),this._positionZ=e(this,h,c.positionZ,Le,je),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(Ls,ni,qi,Fi,Ds,Ps,ai),ji=((t,e,n,s)=>class s{constructor(s,i){const r=e(s),o=(t=>{const{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,(()=>0))}:{...t,imag:e,real:n}})({...ss,...i}),a=t(r,o);return n.add(a),a}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===s.prototype||n.has(t)}})((t=>(e,{disableNormalization:n,imag:s,real:i})=>{const r=s instanceof Float32Array?s:new Float32Array(s),o=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(o,r,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a})(qe),Ds,new WeakSet),Li=((t,e)=>(n,s)=>{const i=s.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,s);const r=n.createStereoPanner();return Vn(r,s),Ln(r,s,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>i,set:t=>{if(t!==i)throw e()}}),r})(((t,e,n,s,i,r)=>{const o=16385,a=new Float32Array([1,1]),l=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c={...u,oversample:"none"},h=(t,r,h,d,p)=>{if(1===r)return((t,e,i,r)=>{const h=new Float32Array(o),d=new Float32Array(o);for(let t=0;t<o;t+=1){const e=t/16384*l;h[t]=Math.cos(e),d[t]=Math.sin(e)}const p=n(t,{...u,gain:0}),f=s(t,{...c,curve:h}),m=s(t,{...c,curve:a}),g=n(t,{...u,gain:0}),_=s(t,{...c,curve:d});return{connectGraph(){e.connect(p),e.connect(void 0===m.inputs?m:m.inputs[0]),e.connect(g),m.connect(i),i.connect(void 0===f.inputs?f:f.inputs[0]),i.connect(void 0===_.inputs?_:_.inputs[0]),f.connect(p.gain),_.connect(g.gain),p.connect(r,0,0),g.connect(r,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===m.inputs?m:m.inputs[0]),e.disconnect(g),m.disconnect(i),i.disconnect(void 0===f.inputs?f:f.inputs[0]),i.disconnect(void 0===_.inputs?_:_.inputs[0]),f.disconnect(p.gain),_.disconnect(g.gain),p.disconnect(r,0,0),g.disconnect(r,0,1)}}})(t,h,d,p);if(2===r)return((t,i,r,h)=>{const d=new Float32Array(o),p=new Float32Array(o),f=new Float32Array(o),m=new Float32Array(o),g=Math.floor(8192.5);for(let t=0;t<o;t+=1)if(t>g){const e=(t-g)/(16384-g)*l;d[t]=Math.cos(e),p[t]=Math.sin(e),f[t]=0,m[t]=1}else{const e=t/(16384-g)*l;d[t]=1,p[t]=0,f[t]=Math.cos(e),m[t]=Math.sin(e)}const _=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(t,{...u,gain:0}),v=s(t,{...c,curve:d}),b=n(t,{...u,gain:0}),w=s(t,{...c,curve:p}),x=s(t,{...c,curve:a}),k=n(t,{...u,gain:0}),S=s(t,{...c,curve:f}),T=n(t,{...u,gain:0}),C=s(t,{...c,curve:m});return{connectGraph(){i.connect(_),i.connect(void 0===x.inputs?x:x.inputs[0]),_.connect(y,0),_.connect(b,0),_.connect(k,1),_.connect(T,1),x.connect(r),r.connect(void 0===v.inputs?v:v.inputs[0]),r.connect(void 0===w.inputs?w:w.inputs[0]),r.connect(void 0===S.inputs?S:S.inputs[0]),r.connect(void 0===C.inputs?C:C.inputs[0]),v.connect(y.gain),w.connect(b.gain),S.connect(k.gain),C.connect(T.gain),y.connect(h,0,0),k.connect(h,0,0),b.connect(h,0,1),T.connect(h,0,1)},disconnectGraph(){i.disconnect(_),i.disconnect(void 0===x.inputs?x:x.inputs[0]),_.disconnect(y,0),_.disconnect(b,0),_.disconnect(k,1),_.disconnect(T,1),x.disconnect(r),r.disconnect(void 0===v.inputs?v:v.inputs[0]),r.disconnect(void 0===w.inputs?w:w.inputs[0]),r.disconnect(void 0===S.inputs?S:S.inputs[0]),r.disconnect(void 0===C.inputs?C:C.inputs[0]),v.disconnect(y.gain),w.disconnect(b.gain),S.disconnect(k.gain),C.disconnect(T.gain),y.disconnect(h,0,0),k.disconnect(h,0,0),b.disconnect(h,0,1),T.disconnect(h,0,1)}}})(t,h,d,p);throw i()};return(e,{channelCount:s,channelCountMode:o,pan:a,...l})=>{if("max"===o)throw i();const u=t(e,{...l,channelCount:1,channelCountMode:o,numberOfInputs:2}),c=n(e,{...l,channelCount:s,channelCountMode:o,gain:1}),d=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a});let{connectGraph:p,disconnectGraph:f}=h(e,s,c,d,u);Object.defineProperty(d.gain,"defaultValue",{get:()=>0}),Object.defineProperty(d.gain,"maxValue",{get:()=>1}),Object.defineProperty(d.gain,"minValue",{get:()=>-1});const m={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount!==t&&(g&&f(),({connectGraph:p,disconnectGraph:f}=h(e,t,c,d,u)),g&&p()),c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){return[c]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get pan(){return d.gain},addEventListener:(...t)=>c.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>c.dispatchEvent(t[0]),removeEventListener:(...t)=>c.removeEventListener(t[0],t[1],t[2])};let g=!1;return r(Qn(m,u),(()=>{p(),g=!0}),(()=>{f(),g=!1}))}})(hi,$n,Hn,Ii,Jn,ui),Jn),zi=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a,l){const u=r.get(a);return void 0!==u?Promise.resolve(u):(async(o,a,l)=>{let u=n(o);const c=Ne(u,a);if(!c){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(a,t)}return r.set(a,u),c?await t(a,o.pan,u.pan,l):await s(a,o.pan,u.pan,l),Ke(u)?await i(o,a,u.inputs[0],l):await i(o,a,u,l),u})(o,a,l)}}})(Ks,Li,rn,ti,Os),Bi=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=i(t),l={...is,...o},u=n(a,l),c=r(a);super(t,!1,u,c?s():null),this._pan=e(this,c,u.pan)}get pan(){return this._pan}})(Ls,ni,Li,zi,Ds,Ps),Wi=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r,o){const a=s.get(r);return void 0!==a?Promise.resolve(a):(async(i,r,o)=>{let a=e(i);if(!Ne(a,r)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(r,e)}return s.set(r,a),Ke(a)?await n(i,r,a.inputs[0],o):await n(i,r,a,o),a})(i,r,o)}}})(Ii,rn,Os),Ui=((t,e,n,s,i,r,o)=>class extends t{constructor(t,e){const a=i(t),l={...os,...e},u=n(a,l);super(t,!0,u,r(a)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(Ls,Mn,Ii,Wi,Ds,Ps,ai),$i=(t=>null!==t&&t.isSecureContext)(Ts),Qi=(t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return s()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(Ts),Gi=new WeakMap,Hi=((t,e)=>n=>{let s=t.get(n);if(void 0!==s)return s;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s})(Gi,Rs),Yi=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(Ts),Xi=$i?((t,e,n,s,i,r,o,a,l,u,c,h,d)=>(p,f,m={credentials:"omit"})=>{const g=r(p);if(void 0!==g.audioWorklet)return Promise.all([i(f),Promise.resolve(t(h,h))]).then((([[t,e],n])=>{const[s,i]=xe(t,e),r=new Blob([`${s};((AudioWorkletProcessor,registerProcessor)=>{${i}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),u=URL.createObjectURL(r);return g.audioWorklet.addModule(u,m).then((()=>{if(a(g))return g;const t=o(g);return t.audioWorklet.addModule(u,m).then((()=>t))})).then((t=>{if(null===l)throw new SyntaxError;try{new l(t,"__sac")}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(u)))}));const _=c.get(p);if(void 0!==_&&_.has(f))return Promise.resolve();const y=u.get(p);if(void 0!==y){const t=y.get(f);if(void 0!==t)return t}const v=i(f).then((([t,e])=>{const[s,i]=xe(t,e);return n(`${s};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${i}\n})})(window,'_AWGS')`)})).then((()=>{const t=d._AWGS.pop();if(void 0===t)throw new SyntaxError;s(g.currentTime,g.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const s=ye.get(g);if(void 0!==s){if(s.has(t))throw e();Se(n),ke(n.parameterDescriptors),s.set(t,n)}else Se(n),ke(n.parameterDescriptors),ye.set(g,new Map([[t,n]]))}),g.sampleRate,void 0,void 0)))}));return void 0===y?u.set(p,new Map([[f,v]])):y.set(f,v),v.then((()=>{const t=c.get(p);void 0===t?c.set(p,new Set([f])):t.add(f)})).finally((()=>{const t=u.get(p);void 0!==t&&t.delete(f)})),v})(xs,Jn,(t=>e=>new Promise(((n,s)=>{if(null===t)return void s(new SyntaxError);const i=t.document.head;if(null===i)s(new SyntaxError);else{const r=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,u=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(e,n,i,r,o)=>n===a||n===t.location.href&&1===i&&1===r?(u(),s(o),!1):null!==l?l(e,n,i,r,o):void 0,r.onerror=()=>{u(),s(new SyntaxError)},r.onload=()=>{u(),n()},r.src=a,r.type="module",i.appendChild(r)}})))(Ts),Qi,(async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw new DOMException("","AbortError")}),Ds,Hi,Ps,Yi,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(n);let r=!1,o=!1;try{await s.audioWorklet.addModule(i);const e=new t(s,"a",{numberOfOutputs:0}),n=s.createOscillator();e.port.onmessage=()=>r=!0,e.onprocessorerror=()=>o=!0,n.connect(e),n.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(i)}return r&&!o})(Yi,Rs),Ts):void 0,Zi=((t,e)=>n=>t(n)||e(n))(Fs,Ps),Ki=((t,e,n,s,i,r,o,a,l,u,c,h,d,p,f,m,g,_,y,v)=>class extends f{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(t,e,s){return new n({length:e,numberOfChannels:t,sampleRate:s})}createBufferSource(){return new s(this)}createChannelMerger(t=6){return new r(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new o(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(t=1){return new c(this,{maxDelayTime:t})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(t,e){return new p(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new _(this,{...n,imag:e,real:t})}createStereoPanner(){return new y(this)}createWaveShaper(){return new v(this)}decodeAudioData(t,e,n){return u(this._nativeContext,t).then((t=>("function"==typeof e&&e(t),t)),(t=>{throw"function"==typeof n&&n(t),t}))}})(Xi,Bs,Ys,ii,li,di,pi,gi,yi,((t,e,n,s,i,r,o,a,l,u,c)=>(n,s)=>{const h=o(n)?n:r(n);if(i.has(s)){const t=new DOMException("","DataCloneError");return Promise.reject(t)}try{i.add(s)}catch{}return e(l,(()=>l(h)))?h.decodeAudioData(s).then((n=>(Cn(s).catch((()=>{})),e(a,(()=>a(n)))||c(n),t.add(n),n))):new Promise(((e,n)=>{const i=async()=>{try{await Cn(s)}catch{}},r=t=>{n(t),i()};try{h.decodeAudioData(s,(n=>{"function"!=typeof n.copyFromChannel&&(u(n),Fe(n)),t.add(n),i().then((()=>e(n)))}),(t=>{r(null===t?new DOMException("","EncodingError"):t)}))}catch(t){r(t)}}))})(Ws,xs,0,0,new WeakSet,Ds,Zi,Ie,qn,Gs,Hs),vi,wi,xi,Ci,Ai,Ri,Vi,ji,Bi,Ui),Ji=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t),r=((t,e)=>t.createMediaElementSource(e.mediaElement))(i,e);if(s(i))throw TypeError();super(t,!0,r,null),this._nativeMediaElementAudioSourceNode=r}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Ls,0,Ds,Ps),tr=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t);if(s(i))throw new TypeError;const r=((t,e)=>{const n=t.createMediaStreamDestination();return Vn(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n})(i,{...In,...e});super(t,!1,r,null),this._nativeMediaStreamAudioDestinationNode=r}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Ls,0,Ds,Ps),er=((t,e,n,s)=>class extends t{constructor(t,e){const i=n(t),r=((t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort(((t,e)=>t.id<e.id?-1:t.id>e.id?1:0));const s=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:e}),i})(i,e);if(s(i))throw new TypeError;super(t,!0,r,null),this._nativeMediaStreamAudioSourceNode=r}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Ls,0,Ds,Ps),nr=((t,e,n)=>class extends t{constructor(t,s){const i=n(t);super(t,!0,e(i,s),null)}})(Ls,((t,e)=>(n,{mediaStreamTrack:s})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(s);const i=new MediaStream([s]),r=n.createMediaStreamSource(i);if("audio"!==s.kind)throw t();if(e(n))throw new TypeError;return r})(Mn,Ps),Ds),sr=((t,e,n,s,i,r,o,a,l)=>class extends t{constructor(t={}){if(null===l)throw new Error("Missing the native AudioContext constructor.");let e;try{e=new l(t)}catch(t){if(12===t.code&&"sampleRate is not in range"===t.message)throw n();throw t}if(null===e)throw s();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:i}=t,{sampleRate:r}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===i?512/r:"interactive"===i||void 0===i?256/r:"playback"===i?1024/r:128*Math.max(2,Math.min(128,Math.round(i*r/128)))/r,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Qe(this)})))}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(Ki,Mn,Jn,rs,Ji,tr,er,nr,qs),ir=(t=>e=>{const n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(Oi),rr=(t=>(e,n)=>{t(e).add(n)})(ir),or=(t=>(e,n,s=0,i=0)=>{const r=e[s];if(void 0===r)throw t();return hn(n)?r.connect(n,0,i):r.connect(n,0)})(qe),ar=(t=>(e,n)=>{t(e).delete(n)})(ir),lr=(t=>(e,n,s,i=0)=>void 0===n?e.forEach((t=>t.disconnect())):"number"==typeof n?On(t,e,n).disconnect():hn(n)?void 0===s?e.forEach((t=>t.disconnect(n))):void 0===i?On(t,e,s).disconnect(n,0):On(t,e,s).disconnect(n,0,i):void 0===s?e.forEach((t=>t.disconnect(n))):On(t,e,s).disconnect(n,0))(qe),ur=new WeakMap,cr=((t,e)=>n=>e(t,n))(ur,Te),hr=((t,e,n,s,i,r,o,a,l,u,c,h,d)=>(p,f,m,g)=>{if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw l();const _=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(_.some((t=>t<1)))throw l();if(_.length!==g.numberOfOutputs)throw e();if("explicit"!==g.channelCountMode)throw l();const y=g.channelCount*g.numberOfInputs,v=_.reduce(((t,e)=>t+e),0),b=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(y+b>6||v>6)throw l();const w=new MessageChannel,x=[],k=[];for(let t=0;t<g.numberOfInputs;t+=1)x.push(o(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),k.push(i(p,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const S=[];if(void 0!==m.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:s}of m.parameterDescriptors){const i=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[s]?g.parameterData[s]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?Le:e},minValue:{get:()=>void 0===n?je:n}}),S.push(i)}const T=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+b)}),C=Wn(f,p.sampleRate),E=a(p,C,y+b,Math.max(1,v)),O=i(p,{channelCount:Math.max(1,v),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,v)}),A=[];for(let t=0;t<g.numberOfOutputs;t+=1)A.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[t]}));for(let t=0;t<g.numberOfInputs;t+=1){x[t].connect(k[t]);for(let e=0;e<g.channelCount;e+=1)k[t].connect(T,e,t*g.channelCount+e)}const D=new mn(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map((({name:t},e)=>{const n=S[e];return n.connect(T,0,y+e),n.start(0),[t,n.offset]})));T.connect(E);let M=g.channelInterpretation,R=null;const P=0===g.numberOfOutputs?[E]:A,N={get bufferSize(){return C},get channelCount(){return g.channelCount},set channelCount(t){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return M},set channelInterpretation(t){for(const e of x)e.channelInterpretation=t;M=t},get context(){return E.context},get inputs(){return x},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(t){"function"==typeof R&&N.removeEventListener("processorerror",R),R="function"==typeof t?t:null,"function"==typeof R&&N.addEventListener("processorerror",R)},get parameters(){return D},get port(){return w.port2},addEventListener:(...t)=>E.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,P),disconnect:u.bind(null,P),dispatchEvent:(...t)=>E.dispatchEvent(t[0]),removeEventListener:(...t)=>E.removeEventListener(t[0],t[1],t[2])},I=new Map;var q,F;w.port1.addEventListener=(q=w.port1.addEventListener,(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=I.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{c(p.currentTime,p.sampleRate,(()=>e(t)))},I.set(e,t[1]))}}return q.call(w.port1,t[0],t[1],t[2])}),w.port1.removeEventListener=(F=w.port1.removeEventListener,(...t)=>{if("message"===t[0]){const e=I.get(t[1]);void 0!==e&&(I.delete(t[1]),t[1]=e)}return F.call(w.port1,t[0],t[1],t[2])});let V=null;Object.defineProperty(w.port1,"onmessage",{get:()=>V,set:t=>{"function"==typeof V&&w.port1.removeEventListener("message",V),V="function"==typeof t?t:null,"function"==typeof V&&(w.port1.addEventListener("message",V),w.port1.start())}}),m.prototype.port=w.port1;let j=null;((t,e,n,s)=>{let i=ve.get(t);void 0===i&&(i=new WeakMap,ve.set(t,i));const r=(async(t,e)=>new t(await(t=>new Promise(((e,n)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=({data:t})=>{s.close(),i.close(),e(t)},s.onmessageerror=({data:t})=>{s.close(),i.close(),n(t)},i.postMessage(t)})))(e)))(n,s);return i.set(e,r),r})(p,N,m,g).then((t=>j=t));const L=vn(g.numberOfInputs,g.channelCount),z=vn(g.numberOfOutputs,_),B=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce(((t,{name:e})=>({...t,[e]:new Float32Array(128)})),{});let W=!0;const U=()=>{g.numberOfOutputs>0&&E.disconnect(O);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){const n=A[t];for(let s=0;s<_[t];s+=1)O.disconnect(n,e+s,s);e+=_[t]}},$=new Map;E.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==j){const n=h(N);for(let s=0;s<C;s+=128){for(let e=0;e<g.numberOfInputs;e+=1)for(let n=0;n<g.channelCount;n+=1)_n(t,L[e],n,n,s);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach((({name:e},n)=>{_n(t,B,e,y+n,s)}));for(let t=0;t<g.numberOfInputs;t+=1)for(let e=0;e<_[t];e+=1)0===z[t][e].byteLength&&(z[t][e]=new Float32Array(128));try{const t=L.map(((t,e)=>{if(n[e].size>0)return $.set(e,C/128),t;const s=$.get(e);return void 0===s?[]:(t.every((t=>t.every((t=>0===t))))&&(1===s?$.delete(e):$.set(e,s-1)),t)})),i=c(p.currentTime+s/p.sampleRate,p.sampleRate,(()=>j.process(t,z,B)));W=i;for(let t=0,n=0;t<g.numberOfOutputs;t+=1){for(let i=0;i<_[t];i+=1)yn(e,z[t],i,n+i,s);n+=_[t]}}catch(t){W=!1,N.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!W){for(let t=0;t<g.numberOfInputs;t+=1){x[t].disconnect(k[t]);for(let e=0;e<g.channelCount;e+=1)k[s].disconnect(T,e,t*g.channelCount+e)}if(void 0!==m.parameterDescriptors){const t=m.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=S[e];t.disconnect(T,0,y+e),t.stop()}}T.disconnect(E),E.onaudioprocess=null,Q?U():Y();break}}}};let Q=!1;const G=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),H=()=>E.connect(G).connect(p.destination),Y=()=>{E.disconnect(G),G.disconnect()};return H(),d(N,(()=>{if(W){Y(),g.numberOfOutputs>0&&E.connect(O);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){const n=A[t];for(let s=0;s<_[t];s+=1)O.connect(n,e+s,s);e+=_[t]}}Q=!0}),(()=>{W&&(H(),U()),Q=!1}))})(or,qe,Mn,hi,$n,mi,Hn,Kn,Jn,lr,Qi,cr,ui),dr=((t,e,n,s,i)=>(r,o,a,l,u,c)=>{if(null!==a)try{const e=new a(r,l,c),s=new Map;let o=null;if(Object.defineProperties(e,{channelCount:{get:()=>c.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>o,set:t=>{"function"==typeof o&&e.removeEventListener("processorerror",o),o="function"==typeof t?t:null,"function"==typeof o&&e.addEventListener("processorerror",o)}}}),e.addEventListener=(d=e.addEventListener,(...t)=>{if("processorerror"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=s.get(t[1]);void 0!==n?t[1]=n:(t[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),e(n)):e(new ErrorEvent(t[0],{...n}))},s.set(e,t[1]))}}return d.call(e,"error",t[1],t[2]),d.call(e,...t)}),e.removeEventListener=(h=e.removeEventListener,(...t)=>{if("processorerror"===t[0]){const e=s.get(t[1]);void 0!==e&&(s.delete(t[1]),t[1]=e)}return h.call(e,"error",t[1],t[2]),h.call(e,t[0],t[1],t[2])}),0!==c.numberOfOutputs){const t=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(r.destination),i(e,(()=>t.disconnect()),(()=>t.connect(r.destination)))}return e}catch(t){if(11===t.code)throw s();throw t}var h,d;if(void 0===u)throw s();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(c),e(r,o,u,c)})(Mn,hr,Hn,Jn,ui),pr=((t,e,n,s,i,r,o,a,l,u,c,h,d,p,f,m)=>(g,_,y)=>{const v=new WeakMap;let b=null;return{render(w,x,k){a(x,w);const S=v.get(x);return void 0!==S?Promise.resolve(S):(async(a,w,x)=>{let k=c(a),S=null;const T=Ne(k,w),C=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(null===h){const t=C.reduce(((t,e)=>t+e),0),n=i(w,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),r=[];for(let t=0;t<a.numberOfOutputs;t+=1)r.push(s(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[t]}));const u=o(w,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});u.connect=e.bind(null,r),u.disconnect=l.bind(null,r),S=[n,r,u]}else T||(k=new h(w,g));if(v.set(w,null===S?k:S[2]),null!==S){if(null===b){if(void 0===y)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const t=a.channelCount*a.numberOfInputs,e=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=t+e,l=async()=>{const l=new d(n,128*Math.ceil(a.context.length/128),w.sampleRate),u=[],c=[];for(let t=0;t<_.numberOfInputs;t+=1)u.push(o(l,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),c.push(i(l,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map((async t=>{const e=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await p(l,t,e.offset,x),e}))),g=s(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<_.numberOfInputs;t+=1){u[t].connect(c[t]);for(let e=0;e<_.channelCount;e+=1)c[t].connect(g,e,t*_.channelCount+e)}for(const[e,n]of h.entries())n.connect(g,0,t+e),n.start(0);return g.connect(l.destination),await Promise.all(u.map((t=>f(a,l,t,x)))),m(l)};b=bn(a,0===n?null:await l(),w,_,C,y,u)}const t=await b,e=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,c,h]=S;null!==t&&(e.buffer=t,e.start(0)),e.connect(l);for(let t=0,e=0;t<a.numberOfOutputs;t+=1){const n=c[t];for(let s=0;s<C[t];s+=1)l.connect(n,e+s,s);e+=C[t]}return h}if(T)for(const[e,n]of a.parameters.entries())await t(w,n,k.parameters.get(e),x);else for(const[t,e]of a.parameters.entries())await p(w,e,k.parameters.get(t),x);return await f(a,w,k,x),k})(w,x,k)}}})(Ks,or,Js,hi,$n,mi,Hn,ar,lr,Qi,rn,Yi,Rs,ti,Os,Si),fr=(t=>e=>t.get(e))(Gi),mr=(t=>(e,n)=>{t.set(e,n)})(ur),gr=$i?((t,e,n,s,i,r,o,a,l,u,c,h,d,p)=>class extends e{constructor(e,c,d){var p;const f=a(e),m=l(f),g=(t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(()=>1))}))({...gn,...d});(t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}})(g);const _=ye.get(f),y=null==_?void 0:_.get(c),v=m||"closed"!==f.state?f:null!==(p=o(f))&&void 0!==p?p:f,b=i(v,m?null:e.baseLatency,u,c,y,g);super(e,!0,b,m?s(c,g,y):null);const w=[];b.parameters.forEach(((t,e)=>{const s=n(this,m,t);w.push([e,s])})),this._nativeAudioWorkletNode=b,this._onprocessorerror=null,this._parameters=new mn(w),m&&t(f,this);const{activeInputs:x}=r(this);h(b,x)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"==typeof t?p(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(rr,Ls,ni,pr,dr,We,fr,Ds,Ps,Yi,0,mr,0,gs):void 0,_r=((t,e)=>(n,s,i)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,i)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})(Jn,Rs),yr=((t,e,n,s,i,r,o,a)=>{const l=[];return(u,c)=>n(u).render(u,c,l).then((()=>Promise.all(Array.from(s(c)).map((t=>n(t).render(t,c,l)))))).then((()=>i(c))).then((n=>("function"!=typeof n.copyFromChannel?(o(n),Fe(n)):e(r,(()=>r(n)))||a(n),t.add(n),n)))})(Ws,xs,Es,ir,Si,Ie,Gs,Hs),vr=((t,e,n,s,i)=>class extends t{constructor(t,n,i){let r;if("number"==typeof t&&void 0!==n&&void 0!==i)r={length:n,numberOfChannels:t,sampleRate:i};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");r=t}const{length:o,numberOfChannels:a,sampleRate:l}={...ts,...r},u=s(a,o,l);e(qn,(()=>qn(u)))||u.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(u.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(u,a),this._length=o,this._nativeOfflineAudioContext=u,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,Qe(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}})(Ki,xs,Mn,_r,yr),br=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(me,Fs),wr=((t,e)=>n=>t.has(n)||e(n))(de,Vs),xr=((t,e)=>n=>t.has(n)||e(n))(fe,js),kr=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(me,Ps),Sr=()=>(async(t,e,n,s,i,r,o,a,l,u,c,h,d,p,f,m)=>!!(t(e,e)&&t(n,n)&&t(i,i)&&t(r,r)&&t(a,a)&&t(l,l)&&t(u,u)&&t(c,c)&&t(h,h)&&t(d,d)&&t(p,p))&&(await Promise.all([t(s,s),t(o,o),t(f,f),t(m,m)])).every((t=>t)))(xs,(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createBuffer(1,1,44100);if(void 0===e.copyToChannel)return!0;const n=new Float32Array(2);try{e.copyFromChannel(n,0,0)}catch{return!1}return!0})(Rs),(t=>()=>{if(null===t)return!1;if(void 0!==t.prototype&&void 0!==t.prototype.close)return!0;const e=new t,n=void 0!==e.close;try{e.close()}catch{}return n})(qs),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);return new Promise((t=>{let n=!0;const s=s=>{n&&(n=!1,e.startRendering(),t(s instanceof TypeError))};let i;try{i=e.decodeAudioData(null,(()=>{}),s)}catch(t){s(t)}void 0!==i&&i.catch(s)}))})(Rs),(t=>()=>{if(null===t)return!1;let e;try{e=new t({latencyHint:"balanced"})}catch{return!1}return e.close(),!0})(qs),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createGain(),n=e.connect(e)===e;return e.disconnect(e),n})(Rs),((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new MessageChannel,i=new e(1,128,44100),r=URL.createObjectURL(n);let o=!1;try{await i.audioWorklet.addModule(r);const e=new t(i,"a",{numberOfOutputs:0}),n=i.createOscillator();await new Promise((t=>{e.port.onmessage=()=>t(),e.port.postMessage(s.port2,[s.port2])})),e.port.onmessage=()=>o=!0,n.connect(e),n.start(0),await i.startRendering(),o=await new Promise((t=>{s.port1.onmessage=({data:e})=>t(1===e),s.port1.postMessage(0)}))}catch{}finally{s.port1.close(),URL.revokeObjectURL(r)}return o})(Yi,Rs),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createChannelMerger();if("max"===e.channelCountMode)return!0;try{e.channelCount=2}catch{return!0}return!1})(Rs),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100);return void 0===e.createConstantSource||e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY})(Rs),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100),n=e.createConvolver();n.buffer=e.createBuffer(1,1,e.sampleRate);try{n.buffer=e.createBuffer(1,1,e.sampleRate)}catch{return!1}return!0})(Rs),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createConvolver();try{e.channelCount=1}catch{return!1}return!0})(Rs),ps,(t=>()=>null!==t&&t.hasOwnProperty("isSecureContext"))(Ts),(t=>()=>{if(null===t)return!1;const e=new t;try{return e.createMediaStreamSource(new MediaStream),!1}catch(t){return!0}})(qs),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);if(void 0===e.createStereoPanner)return Promise.resolve(!0);if(void 0===e.createConstantSource)return Promise.resolve(!0);const n=e.createConstantSource(),s=e.createStereoPanner();return n.channelCount=1,n.offset.value=1,s.channelCount=1,n.start(),n.connect(s).connect(e.destination),e.startRendering().then((t=>1!==t.getChannelData(0)[0]))})(Rs),fs);var Tr;function Cr(t,e){if(!t)throw new Error(e)}function Er(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Or(t){t.isOffline||"running"===t.state||Rr('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Ar=console;function Dr(t){Ar=t}function Mr(...t){Ar.log(...t)}function Rr(...t){Ar.warn(...t)}function Pr(t){return void 0===t}function Nr(t){return!Pr(t)}function Ir(t){return"function"==typeof t}function qr(t){return"number"==typeof t}function Fr(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function Vr(t){return"boolean"==typeof t}function jr(t){return Array.isArray(t)}function Lr(t){return"string"==typeof t}function zr(t){return Lr(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}const Br="object"==typeof self?self:null,Wr=Br&&(Br.hasOwnProperty("AudioContext")||Br.hasOwnProperty("webkitAudioContext"));function Ur(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function $r(t,e,n,s){return new(n||(n=Promise))((function(i,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))}Object.create,Object.create;class Qr{constructor(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Gr(t){return xr(t)}function Hr(t){return wr(t)}function Yr(t){return kr(t)}function Xr(t){return br(t)}function Zr(t){return t instanceof AudioBuffer}function Kr(t,e){return"value"===t||Gr(e)||Hr(e)||Zr(e)}function Jr(t,...e){if(!e.length)return t;const n=e.shift();if(Fr(t)&&Fr(n))for(const e in n)Kr(e,n[e])?t[e]=n[e]:Fr(n[e])?(t[e]||Object.assign(t,{[e]:{}}),Jr(t[e],n[e])):Object.assign(t,{[e]:n[e]});return Jr(t,...e)}function to(t,e,n=[],s){const i={},r=Array.from(e);if(Fr(r[0])&&s&&!Reflect.has(r[0],s)&&(Object.keys(r[0]).some((e=>Reflect.has(t,e)))||(Jr(i,{[s]:r[0]}),n.splice(n.indexOf(s),1),r.shift())),1===r.length&&Fr(r[0]))Jr(i,r[0]);else for(let t=0;t<n.length;t++)Nr(r[t])&&(i[n[t]]=r[t]);return Jr(t,i)}function eo(t,e){return Pr(t)?e:t}function no(t,e){return e.forEach((e=>{Reflect.has(t,e)&&delete t[e]})),t}class so{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Br&&this.toString()===Br.TONE_DEBUG_CLASS)&&Mr(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}so.version=le;const io=1e-6;function ro(t,e){return t>e+io}function oo(t,e){return ro(t,e)||lo(t,e)}function ao(t,e){return t+io<e}function lo(t,e){return Math.abs(t-e)<io}function uo(t,e,n){return Math.max(Math.min(t,n),e)}class co extends so{constructor(){super(),this.name="Timeline",this._timeline=[];const t=to(co.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Cr(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Cr(oo(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(lo(this._timeline[e].time,t)){for(let n=e;n>=0&&lo(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&oo(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let n=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][e]<=t)return s-1;for(;n<i;){let s=Math.floor(n+(i-n)/2);const r=this._timeline[s],o=this._timeline[s+1];if(lo(r[e],t)){for(let n=s;n<this._timeline.length&&lo(this._timeline[n][e],t);n++)s=n;return s}if(ao(r[e],t)&&ro(o[e],t))return s;ro(r[e],t)?i=s:n=s+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let s=this._search(t),i=this._search(e);return-1!==s&&-1!==i?(this._timeline[s].time!==t&&(s+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,s,i)):-1===s&&this._iterate(n,0,i),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&lo(this._timeline[n].time,t)){let s=n;for(let e=n;e>=0&&lo(this._timeline[e].time,t);e--)s=e;this._iterate((t=>{e(t)}),s,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const ho=[];function po(t){ho.push(t)}const fo=[];function mo(t){fo.push(t)}class go extends so{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach((t=>{Pr(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)})),this}once(t,e){const n=(...s)=>{e(...s),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach((n=>{if(Pr(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Pr(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}})),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let t=0,s=n.length;t<s;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach((e=>{const n=Object.getOwnPropertyDescriptor(go.prototype,e);Object.defineProperty(t.prototype,e,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}class _o extends go{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class yo extends _o{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new co,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=to(yo.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=function(t){return new sr(t)}({latencyHint:t.latencyHint}),this._ticker=new Qr(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var t;return this._initialized||(t=this,ho.forEach((e=>e(t))),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Cr(Xr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return Cr(Xr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return Cr(Xr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Cr(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Cr(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Cr(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Cr(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function(t,e,n){return Cr(Nr(gr),"This node only works in a secure context (https or localhost)"),new gr(t,e,n)}(this.rawContext,t,e)}addAudioWorkletModule(t,e){return $r(this,void 0,void 0,(function*(){Cr(Nr(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)}))}workletsAreReady(){return $r(this,void 0,void 0,(function*(){const t=[];this._workletModules.forEach((e=>t.push(e))),yield Promise.all(t)}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,Lr(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Xr(this._context)?this._context.resume():Promise.resolve()}close(){return $r(this,void 0,void 0,(function*(){var t;Xr(this._context)&&(yield this._context.close()),this._initialized&&(t=this,fo.forEach((e=>e(t))))}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=t;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=e,s.loop=!0,s.start(0),this._constants.set(t,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((t=>this._constants[t].disconnect())),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach((e=>{e.id===t&&this._timeouts.remove(e)})),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),s()},id:n,time:i+e})};return s(),n}}function vo(t,e){jr(e)?e.forEach((e=>vo(t,e))):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function bo(t,e){jr(e)?e.forEach((e=>bo(t,e))):Object.defineProperty(t,e,{writable:!0})}const wo=()=>{};class xo extends so{constructor(){super(),this.name="ToneAudioBuffer",this.onload=wo;const t=to(xo.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&Zr(t.url)||t.url instanceof xo?this.set(t.url):Lr(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:wo,onload:wo,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Co().sampleRate}set(t){return t instanceof xo?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return $r(this,void 0,void 0,(function*(){const e=xo.load(t).then((t=>{this.set(t),this.onload(this)}));xo.downloads.push(e);try{yield e}finally{const t=xo.downloads.indexOf(e);xo.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=jr(t)&&t[0].length>0,n=e?t.length:1,s=e?t[0].length:t.length,i=Co(),r=i.createBuffer(n,s,i.sampleRate),o=e||1!==n?t:[t];for(let t=0;t<n;t++)r.copyToChannel(o[t],t);return this._buffer=r,this}toMono(t){if(qr(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map((t=>t/e)),this.fromArray(t)}return this}toArray(t){if(qr(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){const n=Math.floor(t*this.sampleRate),s=Math.floor(e*this.sampleRate);Cr(n<s,"The start time must be less than the end time");const i=s-n,r=Co().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)r.copyToChannel(this.getChannelData(t).subarray(n,s),t);return new xo(r)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new xo).fromArray(t)}static fromUrl(t){return $r(this,void 0,void 0,(function*(){const e=new xo;return yield e.load(t)}))}static load(t){return $r(this,void 0,void 0,(function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let s=n[0];for(const t of n)if(xo.supportsType(t)){s=t;break}t=t.replace(e[0],s)}const n=""===xo.baseUrl||xo.baseUrl.endsWith("/")?xo.baseUrl:xo.baseUrl+"/",s=yield fetch(n+t);if(!s.ok)throw new Error(`could not load url: ${t}`);const i=yield s.arrayBuffer();return yield Co().decodeAudioData(i)}))}static supportsType(t){const e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return $r(this,void 0,void 0,(function*(){for(yield Promise.resolve();xo.downloads.length;)yield xo.downloads[0]}))}}xo.baseUrl="",xo.downloads=[];class ko extends yo{constructor(){var t,e,n;super({clockSource:"offline",context:Yr(arguments[0])?arguments[0]:(t=arguments[0],e=arguments[1]*arguments[2],n=arguments[2],new vr(t,e,n)),lookAhead:0,updateInterval:Yr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Yr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return $r(this,void 0,void 0,(function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise((t=>setTimeout(t,1))))}}))}render(t=!0){return $r(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new xo(e)}))}close(){return Promise.resolve()}}const So=new class extends _o{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return $r(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let To=So;function Co(){return To===So&&Wr&&Eo(new yo),To}function Eo(t){To=Xr(t)?new yo(t):Yr(t)?new ko(t):t}function Oo(){return To.resume()}if(Br&&!Br.TONE_SILENCE_LOGGING){let t="v";"dev"===le&&(t="");const e=` * Tone.js ${t}${le} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Ao(t){return Math.pow(10,t/20)}function Do(t){return Math.log(t)/Math.LN10*20}function Mo(t){return Math.pow(2,t/12)}let Ro=440;function Po(t){return Math.round(No(t))}function No(t){return 69+12*Math.log2(t/Ro)}function Io(t){return Ro*Math.pow(2,(t-69)/12)}class qo extends so{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),s="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/n)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let s=0;return t&&"0"!==t&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof qo&&this.fromType(this._val),Pr(this._val))return this._noArg();if(Lr(this._val)&&Pr(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Fr(this._val)){let t=0;for(const e in this._val)if(Nr(this._val[e])){const n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(Nr(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return Lr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Fo extends qo{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Fo(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),s=this.valueOf();return s+(Math.round(s/n)*n-s)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let t=1;t<9;t++){const n=Math.pow(2,t);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");let n=e[0],s=new Fo(this.context,e[0]).toSeconds();return e.forEach((e=>{const i=new Fo(this.context,e).toSeconds();Math.abs(i-t)<Math.abs(s-t)&&(n=e,s=i)})),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let s=e%1*4;e=Math.floor(e)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[n,e,s].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Po(this.toFrequency())}_now(){return this.context.now()}}function Vo(t,e){return new Fo(Co(),t,e)}class jo extends Fo{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Ro}static set A4(t){!function(t){Ro=t}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:jo.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const n=Lo[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:jo.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let s=1;return t&&"0"!==t&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}}})}transpose(t){return new jo(this.context,this.valueOf()*Mo(t))}harmonize(t){return t.map((t=>this.transpose(t)))}toMidi(){return Po(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/jo.A4);let n=Math.round(12*e)+57;const s=Math.floor(n/12);return s<0&&(n+=-12*s),zo[n%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Io(t)}static ftom(t){return Po(t)}}const Lo={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},zo=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Bo(t,e){return new jo(Co(),t,e)}class Wo extends Fo{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function Uo(t,e){return new Wo(Co(),t,e)}class $o extends so{constructor(){super();const t=to($o.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Co()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new Fo(this.context,t).toSeconds()}toFrequency(t){return new jo(this.context,t).toFrequency()}toTicks(t){return new Wo(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach((n=>{Pr(t[n])&&delete e[n]})),e}get(){const t=this.constructor.getDefaults();return Object.keys(t).forEach((e=>{if(Reflect.has(this,e)){const n=this[e];Nr(n)&&Nr(n.value)&&Nr(n.setValueAtTime)?t[e]=n.value:n instanceof $o?t[e]=n._getPartialProperties(t[e]):jr(n)||qr(n)||Lr(n)||Vr(n)?t[e]=n:delete t[e]}})),t}set(t){return Object.keys(t).forEach((e=>{Reflect.has(this,e)&&Nr(this[e])&&(this[e]&&Nr(this[e].value)&&Nr(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof $o?this[e].set(t[e]):this[e]=t[e])})),this}}class Qo extends co{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return Er(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){for(let n=this._search(e);n>=0;n--){const e=this._timeline[n];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let e=n;e<this._timeline.length;e++){const n=this._timeline[e];if(n.state===t)return n}}}class Go extends $o{constructor(){super(to(Go.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=to(Go.getDefaults(),arguments,["param","units","convert"]);for(Cr(Nr(t.param)&&(Gr(t.param)||t.param instanceof Go),"param must be an AudioParam");!Gr(t.param);)t.param=t.param._param;this._swappable=!!Nr(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new co(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Nr(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign($o.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Nr(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Nr(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Nr(this.maxValue)&&Nr(this.minValue)&&Er(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Ao(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Do(t):t}setValueAtTime(t,e){const n=this.toSeconds(e),s=this._fromType(t);return Cr(isFinite(s)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),s=this._events.get(e);let i=this._initialValue;if(null===s)i=this._initialValue;else if("setTargetAtTime"!==s.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=s.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=s.value;if("setTargetAtTime"===s.type){const e=this._events.getBefore(s.time);t=null===e?this._initialValue:e.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(s.time,t,n.time,n.value,e):this._exponentialInterpolate(s.time,t,n.time,n.value,e)}else i=s.value;else{const t=this._events.getBefore(s.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===s.type&&(i=this._exponentialApproach(s.time,n,s.value,s.constant,e))}return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),s=this.toSeconds(e);return Cr(isFinite(n)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:s,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,s),this._param.linearRampToValueAtTime(n,s),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=lo(n,0)?this._minOutput:n,this._assertRange(n);const s=this.toSeconds(e);return Cr(isFinite(n)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,s),this._param.exponentialRampToValueAtTime(n,s),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const s=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,s),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const s=this._fromType(t);Cr(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(e);return this._assertRange(s),Cr(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(s,i,n),this}setValueCurveAtTime(t,e,n,s=1){n=this.toSeconds(n),e=this.toSeconds(e);const i=this._fromType(t[0])*s;this.setValueAtTime(this._toType(i),e);const r=n/(t.length-1);for(let n=1;n<t.length;n++){const i=this._fromType(t[n])*s;this.linearRampToValueAtTime(this._toType(i),e+n*r)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Cr(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Cr(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const s=this._events.get(e),i=this._events.getAfter(e);return s&&lo(s.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const s=this._events.getAfter(n.time),i=s?s.time:e+2,r=(i-e)/10;for(let n=e;n<i;n+=r)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,(e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}setParam(t){Cr(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,s,i){return n+(e-n)*Math.exp(-(i-t)/s)}_linearInterpolate(t,e,n,s,i){return e+(i-t)/(n-t)*(s-e)}_exponentialInterpolate(t,e,n,s,i){return e*Math.pow(s/e,(i-t)/(n-t))}}class Ho extends $o{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Nr(this.input)?Gr(this.input)||this.input instanceof Go?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Nr(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Nr(t)&&(t instanceof Ho||Hr(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach((e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}_getChannelProperties(){const t=this._getInternalNodes();Cr(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return Xo(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Rr("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return Zo(this,t,e,n),this}chain(...t){return Yo(this,...t),this}fan(...t){return t.forEach((t=>this.connect(t))),this}dispose(){return super.dispose(),Nr(this.input)&&(this.input instanceof Ho?this.input.dispose():Hr(this.input)&&this.input.disconnect()),Nr(this.output)&&(this.output instanceof Ho?this.output.dispose():Hr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Yo(...t){const e=t.shift();t.reduce(((t,e)=>(t instanceof Ho?t.connect(e):Hr(t)&&Xo(t,e),e)),e)}function Xo(t,e,n=0,s=0){for(Cr(Nr(t),"Cannot connect from undefined node"),Cr(Nr(e),"Cannot connect to undefined node"),(e instanceof Ho||Hr(e))&&Cr(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Cr(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Ho||e instanceof Go;)Nr(e.input)&&(e=e.input);for(;t instanceof Ho;)Nr(t.output)&&(t=t.output);Gr(e)?t.connect(e,n):t.connect(e,n,s)}function Zo(t,e,n=0,s=0){if(Nr(e))for(;e instanceof Ho;)e=e.input;for(;!Hr(t);)Nr(t.output)&&(t=t.output);Gr(e)?t.disconnect(e,n):Hr(e)?t.disconnect(e,n,s):t.disconnect()}class Ko extends Ho{constructor(){super(to(Ko.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=to(Ko.getDefaults(),arguments,["gain","units"]);this.gain=new Go({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),vo(this,"gain")}static getDefaults(){return Object.assign(Ho.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Jo extends Ho{constructor(t){super(t),this.onended=wo,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ko({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Ho.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:wo})}_startGain(t,e=1){Cr(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Cr(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==wo&&(this.onended(this),this.onended=wo,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Cr(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class ta extends Jo{constructor(){super(to(ta.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=to(ta.getDefaults(),arguments,["offset"]);Xo(this._source,this._gainNode),this.offset=new Go({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Jo.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ea extends Ho{constructor(){super(to(ea.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=to(ea.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new ta({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Ho.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return na(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,s){return this._param.setValueCurveAtTime(t,e,n,s),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function na(t,e,n,s){(e instanceof Go||Gr(e)||e instanceof ea&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ea&&(e.overridden=!0)),Xo(t,e,n,s)}class sa extends Go{constructor(){super(to(sa.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new co(1/0),this._multiplier=1;const t=to(sa.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Go.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const s=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(1/n,1));for(let t=0;t<=r;t++){const r=n*t+e,o=this._exponentialApproach(i.time,i.value,s,n,r);this.linearRampToValueAtTime(this._toType(o),r)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),s=this._events.get(e),i=Math.round(Math.max(10*(e-s.time),1)),r=(e-s.time)/i;for(let t=0;t<=i;t++){const i=r*t+s.time,o=this._exponentialInterpolate(s.time,s.value,e,n,i);this.linearRampToValueAtTime(this._toType(o),i)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Pr(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let s=this._fromType(this.getValueAtTime(e));const i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(s=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+s)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(e);return this.getTimeOfTick(s+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const s=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-s)/(n.time-e.time),r=Math.sqrt(Math.pow(s,2)-2*i*(e.ticks-t)),o=(-s+r)/i,a=(-s-r)/i;return(o>0?o:a)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),s=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+s)-i}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class ia extends ea{constructor(){super(to(ia.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=to(ia.getDefaults(),arguments,["value"]);this.input=this._param=new sa({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(ea.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class ra extends $o{constructor(){super(to(ra.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Qo,this._tickOffset=new co;const t=to(ra.getDefaults(),arguments,["frequency"]);this.frequency=new ia({context:this.context,units:t.units,value:t.frequency}),vo(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},$o.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Nr(e)&&this.setTicksAtTime(e,n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);let i=n,r=0;return this._state.forEachBetween(n.time,e+this.sampleTime,(t=>{let e=i.time;const n=this._tickOffset.get(t.time);n&&n.time>=i.time&&(r=n.ticks,e=n.time),"started"===i.state&&"started"!==t.state&&(r+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),i=t})),this._state.remove(s),r}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let s=e,i=0;return this._state.forEachBetween(e.time,t+this.sampleTime,(t=>{let e=s.time;const n=this._tickOffset.get(t.time);n&&n.time>=s.time&&(i=n.seconds,e=n.time),"started"===s.state&&"started"!==t.state&&(i+=t.time-e),s=t})),this._state.remove(n),i}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),s=this._state.get(e),i=Math.max(n.time,s.time),r=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(r)}forEachTickBetween(t,e,n){let s=this._state.get(t);this._state.forEachBetween(t,e,(e=>{s&&"started"===s.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(s.time,t),e.time-this.sampleTime,n),s=e}));let i=null;if(s&&"started"===s.state){const r=Math.max(s.time,t),o=this.frequency.getTicksAtTime(r),a=o-this.frequency.getTicksAtTime(s.time);let l=Math.ceil(a)-a;l=lo(l,1)?0:l;let u=this.frequency.getTimeOfTick(o+l);for(;u<e;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(t){i=t;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class oa extends $o{constructor(){super(to(oa.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=wo,this._lastUpdate=0,this._state=new Qo("stopped"),this._boundLoop=this._loop.bind(this);const t=to(oa.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new ra({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,vo(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign($o.getDefaults(),{callback:wo,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){Or(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(s+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,(t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,e,((t,e)=>{this.callback(t,e)})))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}go.mixin(oa);class aa extends Ho{constructor(){super(to(aa.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const t=to(aa.getDefaults(),arguments,["delayTime","maxDelay"]),e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new Go({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),vo(this,"delayTime")}static getDefaults(){return Object.assign(Ho.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function la(t,e,n=2,s=Co().sampleRate){return $r(this,void 0,void 0,(function*(){const i=Co(),r=new ko(n,e,s);Eo(r),yield t(r);const o=r.render();Eo(i);const a=yield o;return new xo(a)}))}class ua extends so{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=to(ua.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach((e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:wo,onload:wo,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Cr(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every((([t,e])=>e.loaded))}add(t,e,n=wo,s=wo){return Lr(e)?this._buffers.set(t.toString(),new xo(this.baseUrl+e,n,s)):this._buffers.set(t.toString(),new xo(e,n,s)),this}dispose(){return super.dispose(),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this}}class ca extends jo{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return Po(super._frequencyToUnits(t))}_ticksToUnits(t){return Po(super._ticksToUnits(t))}_beatsToUnits(t){return Po(super._beatsToUnits(t))}_secondsToUnits(t){return Po(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return Io(this.toMidi())}transpose(t){return new ca(this.context,this.toMidi()+t)}}function ha(t,e){return new ca(Co(),t,e)}class da extends Wo{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function pa(t,e){return new da(Co(),t,e)}class fa extends $o{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new co,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}po((t=>{t.draw=new fa({context:t})})),mo((t=>{t.draw.dispose()}));class ma extends so{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Cr(Nr(t.time),"Events must have a time property"),Cr(Nr(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new ga(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,(t=>this.remove(t))),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=null;if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),s=t.right;s&&(t.right=s.left,s.left=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),s=t.left;s&&(t.left=s.right,s.right=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse((t=>e.push(t))),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((t=>t.dispose())),this._root=null,this}}class ga{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class _a extends Ho{constructor(){super(to(_a.getDefaults(),arguments,["volume"])),this.name="Volume";const t=to(_a.getDefaults(),arguments,["volume"]);this.input=this.output=new Ko({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,vo(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Ho.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class ya extends Ho{constructor(){super(to(ya.getDefaults(),arguments)),this.name="Destination",this.input=new _a({context:this.context}),this.output=new Ko({context:this.context}),this.volume=this.input.volume;const t=to(ya.getDefaults(),arguments);Yo(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Ho.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Yo(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}po((t=>{t.destination=new ya({context:t})})),mo((t=>{t.destination.dispose()}));class va extends so{constructor(t){super(),this.name="TimelineValue",this._timeline=new co({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class ba{constructor(t,e){this.id=ba._eventId++;const n=Object.assign(ba.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:wo,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}ba._eventId=0;class wa extends ba{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(wa.getDefaults(),e);this.duration=new da(t.context,n.duration).valueOf(),this._interval=new da(t.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ba.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new da(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new da(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new da(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class xa extends $o{constructor(){super(to(xa.getDefaults(),arguments)),this.name="Transport",this._loop=new va(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new co,this._repeatedEvents=new ma,this._syncedSignals=[],this._swingAmount=0;const t=to(xa.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new oa({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),vo(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign($o.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;t+=new da(this.context,2*this._swingTicks/3).toSeconds()*s}this._timeline.forEachAtTime(e,(e=>e.invoke(t)))}schedule(t,e){const n=new ba(this,{callback:t,time:new Wo(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,s=1/0){const i=new wa(this,{callback:t,duration:new Fo(this.context,s).toTicks(),interval:new Fo(this.context,e).toTicks(),time:new Wo(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){const n=new ba(this,{callback:t,once:!0,time:new Wo(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,(t=>this.clear(t.id))),this._repeatedEvents.forEachFrom(e,(t=>this.clear(t.id))),this}_bindClockEvents(){this._clock.on("start",((t,e)=>{e=new da(this.context,e).toSeconds(),this.emit("start",t,e)})),this._clock.on("stop",(t=>{this.emit("stop",t)})),this._clock.on("pause",(t=>{this.emit("pause",t)}))}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return Nr(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){jr(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Fo(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Fo(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new da(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new da(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),s=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",s),this._clock.setTicksAtTime(t,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){if(!e){const n=this.now();if(0!==t.getValueAtTime(n)){const s=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/s}else e=0}const n=new Ko(e);return this.bpm.connect(n),n.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:n,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),bo(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}go.mixin(xa),po((t=>{t.transport=new xa({context:t})})),mo((t=>{t.transport.dispose()}));class ka extends Ho{constructor(t){super(t),this.input=void 0,this._state=new Qo("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=wo,this._syncedStop=wo,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new _a({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,vo(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Ho.getDefaults(),{mute:!1,onstop:wo,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let s=Pr(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(s=this._clampToCurrentTime(s),this._synced||"started"!==this._state.getValueAtTime(s))if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const t=this._state.get(s);t&&(t.offset=this.toSeconds(eo(e,0)),t.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule((t=>{this._start(t,e,n)}),s);this._scheduled.push(i),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else Or(this.context),this._start(s,e,n);else Cr(ro(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,e,n);return this}stop(t){let e=Pr(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Nr(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const s=e-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-s),this._start(t,this.toSeconds(n.offset)+s,i)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((t=>this.context.transport.clear(t))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=wo,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Sa extends Jo{constructor(){super(to(Sa.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=to(Sa.getDefaults(),arguments,["url","onload"]);Xo(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Go({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new xo(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Jo.getDefaults(),{url:new xo,loop:!1,loopEnd:0,loopStart:0,onload:wo,onerror:wo,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,s=1){Cr(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,s),e=this.loop?eo(e,this.loopStart):eo(e,0);let r=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;oo(r,t)&&(r=(r-e)%n+e),lo(r,this.buffer.duration)&&(r=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,ao(r,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,r)),Nr(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(i+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Ta extends ka{constructor(){super(to(Ta.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const t=to(Ta.getDefaults(),arguments,["type"]);this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ka.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(Cr(t in Oa,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=Oa[this._type];this._source=new Sa({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Ca=220500,Ea={brown:null,pink:null,white:null},Oa={get brown(){if(!Ea.brown){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Ca);t[e]=n;let s=0;for(let t=0;t<Ca;t++){const e=2*Math.random()-1;n[t]=(s+.02*e)/1.02,s=n[t],n[t]*=3.5}}Ea.brown=(new xo).fromArray(t)}return Ea.brown},get pink(){if(!Ea.pink){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Ca);let s,i,r,o,a,l,u;t[e]=n,s=i=r=o=a=l=u=0;for(let t=0;t<Ca;t++){const e=2*Math.random()-1;s=.99886*s+.0555179*e,i=.99332*i+.0750759*e,r=.969*r+.153852*e,o=.8665*o+.3104856*e,a=.55*a+.5329522*e,l=-.7616*l-.016898*e,n[t]=s+i+r+o+a+l+u+.5362*e,n[t]*=.11,u=.115926*e}}Ea.pink=(new xo).fromArray(t)}return Ea.pink},get white(){if(!Ea.white){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Ca);t[e]=n;for(let t=0;t<Ca;t++)n[t]=2*Math.random()-1}Ea.white=(new xo).fromArray(t)}return Ea.white}};class Aa extends Ho{constructor(){super(to(Aa.getDefaults(),arguments,["volume"])),this.name="UserMedia";const t=to(Aa.getDefaults(),arguments,["volume"]);this._volume=this.output=new _a({context:this.context,volume:t.volume}),this.volume=this._volume.volume,vo(this,"volume"),this.mute=t.mute}static getDefaults(){return Object.assign(Ho.getDefaults(),{mute:!1,volume:0})}open(t){return $r(this,void 0,void 0,(function*(){Cr(Aa.supported,"UserMedia is not supported"),"started"===this.state&&this.close();const e=yield Aa.enumerateDevices();qr(t)?this._device=e[t]:(this._device=e.find((e=>e.label===t||e.deviceId===t)),!this._device&&e.length>0&&(this._device=e[0]),Cr(Nr(this._device),`No matching device ${t}`));const n={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(n.audio.deviceId=this._device.deviceId);const s=yield navigator.mediaDevices.getUserMedia(n);if(!this._stream){this._stream=s;const t=this.context.createMediaStreamSource(s);Xo(t,this.output),this._mediaStream=t}return this}))}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach((t=>{t.stop()})),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return $r(this,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((t=>"audioinput"===t.kind))}))}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return Nr(navigator.mediaDevices)&&Nr(navigator.mediaDevices.getUserMedia)}}function Da(t,e){return $r(this,void 0,void 0,(function*(){const n=e/t.context.sampleRate,s=new ko(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)}))}class Ma extends Jo{constructor(){super(to(Ma.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=to(Ma.getDefaults(),arguments,["frequency","type"]);Xo(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Go({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Go({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),vo(this,["frequency","detune"])}static getDefaults(){return Object.assign(Jo.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ra extends ka{constructor(){super(to(Ra.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=to(Ra.getDefaults(),arguments,["frequency","type"]);this.frequency=new ea({context:this.context,units:"frequency",value:t.frequency}),vo(this,"frequency"),this.detune=new ea({context:this.context,units:"cents",value:t.detune}),vo(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(ka.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new Ma({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return Ra._periodicWaveCache.find((t=>{return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every(((t,e)=>n[e]===t)));var e,n}));{const t=Ra._periodicWaveCache.find((t=>t.type===this._type&&t.phase===this._phase));return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(Nr(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),s=this.context.createPeriodicWave(e,n);this._wave=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Ra._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),Ra._periodicWaveCache.length>100&&Ra._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Er(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach(((t,n)=>e[n]=t)),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048;const s=new Float32Array(n),i=new Float32Array(n);let r=1;if("custom"===t){if(r=this._partials.length+1,this._partialCount=this._partials.length,n=r,0===this._partials.length)return[s,i]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(r=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],r=Math.max(r,2),n=r):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){const n=2/(o*Math.PI);let a;switch(t){case"sine":a=o<=r?1:0,this._partials[o-1]=a;break;case"square":a=1&o?2*n:0,this._partials[o-1]=a;break;case"sawtooth":a=n*(1&o?1:-1),this._partials[o-1]=a;break;case"triangle":a=1&o?n*n*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=a;break;case"custom":a=this._partials[o-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==a?(s[o]=-a*Math.sin(e*o),i[o]=a*Math.cos(e*o)):(s[o]=0,i[o]=0)}return[s,i]}_inverseFFT(t,e,n){let s=0;const i=t.length;for(let r=0;r<i;r++)s+=t[r]*Math.cos(r*n)+e[r]*Math.sin(r*n);return s}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const s=2*Math.PI;for(let i=0;i<32;i++)n=Math.max(this._inverseFFT(t,e,i/32*s),n);return uo(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return $r(this,void 0,void 0,(function*(){return Da(this,t)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ra._periodicWaveCache=[];class Pa extends Ho{constructor(){super(Object.assign(to(Pa.getDefaults(),arguments,["context"])))}connect(t,e=0,n=0){return na(this,t,e,n),this}}class Na extends Pa{constructor(){super(Object.assign(to(Na.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=to(Na.getDefaults(),arguments,["mapping","length"]);jr(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):Ir(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(ea.getDefaults(),{length:1024})}setMap(t,e=1024){const n=new Float32Array(e);for(let s=0,i=e;s<i;s++){const e=s/(i-1)*2-1;n[s]=t(e,s)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){Cr(["none","2x","4x"].some((e=>e.includes(t))),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Ia extends Pa{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Na({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class qa extends ea{constructor(){super(Object.assign(to(qa.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=to(qa.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Ko({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ea.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Fa extends ka{constructor(){super(to(Fa.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Ia({context:this.context}),this._modulationNode=new Ko({context:this.context});const t=to(Fa.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ra({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ra({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new qa({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),vo(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ra.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return $r(this,void 0,void 0,(function*(){return Da(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Va extends ka{constructor(){super(to(Va.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Ko({context:this.context,gain:0});const t=to(Va.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ra({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new ea({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Ra({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new qa({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new qa({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),vo(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ra.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return $r(this,void 0,void 0,(function*(){return Da(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class ja extends ka{constructor(){super(to(ja.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Ko({context:this.context,gain:0}),this._thresh=new Na({context:this.context,mapping:t=>t<=0?-1:1});const t=to(ja.getDefaults(),arguments,["frequency","width"]);this.width=new ea({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Ra({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),vo(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ka.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return $r(this,void 0,void 0,(function*(){return Da(this,t)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class La extends ka{constructor(){super(to(La.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=to(La.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new ea({context:this.context,units:"frequency",value:t.frequency}),this.detune=new ea({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,vo(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ra.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach((e=>e.start(t)))}_stop(t){t=this.toSeconds(t),this._forEach((e=>e.stop(t)))}_restart(t){this._forEach((e=>e.restart(t)))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach((e=>e.type=t))}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach(((t,s)=>t.detune.value=e+n*s))}}get count(){return this._oscillators.length}set count(t){if(Er(t,1),this._oscillators.length!==t){this._forEach((t=>t.dispose())),this._oscillators=[];for(let e=0;e<t;e++){const n=new Ra({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):wo});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach((t=>t.start()))}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach(((t,e)=>t.phase=this._phase+e/this.count*360))}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach((e=>e.baseType=t)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((e=>e.partials=t)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach((e=>e.partialCount=t)),this._type=this._oscillators[0].type}asArray(t=1024){return $r(this,void 0,void 0,(function*(){return Da(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((t=>t.dispose())),this}}class za extends ka{constructor(){super(to(za.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new qa({context:this.context,value:2});const t=to(za.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new ja({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ra({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),vo(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ka.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return $r(this,void 0,void 0,(function*(){return Da(this,t)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Ba={am:Fa,fat:La,fm:Va,oscillator:Ra,pulse:ja,pwm:za};class Wa extends ka{constructor(){super(to(Wa.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=to(Wa.getDefaults(),arguments,["frequency","type"]);this.frequency=new ea({context:this.context,units:"frequency",value:t.frequency}),this.detune=new ea({context:this.context,units:"cents",value:t.detune}),vo(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Ra.getDefaults(),Va.getDefaults(),Fa.getDefaults(),La.getDefaults(),ja.getDefaults(),za.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some((t=>this._sourceType===t))&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Ba[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout((()=>t.dispose()),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Ba[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&qr(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&qr(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Lr(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return $r(this,void 0,void 0,(function*(){return Da(this,t)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Ua extends ea{constructor(){super(Object.assign(to(Ua.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Ko({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Yo(this._constantSource,this._sum)}static getDefaults(){return Object.assign(ea.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class $a extends Pa{constructor(){super(Object.assign(to($a.getDefaults(),arguments,["min","max"]))),this.name="Scale";const t=to($a.getDefaults(),arguments,["min","max"]);this._mult=this.input=new qa({context:this.context,value:t.max-t.min}),this._add=this.output=new Ua({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Pa.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Qa extends Pa{constructor(){super(Object.assign(to(Qa.getDefaults(),arguments))),this.name="Zero",this._gain=new Ko({context:this.context}),this.output=this._gain,this.input=void 0,Xo(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Zo(this.context.getConstant(0),this._gain),this}}class Ga extends Ho{constructor(){super(to(Ga.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Go.prototype._fromType,this._toType=Go.prototype._toType,this._is=Go.prototype._is,this._clampValue=Go.prototype._clampValue;const t=to(Ga.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Ra(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Ko({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new ea({context:this.context,units:"audioRange",value:0}),this._zeros=new Qa({context:this.context}),this._a2g=new Ia({context:this.context}),this._scaler=this.output=new $a({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),vo(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(Ra.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}get state(){return this._oscillator.state}connect(t,e,n){return(t instanceof Go||t instanceof ea)&&(this.convert=t.convert,this.units=t.units),na(this,t,e,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Ha(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Er(s,t,e),n.set(this,s)}})}}function Ya(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){Er(this.toSeconds(s),t,e),n.set(this,s)}})}}class Xa extends ka{constructor(){super(to(Xa.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=to(Xa.getDefaults(),arguments,["url","onload"]);this._buffer=new xo({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ka.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:wo,onerror:wo,playbackRate:1,reverse:!1})}load(t){return $r(this,void 0,void 0,(function*(){return yield this._buffer.load(t),this._onload(),this}))}_onload(t=wo){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?eo(e,this._loopStart):eo(e,0);const s=this.toSeconds(e),i=n;n=eo(n,Math.max(this._buffer.duration-s,0));let r=this.toSeconds(n);r/=this._playbackRate,t=this.toSeconds(t);const o=new Sa({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+r),this._state.setStateAtTime("stopped",t+r,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Pr(i)?o.start(t,s):o.start(t,s,r-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach((t=>t.stop(e)))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Er(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopStart=t}))}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Er(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopEnd=t}))}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((e=>{e.loop=t})),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((t=>t.cancelStop()))),this._activeSources.forEach((n=>{n.playbackRate.setValueAtTime(t,e)}))}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((t=>t.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}Ur([Ya(0)],Xa.prototype,"fadeIn",void 0),Ur([Ya(0)],Xa.prototype,"fadeOut",void 0);class Za extends Ho{constructor(){super(to(Za.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const t=to(Za.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new _a({context:this.context,volume:t.volume}),this.volume=this._volume.volume,vo(this,"volume"),this._buffers=new ua({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ka.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:wo,onerror:wo,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach((e=>{e.fadeIn=t}))}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach((e=>{e.fadeOut=t}))}get state(){return Array.from(this._players).some((([t,e])=>"started"===e.state))?"started":"stopped"}has(t){return this._buffers.has(t)}player(t){if(Cr(this.has(t),`No Player with the name ${t} exists on this object`),!this._players.has(t)){const e=new Xa({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,e)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,e,n){return Cr(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,n),this}stopAll(t){return this._players.forEach((e=>e.stop(t))),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach((t=>t.dispose())),this._buffers.dispose(),this}}class Ka extends ka{constructor(){super(to(Ka.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const t=to(Ka.getDefaults(),arguments,["url","onload"]);this.buffer=new xo({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),this._clock=new oa({context:this.context,callback:this._tick.bind(this),frequency:1/t.grainSize}),this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(ka.getDefaults(),{onload:wo,onerror:wo,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(t,e,n){e=eo(e,0),e=this.toSeconds(e),t=this.toSeconds(t);const s=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/s),n&&this.stop(t+this.toSeconds(n))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}_stop(t){this._clock.stop(t)}_onstop(t){this._activeSources.forEach((e=>{e.fadeOut=0,e.stop(t)})),this.onstop(this)}_tick(t){const e=this._clock.getTicksAtTime(t),n=e*this._grainSize;if(this.log("offset",n),!this.loop&&n>this.buffer.duration)return void this.stop(t);const s=n<this._overlap?0:this._overlap,i=new Sa({context:this.context,url:this.buffer,fadeIn:s,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:Mo(this.detune/100)}).connect(this.output);i.start(t,this._grainSize*e),i.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=()=>{const t=this._activeSources.indexOf(i);-1!==t&&this._activeSources.splice(t,1)}}get playbackRate(){return this._playbackRate}set playbackRate(t){Er(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(t){this.buffer.loaded&&Er(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this.buffer.loaded&&Er(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}get reverse(){return this.buffer.reverse}set reverse(t){this.buffer.reverse=t}get grainSize(){return this._grainSize}set grainSize(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(t){const e=this.toSeconds(t);Er(e,0),this._overlap=e}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach((t=>t.dispose())),this}}class Ja extends Pa{constructor(){super(...arguments),this.name="Abs",this._abs=new Na({context:this.context,mapping:t=>Math.abs(t)<.001?0:Math.abs(t)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class tl extends Pa{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Na({context:this.context,mapping:t=>2*Math.abs(t)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class el extends Pa{constructor(){super(...arguments),this.name="Negate",this._multiply=new qa({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class nl extends ea{constructor(){super(Object.assign(to(nl.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new Ko({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new el({context:this.context}),this.subtrahend=this._param,Yo(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(ea.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class sl extends Pa{constructor(){super(Object.assign(to(sl.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new Na({context:this.context,length:127,mapping:t=>t<=0?0:1}),this._scale=this.input=new qa({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class il extends ea{constructor(){super(Object.assign(to(il.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const t=to(il.getDefaults(),arguments,["value"]);this._subtract=this.input=new nl({context:this.context,value:t.value}),this._gtz=this.output=new sl({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,vo(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(ea.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class rl extends Pa{constructor(){super(Object.assign(to(rl.getDefaults(),arguments,["value"]))),this.name="Pow";const t=to(rl.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Na({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(Pa.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ol extends $a{constructor(){super(Object.assign(to(ol.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const t=to(ol.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new rl({context:this.context,value:t.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign($a.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(t){this._exp.value=t}dispose(){return super.dispose(),this._exp.dispose(),this}}class al extends ea{constructor(){super(to(ea.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const t=to(ea.getDefaults(),arguments,["value","units"]);this._lastVal=t.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new ta({context:this.context,offset:t.value,units:t.units}).start(0),this.setValueAtTime(t.value,0)}_onTick(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._constantSource.offset.setValueAtTime(e,t))}_anchorValue(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal=e,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(e,t)}getValueAtTime(t){const e=new Wo(this.context,t).toSeconds();return super.getValueAtTime(e)}setValueAtTime(t,e){const n=new Wo(this.context,e).toSeconds();return super.setValueAtTime(t,n),this}linearRampToValueAtTime(t,e){const n=new Wo(this.context,e).toSeconds();return super.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,e){const n=new Wo(this.context,e).toSeconds();return super.exponentialRampToValueAtTime(t,n),this}setTargetAtTime(t,e,n){const s=new Wo(this.context,e).toSeconds();return super.setTargetAtTime(t,s,n),this}cancelScheduledValues(t){const e=new Wo(this.context,t).toSeconds();return super.cancelScheduledValues(e),this}setValueCurveAtTime(t,e,n,s){const i=new Wo(this.context,e).toSeconds();return n=this.toSeconds(n),super.setValueCurveAtTime(t,i,n,s),this}cancelAndHoldAtTime(t){const e=new Wo(this.context,t).toSeconds();return super.cancelAndHoldAtTime(e),this}setRampPoint(t){const e=new Wo(this.context,t).toSeconds();return super.setRampPoint(e),this}exponentialRampTo(t,e,n){const s=new Wo(this.context,n).toSeconds();return super.exponentialRampTo(t,e,s),this}linearRampTo(t,e,n){const s=new Wo(this.context,n).toSeconds();return super.linearRampTo(t,e,s),this}targetRampTo(t,e,n){const s=new Wo(this.context,n).toSeconds();return super.targetRampTo(t,e,s),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class ll extends Ho{constructor(){super(to(ll.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new ea({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=to(ll.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Ho.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Lr(t))return t;{let n;for(n in ul)if(ul[n][e]===t)return n;return t}}_setCurve(t,e,n){if(Lr(n)&&Reflect.has(ul,n)){const s=ul[n];Fr(s)?"_decayCurve"!==t&&(this[t]=s[e]):this[t]=s}else{if(!jr(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Cr(["linear","exponential"].some((e=>e===t)),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0&&(n=(1-i)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let s=this._attackCurve;for(let t=1;t<s.length;t++)if(s[t-1]<=i&&i<=s[t]){s=this._attackCurve.slice(t),s[0]=i;break}this._sig.setValueCurveAtTime(s,t,n,e)}if(s&&this.sustain<1){const i=e*this.sustain,r=t+n;this.log("decay",r),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(i,s+r):this._sig.exponentialApproachValueAtTime(i,r,s)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Cr(jr(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return na(this,t,e,n),this}asArray(t=1024){return $r(this,void 0,void 0,(function*(){const e=t/this.context.sampleRate,n=new ko(1,e,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),r=.1*i,o=i+r,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:n}));return a._sig.toDestination(),a.triggerAttackRelease(e*(s+r)/o,0),(yield n.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}Ur([Ya(0)],ll.prototype,"attack",void 0),Ur([Ya(0)],ll.prototype,"decay",void 0),Ur([Ha(0,1)],ll.prototype,"sustain",void 0),Ur([Ya(0)],ll.prototype,"release",void 0);const ul=(()=>{const t=128;let e,n;const s=[];for(e=0;e<t;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[];for(e=0;e<127;e++){n=e/127;const t=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;i[e]=t/10+.83*n}i[127]=1;const r=[];for(e=0;e<t;e++)r[e]=Math.ceil(e/127*5)/5;const o=[];for(e=0;e<t;e++)n=e/127,o[e]=.5*(1-Math.cos(Math.PI*n));const a=[];for(e=0;e<t;e++){n=e/127;const t=4*Math.pow(n,3)+.2,s=Math.cos(t*Math.PI*2*n);a[e]=Math.abs(s*(1-n))}function l(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:l(a),Out:a},cosine:{In:s,Out:(u=s,u.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:l(i)},sine:{In:o,Out:l(o)},step:{In:r,Out:l(r)}};var u})();class cl extends Ho{constructor(){super(to(cl.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=to(cl.getDefaults(),arguments);this._volume=this.output=new _a({context:this.context,volume:t.volume}),this.volume=this._volume.volume,vo(this,"volume")}static getDefaults(){return Object.assign(Ho.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const n=this["_original_"+t]=this[t];this[t]=(...t)=>{const s=t[e],i=this.context.transport.schedule((s=>{t[e]=s,n.apply(this,t)}),s);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach((t=>this.context.transport.clear(t))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n),r=this.toSeconds(e);return this.triggerAttack(t,i,s),this.triggerRelease(i+r),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class hl extends cl{constructor(){super(to(hl.getDefaults(),arguments));const t=to(hl.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(cl.getDefaults(),{detune:0,onsilence:wo,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);const s=this.toSeconds(e);return this._triggerEnvelopeAttack(s,n),this.setNote(t,s),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),s=t instanceof jo?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,t,n)}else this.frequency.setValueAtTime(s,n);return this}}Ur([Ya(0)],hl.prototype,"portamento",void 0);class dl extends ll{constructor(){super(to(dl.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ko({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class pl extends hl{constructor(){super(to(pl.getDefaults(),arguments)),this.name="Synth";const t=to(pl.getDefaults(),arguments);this.oscillator=new Wa(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new dl(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),vo(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(hl.getDefaults(),{envelope:Object.assign(no(ll.getDefaults(),Object.keys(Ho.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(no(Wa.getDefaults(),[...Object.keys(ka.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class fl extends hl{constructor(){super(to(fl.getDefaults(),arguments)),this.name="ModulationSynth";const t=to(fl.getDefaults(),arguments);this._carrier=new pl({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new pl({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new ea({context:this.context,units:"frequency"}),this.detune=new ea({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new qa({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new Ko({context:this.context,gain:0}),vo(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(hl.getDefaults(),{harmonicity:3,oscillator:Object.assign(no(Wa.getDefaults(),[...Object.keys(ka.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(no(ll.getDefaults(),Object.keys(Ho.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(no(Wa.getDefaults(),[...Object.keys(ka.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(no(ll.getDefaults(),Object.keys(Ho.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class ml extends fl{constructor(){super(to(ml.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new Ia({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class gl extends Ho{constructor(){super(to(gl.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const t=to(gl.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Go({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new Go({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new Go({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new Go({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(Ho.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){Cr(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let n=0;n<t;n++){const s=19980*Math.pow(n/t,2)+20;e[n]=s}const n=new Float32Array(t),s=new Float32Array(t),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(e,n,s),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class _l extends Ho{constructor(){super(to(_l.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Ko({context:this.context}),this.output=new Ko({context:this.context}),this._filters=[];const t=to(_l.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new ea({context:this.context,units:"positive",value:t.Q}),this.frequency=new ea({context:this.context,units:"frequency",value:t.frequency}),this.detune=new ea({context:this.context,units:"cents",value:t.detune}),this.gain=new ea({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,vo(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){Cr(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._type=t,this._filters.forEach((e=>e.type=t))}get rolloff(){return this._rolloff}set rolloff(t){const e=qr(t)?t:parseInt(t,10),n=[-12,-24,-48,-96];let s=n.indexOf(e);Cr(-1!==s,`rolloff can only be ${n.join(", ")}`),s+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach((t=>t.disconnect())),this._filters=new Array(s);for(let t=0;t<s;t++){const e=new gl({context:this.context});e.type=this._type,this.frequency.connect(e.frequency),this.detune.connect(e.detune),this.Q.connect(e.Q),this.gain.connect(e.gain),this._filters[t]=e}this._internalChannels=this._filters,Yo(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new gl({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(t).map((()=>1));return this._filters.forEach((()=>{e.getFrequencyResponse(t).forEach(((t,e)=>n[e]*=t))})),e.dispose(),n}dispose(){return super.dispose(),this._filters.forEach((t=>{t.dispose()})),bo(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class yl extends ll{constructor(){super(to(yl.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const t=to(yl.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new rl({context:this.context,value:t.exponent}),this._scale=this.output=new $a({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(ll.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);Er(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class vl extends hl{constructor(){super(to(vl.getDefaults(),arguments)),this.name="MonoSynth";const t=to(vl.getDefaults(),arguments);this.oscillator=new Wa(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new _l(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new yl(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new dl(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),vo(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(hl.getDefaults(),{envelope:Object.assign(no(ll.getDefaults(),Object.keys(Ho.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(no(_l.getDefaults(),Object.keys(Ho.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(no(yl.getDefaults(),Object.keys(Ho.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(no(Wa.getDefaults(),Object.keys(ka.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,e=1){if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class bl extends hl{constructor(){super(to(bl.getDefaults(),arguments)),this.name="DuoSynth";const t=to(bl.getDefaults(),arguments);this.voice0=new vl(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new vl(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new qa({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new Ga({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Ko({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new ea({context:this.context,units:"frequency",value:440}),this.detune=new ea({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),vo(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return Jr(hl.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:Jr(no(vl.getDefaults(),Object.keys(hl.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:Jr(no(vl.getDefaults(),Object.keys(hl.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class wl extends fl{constructor(){super(to(wl.getDefaults(),arguments)),this.name="FMSynth";const t=to(wl.getDefaults(),arguments);this.modulationIndex=new qa({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(fl.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const xl=[1,1.483,1.932,2.546,2.63,3.897];class kl extends hl{constructor(){super(to(kl.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const t=to(kl.getDefaults(),arguments);this.detune=new ea({context:this.context,units:"cents",value:t.detune}),this.frequency=new ea({context:this.context,units:"frequency"}),this._amplitude=new Ko({context:this.context,gain:0}).connect(this.output),this._highpass=new _l({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let e=0;e<xl.length;e++){const n=new Va({context:this.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:"square",onstop:0===e?()=>this.onsilence(this):wo,type:"square"});n.connect(this._highpass),this._oscillators[e]=n;const s=new qa({context:this.context,value:xl[e]});this._freqMultipliers[e]=s,this.frequency.chain(s,n.frequency),this.detune.connect(n.detune)}this._filterFreqScaler=new $a({context:this.context,max:7e3,min:this.toFrequency(t.resonance)}),this.envelope=new ll({attack:t.envelope.attack,attackCurve:"linear",context:this.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=t.octaves,this.octaves=t.octaves}static getDefaults(){return Jr(hl.getDefaults(),{envelope:Object.assign(no(ll.getDefaults(),Object.keys(Ho.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(t,e=1){return this.envelope.triggerAttack(t,e),this._oscillators.forEach((e=>e.start(t))),0===this.envelope.sustain&&this._oscillators.forEach((e=>{e.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))})),this}_triggerEnvelopeRelease(t){return this.envelope.triggerRelease(t),this._oscillators.forEach((e=>e.stop(t+this.toSeconds(this.envelope.release)))),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(t){this._oscillators.forEach((e=>e.modulationIndex.value=t))}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(t){this._oscillators.forEach((e=>e.harmonicity.value=t))}get resonance(){return this._filterFreqScaler.min}set resonance(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}dispose(){return super.dispose(),this._oscillators.forEach((t=>t.dispose())),this._freqMultipliers.forEach((t=>t.dispose())),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Sl extends pl{constructor(){super(to(Sl.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=to(Sl.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,vo(this,["oscillator","envelope"])}static getDefaults(){return Jr(hl.getDefaults(),pl.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),s=this.toFrequency(t instanceof jo?t.toFrequency():t),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(s,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Ur([Ha(0)],Sl.prototype,"octaves",void 0),Ur([Ya(0)],Sl.prototype,"pitchDecay",void 0);class Tl extends cl{constructor(){super(to(Tl.getDefaults(),arguments)),this.name="NoiseSynth";const t=to(Tl.getDefaults(),arguments);this.noise=new Ta(Object.assign({context:this.context},t.noise)),this.envelope=new dl(Object.assign({context:this.context},t.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(cl.getDefaults(),{envelope:Object.assign(no(ll.getDefaults(),Object.keys(Ho.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(no(Ta.getDefaults(),Object.keys(ka.getDefaults())),{type:"white"})})}triggerAttack(t,e=1){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const Cl=new Set;function El(t){Cl.add(t)}function Ol(t,e){const n=`registerProcessor("${t}", ${e})`;Cl.add(n)}class Al extends Ho{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=wo;const e=URL.createObjectURL(new Blob([Array.from(Cl).join("\n")],{type:"text/javascript"})),n=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e,n).then((()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(n,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))}))}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}El('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),El("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),El("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const Dl="feedback-comb-filter";Ol(Dl,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Ml extends Al{constructor(){super(to(Ml.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const t=to(Ml.getDefaults(),arguments,["delayTime","resonance"]);this.input=new Ko({context:this.context}),this.output=new Ko({context:this.context}),this.delayTime=new Go({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Go({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),vo(this,["resonance","delayTime"])}_audioWorkletName(){return Dl}static getDefaults(){return Object.assign(Ho.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){Yo(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const n=t.parameters.get("feedback");this.resonance.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class Rl extends Ho{constructor(){super(to(Rl.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const t=to(Rl.getDefaults(),arguments,["frequency","type"]);this._frequency=t.frequency,this._type=t.type,this.input=new Ko({context:this.context}),this.output=new Ko({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(Ho.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),n=1/(2*Math.PI*e);if("lowpass"===this._type){const t=1/(n*this.context.sampleRate),e=t-1;this._filter=this.context.createIIRFilter([t,0],[1,e])}else{const t=1/(n*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,t])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout((()=>{this.disposed||(this.input.disconnect(t),t.disconnect())}),this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let n=0;n<t;n++){const s=19980*Math.pow(n/t,2)+20;e[n]=s}const n=new Float32Array(t),s=new Float32Array(t);return this._filter.getFrequencyResponse(e,n,s),n}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class Pl extends Ho{constructor(){super(to(Pl.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const t=to(Pl.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new Ml({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new Rl({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(Ho.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class Nl extends cl{constructor(){super(to(Nl.getDefaults(),arguments)),this.name="PluckSynth";const t=to(Nl.getDefaults(),arguments);this._noise=new Ta({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new Pl({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return Jr(cl.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,e){const n=this.toFrequency(t);e=this.toSeconds(e);const s=1/n;return this._lfcf.delayTime.setValueAtTime(s,e),this._noise.start(e),this._noise.stop(e+s*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class Il extends cl{constructor(){super(to(Il.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const t=to(Il.getDefaults(),arguments,["voice","options"]);Cr(!qr(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(cl.getDefaults(),{maxPolyphony:32,options:{},voice:pl})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const e=this._activeVoices.findIndex((e=>e.voice===t));this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return t.connect(this.output),this._voices.push(t),t}Rr("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,n){t.forEach((t=>{const s=new ca(this.context,t).toMidi(),i=this._getNextAvailableVoice();i&&(i.triggerAttack(t,e,n),this._activeVoices.push({midi:s,voice:i,released:!1}),this.log("triggerAttack",t,e))}))}_triggerRelease(t,e){t.forEach((t=>{const n=new ca(this.context,t).toMidi(),s=this._activeVoices.find((({midi:t,released:e})=>t===n&&!e));s&&(s.voice.triggerRelease(e),s.released=!0,this.log("triggerRelease",t,e))}))}_scheduleEvent(t,e,n,s){Cr(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,s):this._triggerRelease(e,n):this.context.setTimeout((()=>{this._scheduleEvent(t,e,n,s)}),n-this.now())}triggerAttack(t,e,n){Array.isArray(t)||(t=[t]);const s=this.toSeconds(e);return this._scheduleEvent("attack",t,s,n),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);const n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n);if(this.triggerAttack(t,i,s),jr(e)){Cr(jr(t),"If the duration is an array, the notes must also be an array"),t=t;for(let n=0;n<t.length;n++){const s=e[Math.min(n,e.length-1)],r=this.toSeconds(s);Cr(r>0,"The duration must be greater than 0"),this.triggerRelease(t[n],i+r)}}else{const n=this.toSeconds(e);Cr(n>0,"The duration must be greater than 0"),this.triggerRelease(t,i+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(t){const e=no(t,["onsilence","context"]);return this.options=Jr(this.options,e),this._voices.forEach((t=>t.set(e))),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){const e=this.toSeconds(t);return this._activeVoices.forEach((({voice:t})=>{t.triggerRelease(e)})),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach((t=>t.dispose())),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class ql extends cl{constructor(){super(to(ql.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=to(ql.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach((n=>{const s=parseInt(n,10);if(Cr(zr(n)||qr(s)&&isFinite(s),`url key is neither a note or midi pitch: ${n}`),zr(n)){const s=new jo(this.context,n).toMidi();e[s]=t.urls[n]}else qr(s)&&isFinite(s)&&(e[s]=t.urls[s])})),this._buffers=new ua({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(cl.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:wo,onerror:wo,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((t=>{const s=No(new jo(this.context,t).toFrequency()),i=Math.round(s),r=s-i,o=this._findClosest(i),a=i-o,l=this._buffers.get(a),u=Mo(o+r),c=new Sa({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:u}).connect(this.output);c.start(e,0,l.duration/u,n),jr(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(c),c.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const t=this._activeSources.get(i),e=t.indexOf(c);-1!==e&&t.splice(e,1)}}})),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((t=>{const n=new jo(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach((t=>{t.stop(e)})),this._activeSources.set(n,[])}})),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach((t=>{for(;t.length;)t.shift().stop(e)})),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,s=1){const i=this.toSeconds(n);return this.triggerAttack(t,i,s),jr(e)?(Cr(jr(t),"notes must be an array when duration is array"),t.forEach(((t,n)=>{const s=e[Math.min(n,e.length-1)];this.triggerRelease(t,i+this.toSeconds(s))}))):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,n){if(Cr(zr(t)||isFinite(t),`note must be a pitch or midi: ${t}`),zr(t)){const s=new jo(this.context,t).toMidi();this._buffers.add(s,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((t=>{t.forEach((t=>t.dispose()))})),this._activeSources.clear(),this}}Ur([Ya(0)],ql.prototype,"attack",void 0),Ur([Ya(0)],ql.prototype,"release",void 0);class Fl extends $o{constructor(){super(to(Fl.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new Qo("stopped"),this._startOffset=0;const t=to(Fl.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign($o.getDefaults(),{callback:wo,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,(t=>{let e;if("started"===t.state){-1!==t.id&&this.context.transport.clear(t.id);const n=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||qr(this._loop)&&this._loop>1){e=1/0,qr(this._loop)&&(e=this._loop*this._getLoopDuration());const s=this._state.getAfter(n);null!==s&&(e=Math.min(e,s.time-n)),e!==1/0&&(this._state.setStateAtTime("stopped",n+e+1,{id:-1}),e=new da(this.context,e));const i=new da(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),i,new da(this.context,n),e)}else t.id=this.context.transport.schedule(this._tick.bind(this),new da(this.context,n))}}))}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const t=this._state.getBefore(e);let n=e;null!==t&&(n=t.time),this._rescheduleEvents(n)}return this}cancel(t){t=eo(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,(t=>{this.context.transport.clear(t.id)})),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let e=.02;Vr(this.humanize)||(e=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*e}this.callback(t,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new da(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new da(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Vl extends $o{constructor(){super(to(Vl.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const t=to(Vl.getDefaults(),arguments,["callback","interval"]);this._event=new Fl({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign($o.getDefaults(),{interval:"4n",callback:wo,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(t){this._event.loop=t===1/0||t}dispose(){return super.dispose(),this._event.dispose(),this}}class jl extends Fl{constructor(){super(to(jl.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new Qo("stopped"),this._events=new Set;const t=to(jl.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach((t=>{jr(t)?this.add(t[0],t[1]):this.add(t)}))}static getDefaults(){return Object.assign(Fl.getDefaults(),{events:[]})}start(t,e){const n=this.toTicks(t);if("started"!==this._state.getValueAtTime(n)){e=eo(e,this._loop?this._loopStart:0),e=this._loop?eo(e,this._loopStart):eo(e,0);const t=this.toTicks(e);this._state.add({id:-1,offset:t,state:"started",time:n}),this._forEach((e=>{this._startNote(e,n,t)}))}return this}_startNote(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new da(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new da(this.context,e))):t.startOffset>=n&&t.start(new da(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach((t=>{t.startOffset+=this._startOffset}))}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach((e=>{e.stop(t)})),this}at(t,e){const n=new Wo(this.context,t).toTicks(),s=new da(this.context,1).toSeconds(),i=this._events.values();let r=i.next();for(;!r.done;){const t=r.value;if(Math.abs(n-t.startOffset)<s)return Nr(e)&&(t.value=e),t;r=i.next()}return Nr(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const n=this.toTicks(t);let s;return e instanceof Fl?(s=e,s.callback=this._tick.bind(this)):s=new Fl({callback:this._tick.bind(this),context:this.context,value:e}),s.startOffset=n,s.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(s),this._restartEvent(s),this}_restartEvent(t){this._state.forEach((e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new da(this.context,e.time))}))}remove(t,e){return Fr(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach((n=>{n.startOffset===t&&(Pr(e)||Nr(e)&&n.value===e)&&(this._events.delete(n),n.dispose())})),this}clear(){return this._forEach((t=>t.dispose())),this._events.clear(),this}cancel(t){return this._forEach((e=>e.cancel(t))),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach((e=>{e instanceof jl?e._forEach(t):t(e)})),this}_setAll(t,e){this._forEach((n=>{n[t]=e}))}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach((e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)}))}get loopEnd(){return new da(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach((e=>{e.loopEnd=t,this._testLoopBoundries(e)}))}get loopStart(){return new da(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach((t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*Ll(t){let e=0;for(;e<t.length;)e=Wl(e,t),yield t[e],e++}function*zl(t){let e=t.length-1;for(;e>=0;)e=Wl(e,t),yield t[e],e--}function*Bl(t,e){for(;;)yield*e(t)}function Wl(t,e){return uo(t,0,e.length-1)}function*Ul(t,e){let n=e?0:t.length-1;for(;;)n=Wl(n,t),yield t[n],e?(n++,n>=t.length-1&&(e=!1)):(n--,n<=0&&(e=!0))}function*$l(t){let e=0,n=0;for(;e<t.length;)e=Wl(e,t),yield t[e],n++,e+=n%2?2:-1}function*Ql(t){let e=t.length-1,n=0;for(;e>=0;)e=Wl(e,t),yield t[e],n++,e+=n%2?-2:1}function*Gl(t){const e=[];for(let n=0;n<t.length;n++)e.push(n);for(;e.length>0;){const n=Wl(e.splice(Math.floor(e.length*Math.random()),1)[0],t);yield t[n]}}function*Hl(t,e="up",n=0){switch(Cr(t.length>0,"The array must have more than one value in it"),e){case"up":yield*Bl(t,Ll);case"down":yield*Bl(t,zl);case"upDown":yield*Ul(t,!0);case"downUp":yield*Ul(t,!1);case"alternateUp":yield*Bl(t,$l);case"alternateDown":yield*Bl(t,Ql);case"random":yield*function*(t){for(;;){const e=Math.floor(Math.random()*t.length);yield t[e]}}(t);case"randomOnce":yield*Bl(t,Gl);case"randomWalk":yield*function*(t){let e=Math.floor(Math.random()*t.length);for(;;)0===e?e++:e===t.length-1||Math.random()<.5?e--:e++,yield t[e]}(t)}}class Yl extends Vl{constructor(){super(to(Yl.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const t=to(Yl.getDefaults(),arguments,["callback","values","pattern"]);this.callback=t.callback,this._values=t.values,this._pattern=Hl(t.values,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(Vl.getDefaults(),{pattern:"up",values:[],callback:wo})}_tick(t){const e=this._pattern.next();this._value=e.value,this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=Hl(this._values,this._type)}}class Xl extends Fl{constructor(){super(to(Xl.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new jl({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const t=to(Xl.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(t.subdivision),this.events=t.events,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.playbackRate=t.playbackRate,this.probability=t.probability,this.humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate}static getDefaults(){return Object.assign(no(Fl.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(t,e){null!==e&&this.callback(t,e)}get events(){return this._events}set events(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(t,e){return this._part.start(t,e?this._indexTime(e):e),this}stop(t){return this._part.stop(t),this}get subdivision(){return new da(this.context,this._subdivision).toSeconds()}_createSequence(t){return new Proxy(t,{get:(t,e)=>t[e],set:(t,e,n)=>(Lr(e)&&isFinite(parseInt(e,10))&&jr(n)?t[e]=this._createSequence(n):t[e]=n,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(t,e,n){t.forEach(((t,s)=>{const i=s*e+n;if(jr(t))this._rescheduleSequence(t,e/t.length,i);else{const e=new da(this.context,i,"i").toSeconds();this._part.add(e,t)}}))}_indexTime(t){return new da(this.context,t*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(t){this._part.loop=t}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t)}get startOffset(){return this._part.startOffset}set startOffset(t){this._part.startOffset=t}get playbackRate(){return this._part.playbackRate}set playbackRate(t){this._part.playbackRate=t}get probability(){return this._part.probability}set probability(t){this._part.probability=t}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(t){this._part.humanize=t}get length(){return this._part.length}}class Zl extends Ho{constructor(){super(Object.assign(to(Zl.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new tl({context:this.context}),this.a=new Ko({context:this.context,gain:0}),this.b=new Ko({context:this.context,gain:0}),this.output=new Ko({context:this.context}),this._internalChannels=[this.a,this.b];const t=to(Zl.getDefaults(),arguments,["fade"]);this.fade=new ea({context:this.context,units:"normalRange",value:t.fade}),vo(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Xo(this._split,this.a.gain,0),Xo(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Ho.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Kl extends Ho{constructor(t){super(t),this.name="Effect",this._dryWet=new Zl({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Ko({context:this.context}),this.effectReturn=new Ko({context:this.context}),this.input=new Ko({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],vo(this,"wet")}static getDefaults(){return Object.assign(Ho.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Jl extends Kl{constructor(t){super(t),this.name="LFOEffect",this._lfo=new Ga({context:this.context,frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=t.type,vo(this,["frequency","depth"])}static getDefaults(){return Object.assign(Kl.getDefaults(),{frequency:1,type:"sine",depth:1})}start(t){return this._lfo.start(t),this}stop(t){return this._lfo.stop(t),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class tu extends Jl{constructor(){super(to(tu.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const t=to(tu.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new _l(Object.assign(t.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=t.octaves,this.baseFrequency=t.baseFrequency}static getDefaults(){return Object.assign(Jl.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)}dispose(){return super.dispose(),this.filter.dispose(),this}}class eu extends Ho{constructor(){super(Object.assign(to(eu.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=to(eu.getDefaults(),arguments,["pan"]);this.pan=new Go({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",vo(this,"pan")}static getDefaults(){return Object.assign(Ho.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class nu extends Jl{constructor(){super(to(nu.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const t=to(nu.getDefaults(),arguments,["frequency"]);this._panner=new eu({context:this.context,channelCount:t.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(Jl.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class su extends Ho{constructor(){super(to(su.getDefaults(),arguments,["smoothing"])),this.name="Follower";const t=to(su.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new Ja({context:this.context}),this._lowpass=this.output=new Rl({context:this.context,frequency:1/this.toSeconds(t.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=t.smoothing}static getDefaults(){return Object.assign(Ho.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class iu extends Kl{constructor(){super(to(iu.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const t=to(iu.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new su({context:this.context,smoothing:t.follower}),this._sweepRange=new ol({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this._inputBoost=new Ko({context:this.context}),this._bandpass=new _l({context:this.context,rolloff:-48,frequency:0,Q:t.Q}),this._peaking=new _l({context:this.context,type:"peaking"}),this._peaking.gain.value=t.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=t.sensitivity,vo(this,["gain","Q"])}static getDefaults(){return Object.assign(Kl.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(t){this._follower.smoothing=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()}get sensitivity(){return Do(1/this._inputBoost.gain.value)}set sensitivity(t){this._inputBoost.gain.value=1/Ao(t)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const ru="bit-crusher";Ol(ru,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class ou extends Kl{constructor(){super(to(ou.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const t=to(ou.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new au({context:this.context,bits:t.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Kl.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class au extends Al{constructor(){super(to(au.getDefaults(),arguments)),this.name="BitCrusherWorklet";const t=to(au.getDefaults(),arguments);this.input=new Ko({context:this.context}),this.output=new Ko({context:this.context}),this.bits=new Go({context:this.context,value:t.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(Al.getDefaults(),{bits:12})}_audioWorkletName(){return ru}onReady(t){Yo(this.input,t,this.output);const e=t.parameters.get("bits");this.bits.setParam(e)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class lu extends Kl{constructor(){super(to(lu.getDefaults(),arguments,["order"])),this.name="Chebyshev";const t=to(lu.getDefaults(),arguments,["order"]);this._shaper=new Na({context:this.context,length:4096}),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample}static getDefaults(){return Object.assign(Kl.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(t,e,n){return n.has(e)||(0===e?n.set(e,0):1===e?n.set(e,t):n.set(e,2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n))),n.get(e)}get order(){return this._order}set order(t){this._order=t,this._shaper.setMap((e=>this._getCoefficient(e,t,new Map)))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class uu extends Ho{constructor(){super(to(uu.getDefaults(),arguments,["channels"])),this.name="Split";const t=to(uu.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Ho.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class cu extends Ho{constructor(){super(to(cu.getDefaults(),arguments,["channels"])),this.name="Merge";const t=to(cu.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(Ho.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class hu extends Ho{constructor(t){super(t),this.name="StereoEffect",this.input=new Ko({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Zl({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new uu({context:this.context,channels:2}),this._merge=new cu({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),vo(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),Yo(...t),Xo(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),Yo(...t),Xo(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(Ho.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class du extends hu{constructor(t){super(t),this.feedback=new ea({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new Ko({context:this.context}),this._feedbackR=new Ko({context:this.context}),this._feedbackSplit=new uu({context:this.context,channels:2}),this._feedbackMerge=new cu({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),vo(this,["feedback"])}static getDefaults(){return Object.assign(hu.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class pu extends du{constructor(){super(to(pu.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const t=to(pu.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new Ga({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new Ga({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new aa({context:this.context}),this._delayNodeR=new aa({context:this.context}),this.frequency=this._lfoL.frequency,vo(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(du.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return 1e3*this._delayTime}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class fu extends Kl{constructor(){super(to(fu.getDefaults(),arguments,["distortion"])),this.name="Distortion";const t=to(fu.getDefaults(),arguments,["distortion"]);this._shaper=new Na({context:this.context,length:4096}),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample}static getDefaults(){return Object.assign(Kl.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;const e=100*t,n=Math.PI/180;this._shaper.setMap((t=>Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class mu extends Kl{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new Ko({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,vo(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Kl.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class gu extends mu{constructor(){super(to(gu.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const t=to(gu.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new aa({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),vo(this,"delayTime")}static getDefaults(){return Object.assign(mu.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class _u extends Ho{constructor(t){super(t),this.name="PhaseShiftAllpass",this.input=new Ko({context:this.context}),this.output=new Ko({context:this.context}),this.offset90=new Ko({context:this.context}),this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),Yo(this.input,...this._bank0,this._oneSampleDelay,this.output),Yo(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(t){return t.map((t=>{const e=[[t*t,0,-1],[1,0,-t*t]];return this.context.createIIRFilter(e[0],e[1])}))}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach((t=>t.disconnect())),this._bank1.forEach((t=>t.disconnect())),this._oneSampleDelay.disconnect(),this}}class yu extends Kl{constructor(){super(to(yu.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const t=to(yu.getDefaults(),arguments,["frequency"]);this.frequency=new ea({context:this.context,units:"frequency",value:t.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new Ma({context:this.context,type:"sine"}),this._cosine=new Ra({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new qa({context:this.context}),this._cosineMultiply=new qa({context:this.context}),this._negate=new el({context:this.context}),this._add=new Ua({context:this.context}),this._phaseShifter=new _u({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const e=this.immediate();this._sine.start(e),this._cosine.start(e)}static getDefaults(){return Object.assign(Kl.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const vu=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],bu=[225,556,441,341];class wu extends hu{constructor(){super(to(wu.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const t=to(wu.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new ea({context:this.context,value:t.roomSize,units:"normalRange"}),this._allpassFiltersL=bu.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._allpassFiltersR=bu.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._combFilters=vu.map(((e,n)=>{const s=new Pl({context:this.context,dampening:t.dampening,delayTime:e});return n<vu.length/2?this.connectEffectLeft(s,...this._allpassFiltersL):this.connectEffectRight(s,...this._allpassFiltersR),this.roomSize.connect(s.resonance),s})),vo(this,["roomSize"])}static getDefaults(){return Object.assign(hu.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(t){this._combFilters.forEach((e=>e.dampening=t))}dispose(){return super.dispose(),this._allpassFiltersL.forEach((t=>t.disconnect())),this._allpassFiltersR.forEach((t=>t.disconnect())),this._combFilters.forEach((t=>t.dispose())),this.roomSize.dispose(),this}}const xu=[.06748,.06404,.08212,.09004],ku=[.773,.802,.753,.733],Su=[347,113,37];class Tu extends hu{constructor(){super(to(Tu.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const t=to(Tu.getDefaults(),arguments,["roomSize"]);this.roomSize=new ea({context:this.context,value:t.roomSize,units:"normalRange"}),this._scaleRoomSize=new $a({context:this.context,min:-.733,max:.197}),this._allpassFilters=Su.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._feedbackCombFilters=xu.map(((t,e)=>{const n=new Ml({context:this.context,delayTime:t});return this._scaleRoomSize.connect(n.resonance),n.resonance.value=ku[e],e<xu.length/2?this.connectEffectLeft(...this._allpassFilters,n):this.connectEffectRight(...this._allpassFilters,n),n})),this.roomSize.connect(this._scaleRoomSize),vo(this,["roomSize"])}static getDefaults(){return Object.assign(hu.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach((t=>t.disconnect())),this._feedbackCombFilters.forEach((t=>t.dispose())),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class Cu extends du{constructor(t){super(t),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),vo(this,["feedback"])}}class Eu extends Cu{constructor(){super(to(Eu.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const t=to(Eu.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new aa({context:this.context,maxDelay:t.maxDelay}),this._rightDelay=new aa({context:this.context,maxDelay:t.maxDelay}),this._rightPreDelay=new aa({context:this.context,maxDelay:t.maxDelay}),this.delayTime=new ea({context:this.context,units:"time",value:t.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),vo(this,["delayTime"])}static getDefaults(){return Object.assign(Cu.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class Ou extends mu{constructor(){super(to(Ou.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const t=to(Ou.getDefaults(),arguments,["pitch"]);this._frequency=new ea({context:this.context}),this._delayA=new aa({maxDelay:1,context:this.context}),this._lfoA=new Ga({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new aa({maxDelay:1,context:this.context}),this._lfoB=new Ga({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new Zl({context:this.context}),this._crossFadeLFO=new Ga({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new aa({delayTime:t.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,vo(this,"delayTime"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const e=this.now();this._lfoA.start(e),this._lfoB.start(e),this._crossFadeLFO.start(e),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(mu.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(t){this._pitch=t;let e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=Mo(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=Mo(t)-1),this._frequency.value=e*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Au extends hu{constructor(){super(to(Au.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const t=to(Au.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new Ga({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new Ga({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this.Q=new ea({context:this.context,value:t.Q,units:"positive"}),this._filtersL=this._makeFilters(t.stages,this._lfoL),this._filtersR=this._makeFilters(t.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),vo(this,["frequency","Q"])}static getDefaults(){return Object.assign(hu.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(t,e){const n=[];for(let s=0;s<t;s++){const t=this.context.createBiquadFilter();t.type="allpass",this.Q.connect(t.Q),e.connect(t.frequency),n.push(t)}return n}get octaves(){return this._octaves}set octaves(t){this._octaves=t;const e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach((t=>t.disconnect())),this._filtersR.forEach((t=>t.disconnect())),this.frequency.dispose(),this}}class Du extends Kl{constructor(){super(to(Du.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=to(Du.getDefaults(),arguments,["decay"]);this._decay=t.decay,this._preDelay=t.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Kl.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){Er(t=this.toSeconds(t),.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){Er(t=this.toSeconds(t),0),this._preDelay=t,this.generate()}generate(){return $r(this,void 0,void 0,(function*(){const t=this.ready,e=new ko(2,this._decay+this._preDelay,this.context.sampleRate),n=new Ta({context:e}),s=new Ta({context:e}),i=new cu({context:e});n.connect(i,0,0),s.connect(i,0,1);const r=new Ko({context:e}).toDestination();i.connect(r),n.start(0),s.start(0),r.gain.setValueAtTime(0,0),r.gain.setValueAtTime(1,this._preDelay),r.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const o=e.render();return this.ready=o.then(wo),yield t,this._convolver.buffer=(yield o).get(),this}))}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Mu extends Ho{constructor(){super(to(Mu.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new uu({channels:2,context:this.context}),this._midAdd=new Ua({context:this.context}),this.mid=new qa({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new nl({context:this.context}),this.side=new qa({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class Ru extends Ho{constructor(){super(to(Ru.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new Ko({context:this.context}),this.side=new Ko({context:this.context}),this._left=new Ua({context:this.context}),this._leftMult=new qa({context:this.context,value:Math.SQRT1_2}),this._right=new nl({context:this.context}),this._rightMult=new qa({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new cu({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class Pu extends Kl{constructor(t){super(t),this.name="MidSideEffect",this._midSideMerge=new Ru({context:this.context}),this._midSideSplit=new Mu({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...t){this._midSend.chain(...t,this._midReturn)}connectEffectSide(...t){this._sideSend.chain(...t,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class Nu extends Pu{constructor(){super(to(Nu.getDefaults(),arguments,["width"])),this.name="StereoWidener";const t=to(Nu.getDefaults(),arguments,["width"]);this.width=new ea({context:this.context,value:t.width,units:"normalRange"}),vo(this,["width"]),this._twoTimesWidthMid=new qa({context:this.context,value:2}),this._twoTimesWidthSide=new qa({context:this.context,value:2}),this._midMult=new qa({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new nl({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),Xo(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new qa({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(Pu.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Iu extends hu{constructor(){super(to(Iu.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const t=to(Iu.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new Ga({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new Ga({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new Ko({context:this.context}),this._amplitudeR=new Ko({context:this.context}),this.frequency=new ea({context:this.context,value:t.frequency,units:"frequency"}),this.depth=new ea({context:this.context,value:t.depth,units:"normalRange"}),vo(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(hu.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class qu extends Kl{constructor(){super(to(qu.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const t=to(qu.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new aa({context:this.context,delayTime:0,maxDelay:t.maxDelay}),this._lfo=new Ga({context:this.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=t.depth,vo(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Kl.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Fu extends Ho{constructor(){super(to(Fu.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const t=to(Fu.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new Ko({context:this.context}),this._split=new uu({context:this.context,channels:t.channels}),this.input.connect(this._split),Er(t.channels,1);for(let e=0;e<t.channels;e++)this._analysers[e]=this.context.createAnalyser(),this._split.connect(this._analysers[e],e,0);this.size=t.size,this.type=t.type}static getDefaults(){return Object.assign(Ho.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach(((t,e)=>{const n=this._buffers[e];"fft"===this._type?t.getFloatFrequencyData(n):"waveform"===this._type&&t.getFloatTimeDomainData(n)})),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach(((e,n)=>{e.fftSize=2*t,this._buffers[n]=new Float32Array(t)}))}get channels(){return this._analysers.length}get type(){return this._type}set type(t){Cr("waveform"===t||"fft"===t,`Analyser: invalid type: ${t}`),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach((e=>e.smoothingTimeConstant=t))}dispose(){return super.dispose(),this._analysers.forEach((t=>t.disconnect())),this._split.dispose(),this._gain.dispose(),this}}class Vu extends Ho{constructor(){super(to(Vu.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Fu({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class ju extends Vu{constructor(){super(to(ju.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const t=to(ju.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new Fu({context:this.context,size:256,type:"waveform",channels:t.channels}),this.smoothing=t.smoothing,this.normalRange=t.normalRange}static getDefaults(){return Object.assign(Vu.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return Rr("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),e=(1===this.channels?[t]:t).map((t=>{const e=t.reduce(((t,e)=>t+e*e),0),n=Math.sqrt(e/t.length);return this._rms=Math.max(n,this._rms*this.smoothing),this.normalRange?this._rms:Do(this._rms)}));return 1===this.channels?e[0]:e}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Lu extends Vu{constructor(){super(to(Lu.getDefaults(),arguments,["size"])),this.name="FFT";const t=to(Lu.getDefaults(),arguments,["size"]);this.normalRange=t.normalRange,this._analyser.type="fft",this.size=t.size}static getDefaults(){return Object.assign(Ho.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map((t=>this.normalRange?Ao(t):t))}get size(){return this._analyser.size}set size(t){this._analyser.size=t}get smoothing(){return this._analyser.smoothing}set smoothing(t){this._analyser.smoothing=t}getFrequencyOfIndex(t){return Cr(0<=t&&t<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),t*this.context.sampleRate/(2*this.size)}}class zu extends Vu{constructor(){super(to(zu.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Bu extends Vu{constructor(){super(to(Bu.getDefaults(),arguments,["size"])),this.name="Waveform";const t=to(Bu.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=t.size}static getDefaults(){return Object.assign(Vu.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(t){this._analyser.size=t}}class Wu extends Ho{constructor(){super(to(Wu.getDefaults(),arguments,["solo"])),this.name="Solo";const t=to(Wu.getDefaults(),arguments,["solo"]);this.input=this.output=new Ko({context:this.context}),Wu._allSolos.has(this.context)||Wu._allSolos.set(this.context,new Set),Wu._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Ho.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Wu._allSolos.get(this.context).forEach((t=>t._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){Wu._soloed.has(this.context)||Wu._soloed.set(this.context,new Set),Wu._soloed.get(this.context).add(this)}_removeSolo(){Wu._soloed.has(this.context)&&Wu._soloed.get(this.context).delete(this)}_isSoloed(){return Wu._soloed.has(this.context)&&Wu._soloed.get(this.context).has(this)}_noSolos(){return!Wu._soloed.has(this.context)||Wu._soloed.has(this.context)&&0===Wu._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Wu._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Wu._allSolos=new Map,Wu._soloed=new Map;class Uu extends Ho{constructor(){super(to(Uu.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=to(Uu.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new eu({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new _a({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,vo(this,["pan","volume"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class $u extends Ho{constructor(){super(to($u.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=to($u.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Wu({solo:t.solo,context:this.context}),this._panVol=this.output=new Uu({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),vo(this,["pan","volume"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return $u.buses.has(t)||$u.buses.set(t,new Ko({context:this.context})),$u.buses.get(t)}send(t,e=0){const n=this._getBus(t),s=new Ko({context:this.context,units:"decibels",gain:e});return this.connect(s),s.connect(n),s}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}$u.buses=new Map;class Qu extends Ho{constructor(){super(to(Qu.getDefaults(),arguments)),this.name="Mono",this.input=new Ko({context:this.context}),this._merge=this.output=new cu({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class Gu extends Ho{constructor(){super(to(Gu.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new Ko({context:this.context}),this.output=void 0,this.low=new _l({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new _l({context:this.context,frequency:0,type:"highpass"}),this.mid=new _l({context:this.context,frequency:0,type:"lowpass"}),this.high=new _l({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const t=to(Gu.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new ea({context:this.context,units:"frequency",value:t.lowFrequency}),this.highFrequency=new ea({context:this.context,units:"frequency",value:t.highFrequency}),this.Q=new ea({context:this.context,units:"positive",value:t.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),vo(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),bo(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class Hu extends Ho{constructor(){super(...arguments),this.name="Listener",this.positionX=new Go({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Go({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Go({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Go({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Go({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Go({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Go({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Go({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Go({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Ho.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}po((t=>{t.listener=new Hu({context:t})})),mo((t=>{t.listener.dispose()}));class Yu extends Ho{constructor(){super(to(Yu.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const t=to(Yu.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=t.panningModel,this.maxDistance=t.maxDistance,this.distanceModel=t.distanceModel,this.coneOuterGain=t.coneOuterGain,this.coneOuterAngle=t.coneOuterAngle,this.coneInnerAngle=t.coneInnerAngle,this.refDistance=t.refDistance,this.rolloffFactor=t.rolloffFactor,this.positionX=new Go({context:this.context,param:this._panner.positionX,value:t.positionX}),this.positionY=new Go({context:this.context,param:this._panner.positionY,value:t.positionY}),this.positionZ=new Go({context:this.context,param:this._panner.positionZ,value:t.positionZ}),this.orientationX=new Go({context:this.context,param:this._panner.orientationX,value:t.orientationX}),this.orientationY=new Go({context:this.context,param:this._panner.orientationY,value:t.orientationY}),this.orientationZ=new Go({context:this.context,param:this._panner.orientationZ,value:t.orientationZ})}static getDefaults(){return Object.assign(Ho.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(t,e,n){return this.positionX.value=t,this.positionY.value=e,this.positionZ.value=n,this}setOrientation(t,e,n){return this.orientationX.value=t,this.orientationY.value=e,this.orientationZ.value=n,this}get panningModel(){return this._panner.panningModel}set panningModel(t){this._panner.panningModel=t}get refDistance(){return this._panner.refDistance}set refDistance(t){this._panner.refDistance=t}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(t){this._panner.rolloffFactor=t}get distanceModel(){return this._panner.distanceModel}set distanceModel(t){this._panner.distanceModel=t}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(t){this._panner.coneInnerAngle=t}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(t){this._panner.coneOuterAngle=t}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(t){this._panner.coneOuterGain=t}get maxDistance(){return this._panner.maxDistance}set maxDistance(t){this._panner.maxDistance=t}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class Xu extends Ho{constructor(){super(to(Xu.getDefaults(),arguments)),this.name="Recorder";const t=to(Xu.getDefaults(),arguments);this.input=new Ko({context:this.context}),Cr(Xu.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:t.mimeType})}static getDefaults(){return Ho.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return null!==Br&&Reflect.has(Br,"MediaRecorder")}get state(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}start(){return $r(this,void 0,void 0,(function*(){Cr("started"!==this.state,"Recorder is already started");const t=new Promise((t=>{const e=()=>{this._recorder.removeEventListener("start",e,!1),t()};this._recorder.addEventListener("start",e,!1)}));return this._recorder.start(),yield t}))}stop(){return $r(this,void 0,void 0,(function*(){Cr("stopped"!==this.state,"Recorder is not started");const t=new Promise((t=>{const e=n=>{this._recorder.removeEventListener("dataavailable",e,!1),t(n.data)};this._recorder.addEventListener("dataavailable",e,!1)}));return this._recorder.stop(),yield t}))}pause(){return Cr("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class Zu extends Ho{constructor(){super(to(Zu.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const t=to(Zu.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new Go({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:t.threshold}),this.attack=new Go({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:t.attack}),this.release=new Go({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:t.release}),this.knee=new Go({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:t.knee}),this.ratio=new Go({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:t.ratio}),vo(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Ku extends Ho{constructor(){super(Object.assign(to(Ku.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const t=to(Ku.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new su({context:this.context,smoothing:t.smoothing}),this._gt=new il({context:this.context,value:Ao(t.threshold)}),this.input=new Ko({context:this.context}),this._gate=this.output=new Ko({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(Ho.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return Do(this._gt.value)}set threshold(t){this._gt.value=Ao(t)}get smoothing(){return this._follower.smoothing}set smoothing(t){this._follower.smoothing=t}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Ju extends Ho{constructor(){super(Object.assign(to(Ju.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const t=to(Ju.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new Zu({context:this.context,ratio:20,attack:.003,release:.01,threshold:t.threshold}),this.threshold=this._compressor.threshold,vo(this,"threshold")}static getDefaults(){return Object.assign(Ho.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class tc extends Ho{constructor(){super(Object.assign(to(tc.getDefaults(),arguments))),this.name="MidSideCompressor";const t=to(tc.getDefaults(),arguments);this._midSideSplit=this.input=new Mu({context:this.context}),this._midSideMerge=this.output=new Ru({context:this.context}),this.mid=new Zu(Object.assign(t.mid,{context:this.context})),this.side=new Zu(Object.assign(t.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),vo(this,["mid","side"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class ec extends Ho{constructor(){super(Object.assign(to(ec.getDefaults(),arguments))),this.name="MultibandCompressor";const t=to(ec.getDefaults(),arguments);this._splitter=this.input=new Gu({context:this.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Ko({context:this.context}),this.low=new Zu(Object.assign(t.low,{context:this.context})),this.mid=new Zu(Object.assign(t.mid,{context:this.context})),this.high=new Zu(Object.assign(t.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),vo(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class nc extends Ho{constructor(){super(to(nc.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new Ko({context:this.context}),this._internalChannels=[];const t=to(nc.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new Gu({context:this.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),this._lowGain=new Ko({context:this.context,gain:t.low,units:"decibels"}),this._midGain=new Ko({context:this.context,gain:t.mid,units:"decibels"}),this._highGain=new Ko({context:this.context,gain:t.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),vo(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(Ho.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),bo(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class sc extends Ho{constructor(){super(to(sc.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const t=to(sc.getDefaults(),arguments,["url","onload"]);this._buffer=new xo(t.url,(e=>{this.buffer=e,t.onload()})),this.input=new Ko({context:this.context}),this.output=new Ko({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=t.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(Ho.getDefaults(),{normalize:!0,onload:wo})}load(t){return $r(this,void 0,void 0,(function*(){this.buffer=yield this._buffer.load(t)}))}get buffer(){return this._buffer.length?this._buffer:null}set buffer(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const e=this._buffer.get();this._convolver.buffer=e||null}get normalize(){return this._convolver.normalize}set normalize(t){this._convolver.normalize=t}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function ic(){return Co().now()}function rc(){return Co().immediate()}const oc=Co().transport;function ac(){return Co().transport}const lc=Co().destination,uc=Co().destination;function cc(){return Co().destination}const hc=Co().listener;function dc(){return Co().listener}const pc=Co().draw;function fc(){return Co().draw}const mc=Co();function gc(){return xo.loaded()}const _c=xo,yc=ua,vc=Sa;let bc,wc={};const xc=async function(){await Oo(),oc.bpm.value=99},kc=function(){return s},Sc=function(t,e){wc[t]=e},Tc=function(t){const e=wc[t];return delete wc[t],e},Cc=function(t){return wc[t]},Ec=function(t,e,n,s){bc=new Array(t).fill(new Array(e).fill(new Array(n).fill(!1)));for(let i=0;i<t;i++)for(let r=0;r<e;r++)for(let e=0;e<n;e++)bc[i][r][e]=new Vl((t=>{s(i,r,e).forEach((e=>wc[e].schedule(t)))}),`${t}m`).start(`${i}:${r}:${e}`)},Oc=function(){oc.start()},Ac=function(){oc.stop()},Dc=function(t){oc.bpm.value=t},Mc=ae({name:"instruments",initialState:{instruments:{byId:{},allIds:[]}},reducers:{instrumentAdded:{reducer(t,e){const{name:n,params:s}=e.payload,i=n;t.instruments.allIds.push(i),t.instruments.byId[i]={name:i,params:s}},prepare(t,e){return{payload:{name:t,params:(n=e.getAllParameterNames().map((t=>[t,e.getParameterConfig(t)])),{byId:Object.fromEntries(n),allIds:n.map((t=>t[0]))})}};var n}},instrumentRemoved:(t,e)=>{const n=e.payload;delete t.instruments.byId[n],t.instruments.allIds.splice(t.instruments.allIds.indexOf(n),1)},instrumentParameterUpdated:{reducer(t,e){const{instrumentName:n,parameterName:s,value:i}=e.payload;t.instruments.byId[n].params.byId[s].value=i},prepare:(t,e,n)=>({payload:{instrumentName:t,parameterName:e,value:n}})}}});function Rc(t,e){return function(n,s){Sc(t,e),n(Mc.actions.instrumentAdded(t,e))}}const Pc=t=>t.instruments.instruments.allIds,{instrumentAdded:Nc,instrumentRemoved:Ic}=(I([Pc,t=>t.instruments.instruments.byId],((t,e)=>t.map((t=>e[t])))),Mc.actions),qc=Mc.reducer,Fc=ae({name:"sequencer",initialState:{nBars:2,beatsPerBar:4,padsPerBeat:4,pads:new Array(2).fill(new Array(4).fill(new Array(4).fill({}))),isPlaying:!1,tempo:60,timerId:0},reducers:{play:t=>{t.isPlaying=!0},pause:t=>{t.isPlaying=!1},setTempo:(t,e)=>{t.tempo=e.payload},padClick:{reducer(t,e){const{instrumentName:n,bari:s,beati:i,padi:r}=e.payload;t.pads[s][i][r][n]=!t.pads[s][i][r][n]},prepare:(t,e,n,s)=>({payload:{instrumentName:t,bari:e,beati:n,padi:s}})},clearAllPads:t=>{const{nBars:e,beatsPerBar:n,padsPerBeat:s}=t;for(let i=0;i<e;i++)for(let e=0;e<n;e++)for(let n=0;n<s;n++)Object.keys(t.pads[i][e][n]).forEach((s=>{t.pads[i][e][n][s]=!1}))}},extraReducers:t=>{t.addCase(Nc,((t,e)=>{const{nBars:n,beatsPerBar:s,padsPerBeat:i}=t,{name:r}=e.payload;for(let e=0;e<n;e++)for(let n=0;n<s;n++)for(let s=0;s<i;s++)t.pads[e][n][s][r]=!1})).addCase(Ic,((t,e)=>{const{nBars:n,beatsPerBar:s,padsPerBeat:i}=t,r=e.payload;for(let e=0;e<n;e++)for(let n=0;n<s;n++)for(let s=0;s<i;s++)delete t.pads[e][n][s][r]}))}});function Vc(t,e){t(Fc.actions.play()),Oc()}function jc(t,e){t(Fc.actions.pause()),Ac()}function Lc(t){return function(e,n){e(Fc.actions.setTempo(t)),Dc(t)}}const zc=t=>t.sequencer.nBars,Bc=t=>t.sequencer.beatsPerBar,Wc=t=>t.sequencer.padsPerBeat,Uc=(t,e,n,s,i)=>t.sequencer.pads[n][s][i][e],{padClick:$c,clearAllPads:Qc}=Fc.actions,Gc=function(t){var e,n=function(t){return function(t){void 0===t&&(t={});var e=t.thunk,n=void 0===e||e,s=(t.immutableCheck,t.serializableCheck,new ie);return n&&(function(t){return"boolean"==typeof t}(n)?s.push(Y):s.push(Y.withExtraArgument(n.extraArgument))),s}(t)},s=t||{},i=s.reducer,r=void 0===i?void 0:i,o=s.middleware,a=void 0===o?n():o,l=s.devTools,u=void 0===l||l,c=s.preloadedState,h=void 0===c?void 0:c,d=s.enhancers,p=void 0===d?void 0:d;if("function"==typeof r)e=r;else{if(!function(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(r))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=function(t){for(var e=Object.keys(t),n={},s=0;s<e.length;s++){var i=e[s];"function"==typeof t[i]&&(n[i]=t[i])}var r,o=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:B.INIT}))throw new Error(j(12));if(void 0===n(void 0,{type:B.PROBE_UNKNOWN_ACTION()}))throw new Error(j(13))}))}(n)}catch(t){r=t}return function(t,e){if(void 0===t&&(t={}),r)throw r;for(var s=!1,i={},a=0;a<o.length;a++){var l=o[a],u=n[l],c=t[l],h=u(c,e);if(void 0===h)throw e&&e.type,new Error(j(14));i[l]=h,s=s||h!==c}return(s=s||o.length!==Object.keys(t).length)?i:t}}(r)}var f=a;"function"==typeof f&&(f=f(n));var m=Q.apply(void 0,f),g=$;u&&(g=se(ne({trace:!1},"object"==typeof u&&u)));var _=[m];return Array.isArray(p)?_=Xt([m],p):"function"==typeof p&&(_=p(_)),U(e,h,g.apply(void 0,_))}({reducer:{sequencer:Fc.reducer,instruments:qc}}),Hc=()=>_();function Yc(){const[t,e]=i.useState(0);function n(){e((t=>(t+1)%3))}return i.useEffect((()=>{const t=window.setInterval(n,500);return()=>window.clearTimeout(t)}),[]),i.createElement("div",{className:"loading"},`Loading${".".repeat(t+1)}`)}function Xc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Zc{constructor(t){Xc(this,"name",void 0),Xc(this,"min",void 0),Xc(this,"max",void 0),Xc(this,"value",void 0),Xc(this,"step",void 0),this.name=t.name,this.min=t.min,this.max=t.max,this.value=t.value,this.step=t.step}getValue(){return this.value}setValue(t){this.value=t}}class Kc{constructor(t){var e,n;n=void 0,(e="params")in this?Object.defineProperty(this,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[e]=n,this.params={byId:{},allIds:t.map((t=>t.name))};for(let e of t)this.params.byId[e.name]=new Zc(e)}getAllParameterNames(){return this.params.allIds}getParameterConfig(t){return{name:this.params.byId[t].name,min:this.params.byId[t].min,max:this.params.byId[t].max,value:this.params.byId[t].value,step:this.params.byId[t].step}}getParameterValue(t){return this.params.byId[t].value}setParameterValue(t,e){this.params.byId[t].value=e}}class Jc extends Kc{constructor(t){super(t)}}function th(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class eh extends Jc{constructor(){super([{name:"distortion",min:0,max:1,value:0,step:.1}]),th(this,"synth",void 0),th(this,"distortion",void 0),this.distortion=new fu(0).toDestination(),this.synth=(new pl).connect(this.distortion)}schedule(t){this.synth.triggerAttackRelease("C2","8n",t)}setParameterValue(t,e){this.params.byId[t].value=e,this.distortion.set({distortion:e})}}class nh extends Jc{constructor(t){super([]),th(this,"player",void 0),this.player=new Xa(t).toDestination()}schedule(t){this.player.start(t)}setParameterValue(t,e){super.setParameterValue(t,e)}reverse(){return this.player.reverse=!0,this}}class sh extends Kc{constructor(t,e){super([]),th(this,"instrument1",void 0),th(this,"instrument2",void 0),this.instrument1=t,this.instrument2=e}schedule(t){this.instrument1.schedule(t),this.instrument2.schedule(t)}}var ih=n(184),rh=n.n(ih);function oh(t){const{isPlaying:e,onClick:n}=t,s=rh()("playButton");return i.createElement("button",{className:s,onClick:n},i.createElement("span",null,e?"Pause":"Play"))}function ah(){return(ah=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t}).apply(this,arguments)}function lh(t){const{name:e,min:n=0,max:s=1,value:r=.5,step:o=.1,onInput:a}=t,l=rh()("slider",e);return i.createElement("div",{className:l},i.createElement("label",{htmlFor:e},e," (",r,")"),i.createElement("input",{name:e,id:e,type:"range",min:n,max:s,value:r,step:o,onInput:t=>a(parseFloat(t.target.value))}))}function uh(t){return i.createElement(lh,ah({onInput:t.onInput},w(t.selector)))}let ch;function hh(t,e){switch(e.type){case"keyDown":t[e.payload]=!0;break;case"keyUp":t[e.payload]=!1}return t}function dh(){const t=w(zc),e=w(Bc),n=w(Wc),s=w((t=>t.sequencer.tempo)),r=w((t=>t.sequencer.isPlaying)),o=Hc(),a=()=>o(r?jc:Vc);return((t,e)=>{const n=t.reduce(((t,e)=>(t[e]=!1,t)),{}),[s,r]=i.useReducer(hh,n),o=i.useCallback((e=>{const{key:n,target:i,repeat:o}=e;o||t.includes(n)&&(s[n]||r(ch.actions.KEYDOWN(n)))}),[t,s]),a=i.useCallback((n=>{const{key:i,target:o}=n;t.includes(i)&&s[i]&&(r(ch.actions.KEYUP(i)),e())}),[t,s]);i.useEffect((()=>(window.addEventListener("keydown",o,!0),()=>window.removeEventListener("keydown",o,!0))),[o]),i.useEffect((()=>(window.addEventListener("keyup",a,!0),()=>window.removeEventListener("keyup",a,!0))),[a])})([" "],a),i.useEffect((()=>{o(Lc(99))}),[]),i.useEffect((()=>{Ec(t,e,n,((t,e,n)=>((t,e,n,s)=>(t=>Object.keys(t.sequencer.pads[0][0][0]))(t).filter((i=>Uc(t,i,e,n,s))))(Gc.getState(),t,e,n)))}),[t,e,n]),i.createElement("section",{className:"sequencerControls"},i.createElement(lh,{name:"bpm",min:10,max:200,value:s,step:1,onInput:t=>o(Lc(t))}),i.createElement(oh,{isPlaying:r,onClick:a}),i.createElement("button",{className:rh()("clearAll"),onClick:()=>o(Qc())},"Clear All"))}function ph(t){const{instrumentName:e}=t,n=w((t=>((t,e)=>t.instruments.instruments.byId[e].params.allIds)(t,e))),s=Hc();return i.createElement(i.Fragment,null,n.map((t=>i.createElement(uh,{key:t,selector:n=>((t,e,n)=>t.instruments.instruments.byId[e].params.byId[n])(n,e,t),onInput:n=>s(function(t,e,n){return function(s,i){Cc(t).setParameterValue(e,n),s(Mc.actions.instrumentParameterUpdated(t,e,n))}}(e,t,n))}))))}function fh(t){const{instrumentName:e}=t,n=Hc(),s=rh()("track",e,"controlPanel");return i.createElement("section",{className:s},i.createElement("button",{className:rh()("removeInstrumentButton"),onClick:t=>{return n((s=e,function(t,e){return Tc(s),t(Mc.actions.instrumentRemoved(s))}));var s}},"x"),i.createElement("span",{className:rh()("instrumentLabel")},e),i.createElement(ph,{instrumentName:e}))}function mh(t){return[...gh(0,t)]}function*gh(t,e,n=1){for(let s=t;s<e;s+=n)yield s}function _h(t){const{instrumentName:e,bari:n,beati:s,padi:r}=t,o=w((t=>Uc(t,e,n,s,r))),a=Hc(),l=rh()("pad",o?"on":"off",`bar${n}`,"beat{beati}",`pad${r}`);return i.createElement("button",{className:l,onClick:()=>a($c(e,n,s,r))})}function yh(t){const{instrumentName:e}=t,n=w(zc),s=w(Bc),r=w(Wc),o=rh()("track",e,"pads");return i.createElement("section",{className:o,style:{gridTemplateColumns:`repeat(${n}, 1fr)`}},mh(n).map((t=>i.createElement("span",{key:`bar${t}`,className:rh()("bar"),style:{gridTemplateColumns:`repeat(${s}, 1fr)`}},mh(s).map((n=>i.createElement("span",{key:`beat${n}`,className:rh()("beat"),style:{gridTemplateColumns:`repeat(${r}, 1fr)`}},mh(r).map((s=>i.createElement(_h,{key:`${s}`,instrumentName:e,bari:t,beati:n,padi:s}))))))))))}function vh(t){const{instrumentName:e}=t,n=rh()("track",e);return i.createElement("section",{className:n},i.createElement(fh,{instrumentName:e}),i.createElement(yh,{instrumentName:e}))}function bh(){const t=w(Pc);return i.createElement("section",{className:"tracks"},t.map((t=>i.createElement(vh,{key:t,instrumentName:t}))))}(ch||(ch={})).actions={KEYDOWN:t=>({type:"keyDown",payload:t}),KEYUP:t=>({type:"keyUp",payload:t})};const wh=function(){const[t,e]=i.useState(!0),n=Hc();return i.useEffect((()=>{let t=!0;return(async()=>{await xc(),n(Rc("hat",new nh("/assets/audio/hat.wav"))),n(Rc("lazertom",new nh("/assets/audio/lazertom.wav"))),n(Rc("electrotom",new nh("/assets/audio/electrotom.wav"))),n(Rc("snare",new nh("/assets/audio/snare.wav"))),n(Rc("kicksynth",new sh(new nh("/assets/audio/kick.wav"),new eh))),n(Rc("kickreverse",new nh("/assets/audio/kick.wav").reverse())),await kc().loaded(),t&&e(!1)})(),()=>{t=!1}}),[]),t?i.createElement(Yc,null):i.createElement("section",{className:"stepSequencer"},i.createElement(dh,null),i.createElement(bh,null))},xh=function(){return i.createElement(wh,null)},kh=document.querySelector("#stepsequencer_container");r.render(i.createElement(d,{store:Gc},i.createElement(xh,null)),kh)})()})();